"use strict";(self.webpackChunkmessenger2000=self.webpackChunkmessenger2000||[]).push([[661],{6661:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var a=s(4293),n=s(2478),i={chats:"Chats_chats__FGkaX",containerDialog:"Chats_containerDialog__XqWkh",chats__newDialogInput:"Chats_chats__newDialogInput__ADZFM",messages:"Chats_messages__m9wS+"},r=s(1412),c=s(184);function u(){return(0,c.jsxs)("div",{className:i.chats,children:[(0,c.jsxs)("div",{className:i.containerDialog,children:[(0,c.jsx)("div",{className:i.dialogs,children:(0,c.jsx)(a.Z,{})}),(0,c.jsx)("div",{className:i.chats__newDialogInput,children:(0,c.jsx)(r.Z,{})})]}),(0,c.jsx)("div",{className:i.messages,children:(0,c.jsx)(n.Z,{})})]})}},4293:function(e,t,s){s.d(t,{Z:function(){return d}});var a=s(2791),n=s(5048),i=s(5122),r=s(3398),c=s(1087),u={unActiveDialog:"DialogItem_unActiveDialog__lYKd+",activeDialog:"DialogItem_activeDialog__9ZLSp",avatar:"DialogItem_avatar__0jXYi",boxList:"DialogItem_boxList__lSFeu",item:"DialogItem_item__iLypo"},o=s(184);function l(e){var t=e.id,s=e.name,a=e.avatar;return(0,o.jsx)("li",{className:u.item,children:(0,o.jsxs)(c.OL,{className:function(e){return e.isActive?u.activeDialog:u.unActiveDialog},to:"".concat(t),children:[a&&(0,o.jsx)("div",{children:(0,o.jsx)("img",{className:u.avatar,src:a,width:"24",heigth:"24",alt:"profile avatar"})}),(0,o.jsx)("p",{children:s})]})})}function d(){var e=(0,n.I0)(),t=(0,n.v9)((function(e){return e.chats.subscribeActived}),(function(e,t){return e!==t}));(0,a.useEffect)((function(){return e((0,i.H2)()),function(){e((0,i.Q3)())}}),[t,e]);var s=(0,a.useCallback)((function(){return(0,r.vK)()}),[]),c=(0,n.v9)(s()).map((function(e){return(0,o.jsx)(_,{avatar:e.avatar,id:e.linkToDialog,name:e.nameDialog},e.chatId)}));return(0,o.jsx)("div",{className:u.boxList,children:(0,o.jsx)("ul",{className:u.list,children:c})})}var _=a.memo(l)},1412:function(e,t,s){s.d(t,{Z:function(){return g}});var a=s(2791),n=s(5048),i=s(5122),r=s(3398),c="InputNewChat_buttonAddChat__WWfFF",u="InputNewChat_buttonAddChat__input__lhxy5",o="InputNewChat_boxAddedChat__hegAr",l="InputNewChat_boxAddedChat__input__Qhuux",d="InputNewChat_error__DUIv+",_=s(184);function m(){var e=(0,n.I0)(),t=(0,n.v9)((function(e){return e.chats.nameNewChat})),s=(0,n.v9)((0,r.dq)(),n.wU),a=(0,n.v9)((0,r.dO)(),n.wU);return(0,_.jsxs)("div",{className:o,children:[(0,_.jsx)("input",{type:"email",className:l,placeholder:"email@email.ru",required:!0,onChange:function(t){t.preventDefault(),e((0,i.vk)(t.target.value))},value:t,label:"email user"}),s&&(0,_.jsx)("div",{className:d,children:a}),(0,_.jsx)("button",{className:u,type:"submit",onClick:function(s){s.preventDefault(),e(t?(0,i.rz)():(0,i.xi)())},children:"add"})]})}function g(){var e=(0,n.I0)(),t=(0,a.useMemo)((function(){return(0,r.VF)()}),[]);return(0,n.v9)(t)?(0,_.jsx)(m,{}):(0,_.jsxs)("div",{className:c,children:[(0,_.jsx)("button",{className:u,onClick:function(t){t.preventDefault(),e((0,i.xi)())},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u0440\u0443\u0433\u0430"})," "]})}},2478:function(e,t,s){s.d(t,{Z:function(){return w}});var a={warning:"Messages_warning__IPlWp",box:"Messages_box__yA9Oi",messagesTitle:"Messages_messagesTitle__9Ixka",messages:"Messages_messages__NOyjG",messagesTitleName:"Messages_messagesTitleName__vJm3a",user:"Messages_user__xjqnt",bot:"Messages_bot__rKVlM",date:"Messages_date__9Yi9-",box__back:"Messages_box__back__AnfSn",avatar:"Messages_avatar__ZK9L8"},n=s(5048),i=s(7689),r=s(1087),c="MessageInputNewMessage_box__5elFE",u="MessageInputNewMessage_inputMessageArea__Bh0Xu",o="MessageInputNewMessage_buttonEnter__ePF2N",l=s(5122),d=s(184);function _(e){var t=e.uid,s=(0,n.I0)(),a=(0,n.v9)((function(e){return e.messages.textNewMessage}));return(0,d.jsxs)("div",{className:c,children:[(0,d.jsx)("textarea",{className:u,autoFocus:!0,id:"inputRef",value:a,onChange:function(e){e.preventDefault(),s((0,l.wm)(e.target.value))},placeholder:"text message"}),(0,d.jsx)("button",{className:o,onClick:function(e){e.preventDefault(),""!==a&&(s((0,l.kG)(t)),document.getElementById("inputRef").focus())},children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})}var m=s(2791),g="message_text__QgITz",h="message_time__HMD2P",f="message_user__XBjqZ",v="message_bot__OGAak",x=(0,m.forwardRef)((function(e,t){var s=e.el,a=new Date(s.TimestampServer?s.TimestampServer:new Date),n=window.innerWidth;return(0,m.useEffect)((function(){n<=600?t.current.scrollIntoView(!0):t.current.scrollIntoView({behavior:"smooth"})}),[t,n]),(0,d.jsx)("div",{className:"you"===s.author?f:v,children:(0,d.jsxs)("div",{className:g,children:[s.message,(0,d.jsxs)("div",{className:h,children:[a.getHours()," : ",(a.getMinutes()<10?"0":"")+a.getMinutes()]})]})})}));function j(e){var t,s,i=e.uid,r=(0,n.v9)((t=i,function(e){return e.messages.messageList[t].messages})),c=(0,n.I0)(),u=(0,m.useRef)();(0,m.useEffect)((function(){return c((0,l.L9)(i)),function(){c((0,l.qn)(i))}}),[i,c]);var o=r.map((function(e){var t=new Date(e.TimestampServer?e.TimestampServer:new Date);if(void 0===s||s.getDate()!==t.getDate()){var n=(s=t).toLocaleString("default",{month:"long"});return(0,d.jsxs)(m.Fragment,{children:[(0,d.jsxs)("div",{className:a.date,children:[n," ",s.getDate()]},"".concat(e.idMessage,"_date")),(0,d.jsx)(N,{ref:u,el:e},"".concat(e.idMessage,"_m"))]},e.idMessage)}return(0,d.jsx)(N,{ref:u,el:e},"".concat(e.idMessage,"_message"))}));return(0,d.jsxs)(d.Fragment,{children:[o&&o,(0,d.jsx)("div",{ref:u})]})}var N=m.memo(x),p=s(3398);function w(){var e=(0,i.UO)().id,t=(0,n.I0)(),s=(0,m.useMemo)((function(){return(0,p.iN)(e)}),[e]),c=(0,n.v9)(s),u=(0,m.useRef)(),o=window.innerWidth;(0,m.useEffect)((function(){c&&t((0,l.Lt)(c.chatId))}),[c,t]);return(0,d.jsx)(d.Fragment,{children:c?(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:a.box,children:[(0,d.jsxs)("div",{className:a.messagesTitle,children:[(0,d.jsxs)("div",{className:a.messagesTitleName,children:[c.nameDialog,c.avatar&&(0,d.jsx)("img",{className:a.avatar,src:c.avatar,width:"24",heigth:"24",alt:"profile avatar"})]}),o<1024&&(0,d.jsx)("div",{children:(0,d.jsx)(r.rU,{class:a.box__back,to:"/chats",children:"\u2190"})})]}),(0,d.jsxs)("div",{onScroll:function(){Math.abs(u.current.getBoundingClientRect().top-u.current.offsetTop)<1&&t((0,l.Sq)(c.chatId))},className:a.messages,children:[(0,d.jsx)("div",{ref:u}),(0,d.jsx)(j,{uid:c.chatId})]}),(0,d.jsx)("div",{className:a.input,children:(0,d.jsx)(_,{uid:c.chatId})})]})}):(0,d.jsx)("p",{className:a.warning,children:"\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u0447\u0430\u0442"})})}},3398:function(e,t,s){function a(){return function(e){return e.chats.chatList}}function n(e){return function(t){return t.chats.chatList.find((function(t){return t.linkToDialog===Number(e)}))}}function i(){return function(e){return e.chats.toggleNewChat}}function r(){return function(e){return e.chats.error.isError}}function c(){return function(e){return e.chats.error.msg}}s.d(t,{VF:function(){return i},dO:function(){return c},dq:function(){return r},iN:function(){return n},vK:function(){return a}})}}]);
//# sourceMappingURL=661.a7a3822d.chunk.js.map
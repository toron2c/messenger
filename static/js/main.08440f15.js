/*! For license information please see main.08440f15.js.LICENSE.txt */
!function(){var e={5122:function(e,t,n){"use strict";n.d(t,{Aq:function(){return z},Bo:function(){return w},Bv:function(){return l},Cl:function(){return F},Dv:function(){return D},Ee:function(){return q},Fv:function(){return B},H2:function(){return p},K8:function(){return s},L9:function(){return C},Lt:function(){return S},MQ:function(){return H},Oq:function(){return j},Q3:function(){return v},Qi:function(){return Z},RC:function(){return N},S4:function(){return _},Sq:function(){return T},Sz:function(){return W},Xi:function(){return o},YA:function(){return P},_g:function(){return y},_o:function(){return E},bG:function(){return O},hf:function(){return i},kG:function(){return R},m4:function(){return x},oW:function(){return U},pO:function(){return d},q3:function(){return f},qS:function(){return a},qn:function(){return I},r:function(){return A},rz:function(){return k},sG:function(){return u},sT:function(){return L},uy:function(){return c},vQ:function(){return h},vV:function(){return M},vk:function(){return g},wm:function(){return b},x5:function(){return V},xi:function(){return m}});var r=n(3605);function i(){return{type:r.xv}}function a(e){return{type:r.CI,value:e}}function o(e){return{type:r.FL,value:e}}function u(e){return{type:r.d,value:e}}function s(){return{type:r.Hf}}function c(e){return{type:r.pr,msg:e}}function l(e){return{type:r.dY,src:e}}function f(e){return{type:r.nn,src:e}}function h(){return{type:r.Bj}}function d(e){return{type:r.ZS,payload:e}}function p(){return{type:r.z}}function v(){return{type:r.X5}}function y(e){return{type:r.N3,payload:e}}function m(){return{type:r.xl}}function g(e){return{type:r.V$,text:e}}function k(){return{type:r.c4}}function _(e){return{type:r.$N,msg:e}}function b(e){return{type:r.HR,text:e}}function w(e,t,n){return{type:r.CK,uid:e,link:t,img:n}}function E(e,t,n,i,a){return{type:r.wo,uid:e,link:t,messages:n,pageMessage:i,img:a}}function S(e){return{type:r.UZ,uid:e}}function x(e,t){return{type:r.yX,uid:e,messages:t}}function T(e){return{type:r.zS,uid:e}}function C(e){return{type:r.nF,uid:e}}function I(e){return{type:r.Am,uid:e}}function N(e,t){return{type:r.DF,uid:e,message:t}}function A(e,t){return{type:r.E5,uid:e,messages:t}}function R(e){return{type:r.Dn,uid:e}}function O(){return{type:r.ww}}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{type:r.bD,page:e}}function D(e){return{type:r.At,payload:e}}function L(e,t){return{type:r.Go,payload:{message:e,page:t}}}function M(e){return{type:r.eh,value:e}}function F(e){return{type:r.cg,value:e}}function U(){return{type:r.Fg}}function Z(){return{type:r.F6}}function j(e){return{type:r.G5,status:e}}function V(e,t){return{type:r.nv,payload:{status:e,message:t}}}function q(){return{type:r.qh}}function z(){return{type:r.H7}}function B(e){return{type:r.lk,payload:e}}function H(){return{type:r.D_}}function W(){return{type:r.Ub}}},2470:function(e,t,n){"use strict";function r(){return function(e){return e.auth.error.isError}}function i(){return function(e){return e.auth.isAuth}}n.d(t,{$:function(){return r},F:function(){return i}})},3605:function(e,t,n){"use strict";n.d(t,{$N:function(){return _},Am:function(){return R},At:function(){return D},Bj:function(){return h},CI:function(){return a},CK:function(){return b},DF:function(){return O},D_:function(){return z},Dn:function(){return C},E5:function(){return T},F6:function(){return Z},FL:function(){return o},Fg:function(){return U},G5:function(){return j},Go:function(){return L},H7:function(){return B},HR:function(){return N},Hf:function(){return l},N3:function(){return y},UZ:function(){return E},Ub:function(){return H},V$:function(){return g},X5:function(){return v},ZS:function(){return d},bD:function(){return P},c4:function(){return k},cg:function(){return F},d:function(){return u},dY:function(){return s},eh:function(){return M},lk:function(){return r},nF:function(){return A},nn:function(){return c},nv:function(){return V},pr:function(){return f},qh:function(){return q},wo:function(){return x},ww:function(){return I},xl:function(){return m},xv:function(){return i},yX:function(){return S},z:function(){return p},zS:function(){return w}});var r="PROFILE::INITIALIZE_PROFILE",i="PROFILE::TOGGLE_PROFILE_EDIT",a="PROFILE::SET_NAME_PROFILE",o="PROFILE::SET_STATUS_PROFILE",u="PROFILE::SET_ABOUT_PROFILE",s="PROFILE::SET_AVATAR_PROFILE_WITH_SAGA",c="PROFILE::SET_AVATAR_TO_PROFILE",l="PROFILE::SAVE_PROFILE_WITH_SAGA",f="PROFILE::SET_ERROR_SAVE_PROFILE_DATA",h="CHATS::GET_CHATS_WITH_SAGA",d="CHATS::ADD_CHATS_TO_STORE",p="CHATS::SET_SUBSCRIBE_ACTIVE",v="CHATS::SET_CLOSED_SUBSCRIBE",y="CHATS::ADD_NEW_ELEMENT_TO_CHAT",m="CHATS::TOGGLE_NEW_CHAT",g="CHATS::CHANGE_NAME_CHAT",k="CHATS::ADD_CHAT_WITH_SAGA",_="SET::ADDED_CHAT_ERROR",b="MESSAGES::GET_MESSAGES_WITH_SAGA",w="MESSAGES::GET_OLD_MESSAGES_WITH_SAGA",E="MESSAGES::UPDATE_LAST_MESSAGES_WITH_SAGA",S="MESSAGES::UPDATES_LAST_MESSAGES_IN_STATE",x="MESSAGES::ADD_MESSAGES_TO_STORE",T="MESSAGES::ADD_OLD_MESSAGES_TO_STORE",C="MESSAGES::SEND_MESSAGE_WITH_SAGA",I="MESSAGES::SEND_MESSAGE",N="MESSAGES::INPUT_CHAT",A="MESSAGES::SUBSCRIBE_ON_NEW_MESSAGES_WITH_SAGA",R="MESSAGES::UNSUBSCRIBE_ON_NEW_MESSAGES",O="MESSAGES::ADD_NEW_MESSAGE_TO_STORE",P="CHARACTERS::GET_INIT_LIST",D="CHARACTERS::SET_LIST",L="CHARACTERS::SET_ERROR",M="AUTH::SET_EMAIL",F="AUTH::SET_PASS",U="AUTH::REGISTRATION_USER",Z="AUTH::AUTHORIZATION_USER",j="AUTH::SET_STATUS_AUTH",V="AUTH::SET_ERROR_AUTH",q="AUTH:CLEAR_FIELDS",z="AUTH::LOGOUT_AUTH_WITH_SAGA",B="AUTH::LOGAUT",H="AUTH::DELETE_DATA_AFTER_LOGOUT"},8278:function(e,t,n){"use strict";n.d(t,{Ep:function(){return g},RQ:function(){return M},WK:function(){return z},X3:function(){return j},Zn:function(){return A},Zq:function(){return D},aU:function(){return r},cP:function(){return k},fp:function(){return w},kG:function(){return R},pC:function(){return L},q_:function(){return p},uX:function(){return V}});var r,i=n(3144),a=n(5671),o=n(136),u=n(7277),s=n(8664),c=n(885),l=n(2982);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));var h,d="popstate";function p(e){return void 0===e&&(e={}),b((function(e,t){var n=k(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,o=void 0===a?"":a,u=n.hash;return m("",{pathname:i,search:o,hash:void 0===u?"":u},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:g(t))}),(function(e,t){v("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),e)}function v(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function y(e){return{usr:e.state,key:e.key}}function m(e,t,n,r){return void 0===n&&(n=null),f({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?k(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function g(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function k(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function _(e){var t="undefined"!==typeof window&&"undefined"!==typeof window.location&&"null"!==window.location.origin?window.location.origin:"unknown://unknown",n="string"===typeof e?e:g(e);return new URL(n,t)}function b(e,t,n,i){void 0===i&&(i={});var a=i,o=a.window,u=void 0===o?document.defaultView:o,s=a.v5Compat,c=void 0!==s&&s,l=u.history,h=r.Pop,p=null;function v(){h=r.Pop,p&&p({action:h,location:k.location})}var k={get action(){return h},get location(){return e(u,l)},listen:function(e){if(p)throw new Error("A history only accepts one active listener");return u.addEventListener(d,v),p=e,function(){u.removeEventListener(d,v),p=null}},createHref:function(e){return t(u,e)},encodeLocation:function(e){var t=_(g(e));return f({},e,{pathname:t.pathname,search:t.search,hash:t.hash})},push:function(e,t){h=r.Push;var i=m(k.location,e,t);n&&n(i,e);var a=y(i),o=k.createHref(i);try{l.pushState(a,"",o)}catch(s){u.location.assign(o)}c&&p&&p({action:h,location:k.location})},replace:function(e,t){h=r.Replace;var i=m(k.location,e,t);n&&n(i,e);var a=y(i),o=k.createHref(i);l.replaceState(a,"",o),c&&p&&p({action:h,location:k.location})},go:function(e){return l.go(e)}};return k}function w(e,t,n){void 0===n&&(n="/");var r=A(("string"===typeof t?k(t):t).pathname||"/",n);if(null==r)return null;var i=E(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=C(i[o],N(r));return a}function E(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(R(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));var o=M([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(R(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),E(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:T(o,e.index),routesMeta:u})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(h||(h={}));var S=/^:\w+$/,x=function(e){return"*"===e};function T(e,t){var n=e.split("/"),r=n.length;return n.some(x)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!x(e)})).reduce((function(e,t){return e+(S.test(t)?3:""===t?1:10)}),r)}function C(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=I({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:M([i,l.pathname]),pathnameBase:F(M([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=M([i,l.pathnameBase]))}return a}function I(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);O("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=(0,c.Z)(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return O(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function N(e){try{return decodeURI(e)}catch(t){return O(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function A(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function R(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function O(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function P(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function L(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=k(e):(R(!(i=f({},e)).pathname||!i.pathname.includes("?"),P("?","pathname","search",i)),R(!i.pathname||!i.pathname.includes("#"),P("#","pathname","hash",i)),R(!i.search||!i.search.includes("#"),P("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?k(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:U(a),hash:Z(u)}}(i,a),h=u&&"/"!==u&&u.endsWith("/"),d=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!h&&!d||(l.pathname+="/"),l}var M=function(e){return e.join("/").replace(/\/\/+/g,"/")},F=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},U=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},Z=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},j=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n)}((0,s.Z)(Error));var V=function(e,t){void 0===t&&(t=302);var n=t;"number"===typeof n?n={status:n}:"undefined"===typeof n.status&&(n.status=302);var r=new Headers(n.headers);return r.set("Location",e),new Response(null,f({},n,{headers:r}))},q=(0,i.Z)((function e(t,n,r){(0,a.Z)(this,e),this.status=t,this.statusText=n||"",this.data=r}));function z(e){return e instanceof q}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var B=new Set(["POST","PUT","PATCH","DELETE"]);new Set(["GET","HEAD"].concat((0,l.Z)(B)))},7472:function(e){e.exports="object"==typeof self?self.FormData:window.FormData},2110:function(e,t,n){"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function w(e){return b(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return w(e)||b(e)===l},t.isConcurrentMode=w,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===y},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===u},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===_||e.$$typeof===m)},t.typeOf=b},8309:function(e,t,n){"use strict";e.exports=n(746)},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var Z=!1;function j(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case w:return"Portal";case x:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function B(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=B(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=B(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,B(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+B(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:B(n)}}function ae(e,t){var n=B(t.value),r=B(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ee=null,Se=null;function xe(e){if(e=ki(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),we(e.stateNode,e.type,t))}}function Te(e){Ee?Se?Se.push(e):Se=[e]:Ee=e}function Ce(){if(Ee){var e=Ee,t=Se;if(Se=Ee=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Ie(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ie(e,t,n)}finally{Ae=!1,(null!==Ee||null!==Se)&&(Ne(),Ce())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ze=null,je={onError:function(e){Me=!0,Fe=e}};function Ve(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Be(e){if(qe(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Be(i),e;if(o===r)return Be(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,$e=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,Et,St,xt,Tt=!1,Ct=[],It=null,Nt=null,At=null,Rt=new Map,Ot=new Map,Pt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void xt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Zt(e,t,n){Ut(e)&&n.delete(t)}function jt(){Tt=!1,null!==It&&Ut(It)&&(It=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(Zt),Ot.forEach(Zt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function qt(e){function t(t){return Vt(t,e)}if(0<Ct.length){Vt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Vt(It,e),null!==Nt&&Vt(Nt,e),null!==At&&Vt(At,e),Rt.forEach(t),Ot.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var zt=_.ReactCurrentBatchConfig,Bt=!0;function Ht(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Wt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Gt(e,t,n,r){if(Bt){var i=Qt(e,t,n,r);if(null===i)Br(e,t,r,Kt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Mt(It,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Mt(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=Qt(e,t,n,r))&&Br(e,t,r,Kt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Br(e,t,r,null,n)}}var Kt=null;function Qt(e,t,n,r){if(Kt=null,null!==(e=gi(e=be(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),_n=an(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function xn(){return Sn}var Tn=F({},fn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(Tn),In=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Rn),Pn=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Zn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=Wr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Gn=null;function Kn(e){Ur(e,0)}function Qn(e){if(G(_i(e)))return e}function $n(e,t){if("change"===e)return t}var Yn=!1;if(l){var Xn;if(l){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Xn=Jn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Gn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];Hn(t,Gn,e,be(e)),Re(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function ar(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==K(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Wr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},Er={},Sr={};function xr(e){if(Er[e])return Er[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Er[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Tr=xr("animationend"),Cr=xr("animationiteration"),Ir=xr("animationstart"),Nr=xr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Ar.set(e,t),s(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Dr=Rr[Pr];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(Tr,"onAnimationEnd"),Or(Cr,"onAnimationIteration"),Or(Ir,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ze=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ze,Ue=!1,Ze=null,e}function Zr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,jr("selectionchange",!1,t))}}function zr(e,t,n,r){switch($t(t)){case 1:var i=Ht;break;case 4:i=Wt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Br(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=be(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Cn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Tr:case Cr:case Ir:s=mn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=On;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=In}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Oe(p,h))&&l.push(Hr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=In,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:_i(s),d=null==c?u:_i(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==s&&Kr(o,u,s,l,!1),null!==c&&null!==f&&Kr(o,f,c,l,!0)}if("select"===(s=(u=r?_i(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=$n;else if(Bn(u))if(Yn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Hn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?_i(r):window,e){case"focusin":(Bn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,_r(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,qn=!0)),0<(m=Wr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Vn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Zn=!0,Un);case"textInput":return(e=t.data)===Un&&Zn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Dn&&jn(e,t)?(e=en(),Jt=Xt=Yt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Oe(n,a))&&o.unshift(Hr(n,s,u)):i||null!=(s=Oe(n,a))&&o.push(Hr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var wi=[],Ei=-1;function Si(e){return{current:e}}function xi(e){0>Ei||(e.current=wi[Ei],wi[Ei]=null,Ei--)}function Ti(e,t){Ei++,wi[Ei]=e.current,e.current=t}var Ci={},Ii=Si(Ci),Ni=Si(!1),Ai=Ci;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){xi(Ni),xi(Ii)}function Di(e,t,n){if(Ii.current!==Ci)throw Error(a(168));Ti(Ii,t),Ti(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ai=Ii.current,Ti(Ii,e),Ti(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,xi(Ni),xi(Ii),Ti(Ii,e)):xi(Ni),Ti(Ni,n)}var Ui=null,Zi=!1,ji=!1;function Vi(e){null===Ui?Ui=[e]:Ui.push(e)}function qi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Zi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Je,qi),i}finally{kt=t,ji=!1}}return null}var zi=[],Bi=0,Hi=null,Wi=0,Gi=[],Ki=0,Qi=null,$i=1,Yi="";function Xi(e,t){zi[Bi++]=Wi,zi[Bi++]=Hi,Hi=e,Wi=t}function Ji(e,t,n){Gi[Ki++]=$i,Gi[Ki++]=Yi,Gi[Ki++]=Qi,Qi=e;var r=$i;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Yi=a+e}else $i=1<<a|n<<i|r,Yi=e}function ea(e){null!==e.return&&(Xi(e,1),Ji(e,1,0))}function ta(e){for(;e===Hi;)Hi=zi[--Bi],zi[Bi]=null,Wi=zi[--Bi],zi[Bi]=null;for(;e===Qi;)Qi=Gi[--Ki],Gi[Ki]=null,Yi=Gi[--Ki],Gi[Ki]=null,$i=Gi[--Ki],Gi[Ki]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:$i,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=_.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Si(null),ga=null,ka=null,_a=null;function ba(){_a=ka=ga=null}function wa(e){var t=ma.current;xi(ma),e._currentValue=t}function Ea(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,_a=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_u=!0),e.firstContext=null)}function xa(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Ca(e){null===Ta?Ta=[e]:Ta.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ca(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Is)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ca(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Za=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Va={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function za(e,t,n){var r=!1,i=Ci,a=t.contextType;return"object"===typeof a&&null!==a?a=xa(a):(i=Oi(t)?Ai:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ci),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Va,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ba(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Va.enqueueReplaceState(t,t.state,null)}function Ha(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Za,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=xa(a):(a=Oi(t)?Ai:Ii.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Va.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Za&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ka(e){return(0,e._init)(e._payload)}function Qa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===E?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Ka(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case w:return(t=Uc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?l(e,t,n,r):null;case O:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Xi(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===E){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Ka(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Wa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===E?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Dc(o.type,o.key,o.props,null,r.mode,s)).ref=Wa(r,a,o),s.return=r,r=s)}return u(r);case w:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case O:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Qa(!0),Ya=Qa(!1),Xa={},Ja=Si(Xa),eo=Si(Xa),to=Si(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Ja,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Ja),Ti(Ja,t)}function io(){xi(Ja),xi(eo),xi(to)}function ao(e){no(to.current);var t=no(Ja.current),n=se(t,e.type);t!==n&&(Ti(eo,e),Ti(Ja,n))}function oo(e){eo.current===e&&(xi(Ja),xi(eo))}var uo=Si(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=_.ReactCurrentDispatcher,ho=_.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,_o=0,bo=0;function wo(){throw Error(a(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,_o=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function xo(){var e=0!==_o;return _o=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function Co(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Io(e,t){return"function"===typeof t?t(e):t}function No(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(_u=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(_u=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Oo(e,t){var n=vo,r=Co(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,_u=!0),r=r.queue,Bo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Zo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Zo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return Co().memoizedState}function Vo(e,t,n,r){var i=To();vo.flags|=e,i.memoizedState=Zo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=Co();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&Eo(r,o.deps))return void(i.memoizedState=Zo(t,n,a,r))}vo.flags|=e,i.memoizedState=Zo(1|t,n,a,r)}function zo(e,t){return Vo(8390656,8,e,t)}function Bo(e,t){return qo(2048,8,e,t)}function Ho(e,t){return qo(4,2,e,t)}function Wo(e,t){return qo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ko(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Go.bind(null,t,e),n)}function Qo(){}function $o(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,_u=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Jo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return Co().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ia(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ca(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ia(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:xa,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},uu={readContext:xa,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:xa,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Uo,useDebugValue:Qo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Jo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Zo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Ns.identifierPrefix;if(ia){var n=Yi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=_o++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:xa,useCallback:$o,useContext:xa,useEffect:Bo,useImperativeHandle:Ko,useInsertionEffect:Ho,useLayoutEffect:Wo,useMemo:Yo,useReducer:No,useRef:jo,useState:function(){return No(Io)},useDebugValue:Qo,useDeferredValue:function(e){return Xo(Co(),yo.memoizedState,e)},useTransition:function(){return[No(Io)[0],Co().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1},cu={readContext:xa,useCallback:$o,useContext:xa,useEffect:Bo,useImperativeHandle:Ko,useInsertionEffect:Ho,useLayoutEffect:Wo,useMemo:Yo,useReducer:Ao,useRef:jo,useState:function(){return Ao(Io)},useDebugValue:Qo,useDeferredValue:function(e){var t=Co();return null===yo?t.memoizedState=e:Xo(t,yo.memoizedState,e)},useTransition:function(){return[Ao(Io)[0],Co().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bs||(Bs=!0,Hs=r),hu(0,t)},n}function vu(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=xc.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=_.ReactCurrentOwner,_u=!1;function bu(e,t,n,r){t.child=null===e?Ya(t,null,n,r):$a(t,e.child,n,r)}function wu(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=xo(),null===e||_u?(ia&&n&&ea(t),t.flags|=1,bu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bu(e,t,i))}function Eu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Bu(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(_u=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Bu(e,t,i);0!==(131072&e.flags)&&(_u=!0)}}return Cu(e,t,n,r,i)}function xu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ps,Os),Os|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ps,Os),Os|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Ps,Os),Os|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Ps,Os),Os|=r;return bu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cu(e,t,n,r,i){var a=Oi(n)?Ai:Ii.current;return a=Ri(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=xo(),null===e||_u?(ia&&r&&ea(t),t.flags|=1,bu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bu(e,t,i))}function Iu(e,t,n,r,i){if(Oi(n)){var a=!0;Mi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)zu(e,t),za(t,n,r),Ha(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=xa(c):c=Ri(t,c=Oi(n)?Ai:Ii.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ba(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(ja(t,n,l,r),s=t.memoizedState),(u=Aa||qa(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Oa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=xa(s):s=Ri(t,s=Oi(n)?Ai:Ii.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ba(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(ja(t,n,d,r),p=t.memoizedState),(c=Aa||qa(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Bu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):bu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Ru(e,t,n,r,i){return da(),pa(i),t.flags|=256,bu(e,t,n,r),t.child}var Ou,Pu,Du,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Zu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Zu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Zu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),_u||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),Zu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Ki++]=$i,Gi[Ki++]=Yi,Gi[Ki++]=Qi,$i=e.id,Yi=e.overflow,Qi=t),(t=Uu(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Pc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Pc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Zu(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ea(e.return,t,n)}function Vu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vu(t,!0,n,null,a);break;case"together":Vu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Oi(t.type)&&Pi(),Wu(t),null;case 3:return r=t.stateNode,io(),xi(Ni),xi(Ii),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Pu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Ja.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Zr("cancel",r),Zr("close",r);break;case"iframe":case"object":case"embed":Zr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Zr(Lr[i],r);break;case"source":Zr("error",r);break;case"img":case"image":case"link":Zr("error",r),Zr("load",r);break;case"details":Zr("toggle",r);break;case"input":$(r,o),Zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Zr("invalid",r);break;case"textarea":ie(r,o),Zr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Zr("scroll",r)}switch(n){case"input":W(r),J(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ou(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Zr("cancel",e),Zr("close",e),i=r;break;case"iframe":case"object":case"embed":Zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Zr(Lr[i],e);i=r;break;case"source":Zr("error",e),i=r;break;case"img":case"image":case"link":Zr("error",e),Zr("load",e),i=r;break;case"details":Zr("toggle",e),i=r;break;case"input":$(e,r),i=Q(e,r),Zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Zr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Zr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),J(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+B(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Du(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Ja.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(xi(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ds&&(Ds=3):vc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),null===e&&qr(t.stateNode.containerInfo),Wu(t),null;case 10:return wa(t.type._context),Wu(t),null;case 19:if(xi(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Hu(o,!1);else{if(0!==Ds||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Hu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>qs&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*Ye()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=uo.current,Ti(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Os)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ku(e,t){switch(ta(t),t.tag){case 1:return Oi(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),xi(Ni),xi(Ii),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(xi(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(uo),null;case 4:return io(),null;case 10:return wa(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Ou=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Ja.current);var a,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Zr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Du=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qu=!1,$u=!1,Yu="function"===typeof WeakSet?WeakSet:Set,Xu=null;function Ju(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:$u||Ju(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),qt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!$u&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!$u&&(Ju(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Sc(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?($u=(r=$u)||null!==n.memoizedState,hs(e,t,n),$u=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yu),t.forEach((function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ms(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(y){Sc(e,e.return,y)}try{ns(5,e,e.return)}catch(y){Sc(e,e.return,y)}}break;case 1:vs(t,e),ms(e),512&r&&null!==n&&Ju(n,n.return);break;case 5:if(vs(t,e),ms(e),512&r&&null!==n&&Ju(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Sc(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&Y(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Sc(e,e.return,y)}}break;case 6:if(vs(t,e),ms(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Sc(e,e.return,y)}}break;case 3:if(vs(t,e),ms(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(y){Sc(e,e.return,y)}break;case 4:default:vs(t,e),ms(e);break;case 13:vs(t,e),ms(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vs=Ye())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($u=(l=$u)||f,vs(t,e),$u=l):vs(t,e),ms(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Xu=e,f=e.child;null!==f;){for(h=Xu=f;null!==Xu;){switch(p=(d=Xu).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Ju(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Sc(r,n,y)}}break;case 5:Ju(d,d.return);break;case 22:if(null!==d.memoizedState){bs(h);continue}}null!==p?(p.return=d,Xu=p):bs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Sc(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Sc(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ms(e),4&r&&ps(e);case 21:}}function ms(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Sc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Xu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Xu;){var i=Xu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||$u;u=Qu;var c=$u;if(Qu=o,($u=s)&&!c)for(Xu=i;null!==Xu;)s=(o=Xu).child,22===o.tag&&null!==o.memoizedState?ws(i):null!==s?(s.return=o,Xu=s):ws(i);for(;null!==a;)Xu=a,ks(a,t,n),a=a.sibling;Xu=i,Qu=u,$u=c}_s(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xu=a):_s(e)}}function _s(e){for(;null!==Xu;){var t=Xu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$u||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$u)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(a(163))}$u||512&t.flags&&is(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Xu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xu=n;break}Xu=t.return}}function bs(e){for(;null!==Xu;){var t=Xu;if(t===e){Xu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xu=n;break}Xu=t.return}}function ws(e){for(;null!==Xu;){var t=Xu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Sc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Sc(t,i,s)}}var a=t.return;try{is(t)}catch(s){Sc(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Sc(t,o,s)}}}catch(s){Sc(t,t.return,s)}if(t===e){Xu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Xu=u;break}Xu=t.return}}var Es,Ss=Math.ceil,xs=_.ReactCurrentDispatcher,Ts=_.ReactCurrentOwner,Cs=_.ReactCurrentBatchConfig,Is=0,Ns=null,As=null,Rs=0,Os=0,Ps=Si(0),Ds=0,Ls=null,Ms=0,Fs=0,Us=0,Zs=null,js=null,Vs=0,qs=1/0,zs=null,Bs=!1,Hs=null,Ws=null,Gs=!1,Ks=null,Qs=0,$s=0,Ys=null,Xs=-1,Js=0;function ec(){return 0!==(6&Is)?Ye():-1!==Xs?Xs:Xs=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Is)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===Js&&(Js=vt()),Js):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,r){if(50<$s)throw $s=0,Ys=null,Error(a(185));mt(e,n,r),0!==(2&Is)&&e===Ns||(e===Ns&&(0===(2&Is)&&(Fs|=n),4===Ds&&uc(e,Rs)),rc(e,r),1===n&&0===Is&&0===(1&t.mode)&&(qs=Ye()+500,Zi&&qi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Rs:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Zi=!0,Vi(e)}(sc.bind(null,e)):Vi(sc.bind(null,e)),oi((function(){0===(6&Is)&&qi()})),n=null;else{switch(_t(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xs=-1,Js=0,0!==(6&Is))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Is;Is|=2;var o=pc();for(Ns===e&&Rs===t||(zs=null,qs=Ye()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}ba(),xs.current=o,Is=i,null!==As?t=0:(Ns=null,Rs=0,t=Ds)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,Ye()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,js,zs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Vs+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,js,zs),t);break}bc(e,js,zs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,js,zs),r);break}bc(e,js,zs);break;default:throw Error(a(329))}}}return rc(e,Ye()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Zs;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=js,js=n,null!==t&&oc(t)),e}function oc(e){null===js?js=e:js.push.apply(js,e)}function uc(e,t){for(t&=~Us,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Is))throw Error(a(327));wc();var t=ht(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,js,zs),rc(e,Ye()),null}function cc(e,t){var n=Is;Is|=1;try{return e(t)}finally{0===(Is=n)&&(qs=Ye()+500,Zi&&qi())}}function lc(e){null!==Ks&&0===Ks.tag&&0===(6&Is)&&wc();var t=Is;Is|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(Is=t))&&qi()}}function fc(){Os=Ps.current,xi(Ps)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),xi(Ni),xi(Ii),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:xi(uo);break;case 10:wa(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ns=e,As=e=Pc(e.current,null),Rs=Os=t,Ds=0,Ls=null,Us=Fs=Ms=0,js=Zs=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function dc(e,t){for(;;){var n=As;try{if(ba(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,_o=0,Ts.current=null,null===n||null===n.return){Ds=1,Ls=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ds&&(Ds=2),null===Zs?Zs=[o]:Zs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(_){t=_,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=xs.current;return xs.current=ou,null===e?ou:e}function vc(){0!==Ds&&3!==Ds&&2!==Ds||(Ds=4),null===Ns||0===(268435455&Ms)&&0===(268435455&Fs)||uc(Ns,Rs)}function yc(e,t){var n=Is;Is|=2;var r=pc();for(Ns===e&&Rs===t||(zs=null,hc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(ba(),Is=n,xs.current=r,null!==As)throw Error(a(261));return Ns=null,Rs=0,Ds}function mc(){for(;null!==As;)kc(As)}function gc(){for(;null!==As&&!Qe();)kc(As)}function kc(e){var t=Es(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?_c(e):As=t,Ts.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gu(n,t,Os)))return void(As=n)}else{if(null!==(n=Ku(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Ds=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ds&&(Ds=5)}function bc(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{wc()}while(null!==Ks);if(0!==(6&Is))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gs||(Gs=!0,Nc(tt,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=Is;Is|=4,Ts.current=null,function(e,t){if(ei=Bt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Bt=!1,Xu=t;null!==Xu;)if(e=(t=Xu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xu=e;else for(;null!==Xu;){t=Xu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(a(163))}}catch(b){Sc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Xu=e;break}Xu=t.return}v=ts,ts=!1}(e,n),ys(n,e),pr(ti),Bt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),$e(),Is=s,kt=u,Cs.transition=o}else e.current=n;if(Gs&&(Gs=!1,Ks=e,Qs=i),0===(o=e.pendingLanes)&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Bs)throw Bs=!1,e=Hs,Hs=null,e;0!==(1&Qs)&&0!==e.tag&&wc(),0!==(1&(o=e.pendingLanes))?e===Ys?$s++:($s=0,Ys=e):$s=0,qi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function wc(){if(null!==Ks){var e=_t(Qs),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===Ks)var r=!1;else{if(e=Ks,Ks=null,Qs=0,0!==(6&Is))throw Error(a(331));var i=Is;for(Is|=4,Xu=e.current;null!==Xu;){var o=Xu,u=o.child;if(0!==(16&Xu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Xu=l;null!==Xu;){var f=Xu;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Xu=h;else for(;null!==Xu;){var d=(f=Xu).sibling,p=f.return;if(as(f),f===l){Xu=null;break}if(null!==d){d.return=p,Xu=d;break}Xu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Xu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Xu=u;else e:for(;null!==Xu;){if(0!==(2048&(o=Xu).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Xu=g;break e}Xu=o.return}}var k=e.current;for(Xu=k;null!==Xu;){var _=(u=Xu).child;if(0!==(2064&u.subtreeFlags)&&null!==_)_.return=u,Xu=_;else e:for(u=k;null!==Xu;){if(0!==(2048&(s=Xu).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(w){Sc(s,s.return,w)}if(s===u){Xu=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,Xu=b;break e}Xu=s.return}}if(Is=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ec(e,t,n){e=Da(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Da(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function xc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Rs&n)===n&&(4===Ds||3===Ds&&(130023424&Rs)===Rs&&500>Ye()-Vs?hc(e,0):Us|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(mt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Oc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case E:return Lc(n.children,i,o,t);case S:u=8,i|=8;break;case x:return(e=Rc(12,n,t,2|i)).elementType=x,e.lanes=o,e;case N:return(e=Rc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Rc(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case C:u=9;break e;case I:u=11;break e;case R:u=14;break e;case O:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Zc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function Vc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qc(e){if(!e)return Ci;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=qc(null),n=e.current,(a=Pa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function Bc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Es=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)_u=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _u=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Ti(uo,1&uo.current),null!==(e=Bu(e,t,n))?e.sibling:null);Ti(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,xu(e,t,n)}return Bu(e,t,n)}(e,t,n);_u=0!==(131072&e.flags)}else _u=!1,ia&&0!==(1048576&t.flags)&&Ji(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zu(e,t),e=t.pendingProps;var i=Ri(t,Ii.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=xo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=Va,t.stateNode=i,i._reactInternals=t,Ha(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===R)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Cu(null,t,r,e,n);break e;case 1:t=Iu(null,t,r,e,n);break e;case 11:t=wu(null,t,r,e,n);break e;case 14:t=Eu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Oa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ru(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Ru(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ya(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Bu(e,t,n);break e}bu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),bu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):bu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return bu(e,t,t.pendingProps,n),t.child;case 8:case 12:return bu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Bu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ea(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Ea(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}bu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=xa(i)),t.flags|=1,bu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),Eu(e,t,r,i=ya(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),zu(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,Sa(t,n),za(t,r,i),Ha(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return xu(e,t,n)}throw Error(a(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Hc(o);u.call(e)}}Bc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Hc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=s,e[pi]=s.current,qr(8===e.nodeType?e.parentNode:e),lc((function(){Bc(t,s,n,r)})),s}(n,t,e,i,r);return Hc(o)}$c.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Bc(e,t,null,null)},$c.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Bc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Ye()),0===(6&Is)&&(qs=Ye()+500,qi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},wt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},Et=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},St=function(){return kt},xt=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},we=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));G(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,_i,bi,Te,Ce,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return Vc(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},5048:function(e,t,n){"use strict";n.d(t,{zt:function(){return k},wU:function(){return C},I0:function(){return x},v9:function(){return v}});var r=n(7248),i=n(327),a=n(4164);var o=function(e){e()},u=function(){return o},s=n(2791),c=(0,s.createContext)(null);function l(){return(0,s.useContext)(c)}var f=function(){throw new Error("uSES not initialized!")},h=f,d=function(e,t){return e===t};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=e===c?l:function(){return(0,s.useContext)(e)};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;var r=t(),i=r.store,a=r.subscription,o=r.getServerState,u=h(a.addNestedSub,i.getState,o||i.getState,e,n);return(0,s.useDebugValue)(u),u}}var v=p();n(2110),n(6900);var y={notify:function(){},get:function(){return[]}};function m(e,t){var n,r=y;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=u(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=y)},getListeners:function(){return r}};return o}var g=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?s.useLayoutEffect:s.useEffect;var k=function(e){var t=e.store,n=e.context,r=e.children,i=e.serverState,a=(0,s.useMemo)((function(){var e=m(t);return{store:t,subscription:e,getServerState:i?function(){return i}:void 0}}),[t,i]),o=(0,s.useMemo)((function(){return t.getState()}),[t]);g((function(){var e=a.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[a,o]);var u=n||c;return s.createElement(u.Provider,{value:a},r)};function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=e===c?l:function(){return(0,s.useContext)(e)};return function(){return t().store}}var b=_();function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=e===c?b:_(e);return function(){return t().dispatch}}var E,S,x=w();function T(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function C(e,t){if(T(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!T(e[n[i]],t[n[i]]))return!1;return!0}E=i.useSyncExternalStoreWithSelector,h=E,function(e){e}(r.useSyncExternalStore),S=a.unstable_batchedUpdates,o=S},8459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},6900:function(e,t,n){"use strict";n(8459)},1087:function(e,t,n){"use strict";n.d(t,{OL:function(){return d},UT:function(){return f},rU:function(){return h}});var r=n(885),i=n(2791),a=n(7689),o=n(8278);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var c=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],l=["aria-current","caseSensitive","className","end","style","to","children"];function f(e){var t=e.basename,n=e.children,u=e.window,s=i.useRef();null==s.current&&(s.current=(0,o.q_)({window:u,v5Compat:!0}));var c=s.current,l=i.useState({action:c.action,location:c.location}),f=(0,r.Z)(l,2),h=f[0],d=f[1];return i.useLayoutEffect((function(){return c.listen(d)}),[c]),i.createElement(a.F0,{basename:t,children:n,location:h.location,navigationType:h.action,navigator:c})}var h=i.forwardRef((function(e,t){var n=e.onClick,r=e.relative,l=e.reloadDocument,f=e.replace,h=e.state,d=e.target,p=e.to,v=e.preventScrollReset,y=s(e,c),m=(0,a.oQ)(p,{relative:r}),g=function(e,t){var n=void 0===t?{}:t,r=n.target,u=n.replace,s=n.state,c=n.preventScrollReset,l=n.relative,f=(0,a.s0)(),h=(0,a.TH)(),d=(0,a.WU)(e,{relative:l});return i.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();var n=void 0!==u?u:(0,o.Ep)(h)===(0,o.Ep)(d);f(e,{replace:n,state:s,preventScrollReset:c,relative:l})}}),[h,f,d,u,s,r,e,c,l])}(p,{replace:f,state:h,target:d,preventScrollReset:v,relative:r});return i.createElement("a",u({},y,{href:m,onClick:l?n:function(e){n&&n(e),e.defaultPrevented||g(e)},ref:t,target:d}))}));var d=i.forwardRef((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,o=e.caseSensitive,c=void 0!==o&&o,f=e.className,d=void 0===f?"":f,p=e.end,v=void 0!==p&&p,y=e.style,m=e.to,g=e.children,k=s(e,l),_=(0,a.WU)(m,{relative:k.relative}),b=(0,a.TH)(),w=i.useContext(a.FR),E=_.pathname,S=b.pathname,x=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;c||(S=S.toLowerCase(),x=x?x.toLowerCase():null,E=E.toLowerCase());var T,C=S===E||!v&&S.startsWith(E)&&"/"===S.charAt(E.length),I=null!=x&&(x===E||!v&&x.startsWith(E)&&"/"===x.charAt(E.length)),N=C?r:void 0;T="function"===typeof d?d({isActive:C,isPending:I}):[d,C?"active":null,I?"pending":null].filter(Boolean).join(" ");var A="function"===typeof y?y({isActive:C,isPending:I}):y;return i.createElement(h,u({},k,{"aria-current":N,className:T,ref:t,style:A,to:m}),"function"===typeof g?g({isActive:C,isPending:I}):g)}));var p,v;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(p||(p={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(v||(v={}))},7689:function(e,t,n){"use strict";var r;n.d(t,{AW:function(){return B},F0:function(){return H},FR:function(){return b},Fg:function(){return q},TH:function(){return N},UO:function(){return O},WU:function(){return P},Z5:function(){return W},j3:function(){return z},oQ:function(){return C},s0:function(){return A}});var i=n(2982),a=n(5671),o=n(3144),u=n(136),s=n(7277),c=n(885),l=n(8278),f=n(2791);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}var d="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},p=f.useState,v=f.useEffect,y=f.useLayoutEffect,m=f.useDebugValue;function g(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!d(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,(r||(r=n.t(f,2))).useSyncExternalStore;var k=f.createContext(null);var _=f.createContext(null);var b=f.createContext(null);var w=f.createContext(null);var E=f.createContext(null);var S=f.createContext(null);var x=f.createContext({outlet:null,matches:[]});var T=f.createContext(null);function C(e,t){var n=(void 0===t?{}:t).relative;I()||(0,l.kG)(!1);var r=f.useContext(E),i=r.basename,a=r.navigator,o=P(e,{relative:n}),u=o.hash,s=o.pathname,c=o.search,h=s;return"/"!==i&&(h="/"===s?i:(0,l.RQ)([i,s])),a.createHref({pathname:h,search:c,hash:u})}function I(){return null!=f.useContext(S)}function N(){return I()||(0,l.kG)(!1),f.useContext(S).location}function A(){I()||(0,l.kG)(!1);var e=f.useContext(E),t=e.basename,n=e.navigator,r=f.useContext(x).matches,i=N().pathname,a=JSON.stringify((0,l.Zq)(r).map((function(e){return e.pathnameBase}))),o=f.useRef(!1);return f.useEffect((function(){o.current=!0})),f.useCallback((function(e,r){if(void 0===r&&(r={}),o.current)if("number"!==typeof e){var u=(0,l.pC)(e,JSON.parse(a),i,"path"===r.relative);"/"!==t&&(u.pathname="/"===u.pathname?t:(0,l.RQ)([t,u.pathname])),(r.replace?n.replace:n.push)(u,r.state,r)}else n.go(e)}),[t,n,a,i])}var R=f.createContext(null);function O(){var e=f.useContext(x).matches,t=e[e.length-1];return t?t.params:{}}function P(e,t){var n=(void 0===t?{}:t).relative,r=f.useContext(x).matches,i=N().pathname,a=JSON.stringify((0,l.Zq)(r).map((function(e){return e.pathnameBase})));return f.useMemo((function(){return(0,l.pC)(e,JSON.parse(a),i,"path"===n)}),[e,a,i,n])}function D(){var e=function(){var e,t=f.useContext(T),n=j(M.UseRouteError),r=f.useContext(x),i=r.matches[r.matches.length-1];if(t)return t;return r||(0,l.kG)(!1),!i.route.id&&(0,l.kG)(!1),null==(e=n.errors)?void 0:e[i.route.id]}(),t=(0,l.WK)(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unhandled Thrown Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),n?f.createElement("pre",{style:i},n):null,f.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),f.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",f.createElement("code",{style:a},"errorElement")," props on\xa0",f.createElement("code",{style:a},"<Route>")))}var L,M,F=function(e){(0,u.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return(0,o.Z)(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?f.createElement(T.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(f.Component);function U(e){var t=e.routeContext,n=e.match,r=e.children,i=f.useContext(k);return i&&n.route.errorElement&&(i._deepestRenderedBoundaryId=n.route.id),f.createElement(x.Provider,{value:t},r)}function Z(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var r=e,i=null==n?void 0:n.errors;if(null!=i){var a=r.findIndex((function(e){return e.route.id&&(null==i?void 0:i[e.route.id])}));a>=0||(0,l.kG)(!1),r=r.slice(0,Math.min(r.length,a+1))}return r.reduceRight((function(e,a,o){var u=a.route.id?null==i?void 0:i[a.route.id]:null,s=n?a.route.errorElement||f.createElement(D,null):null,c=function(){return f.createElement(U,{match:a,routeContext:{outlet:e,matches:t.concat(r.slice(0,o+1))}},u?s:void 0!==a.route.element?a.route.element:e)};return n&&(a.route.errorElement||0===o)?f.createElement(F,{location:n.location,component:s,error:u,children:c()}):c()}),null)}function j(e){var t=f.useContext(b);return t||(0,l.kG)(!1),t}!function(e){e.UseRevalidator="useRevalidator"}(L||(L={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(M||(M={}));var V;function q(e){var t=e.to,n=e.replace,r=e.state,i=e.relative;I()||(0,l.kG)(!1);var a=f.useContext(b),o=A();return f.useEffect((function(){a&&"idle"!==a.navigation.state||o(t,{replace:n,state:r,relative:i})})),null}function z(e){return function(e){var t=f.useContext(x).outlet;return t?f.createElement(R.Provider,{value:e},t):t}(e.context)}function B(e){(0,l.kG)(!1)}function H(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,i=void 0===r?null:r,a=e.location,o=e.navigationType,u=void 0===o?l.aU.Pop:o,s=e.navigator,c=e.static,h=void 0!==c&&c;I()&&(0,l.kG)(!1);var d=n.replace(/^\/*/,"/"),p=f.useMemo((function(){return{basename:d,navigator:s,static:h}}),[d,s,h]);"string"===typeof a&&(a=(0,l.cP)(a));var v=a,y=v.pathname,m=void 0===y?"/":y,g=v.search,k=void 0===g?"":g,_=v.hash,b=void 0===_?"":_,w=v.state,x=void 0===w?null:w,T=v.key,C=void 0===T?"default":T,N=f.useMemo((function(){var e=(0,l.Zn)(m,d);return null==e?null:{pathname:e,search:k,hash:b,state:x,key:C}}),[d,m,k,b,x,C]);return null==N?null:f.createElement(E.Provider,{value:p},f.createElement(S.Provider,{children:i,value:{location:N,navigationType:u}}))}function W(e){var t=e.children,n=e.location,r=f.useContext(_);return function(e,t){I()||(0,l.kG)(!1);var n,r=f.useContext(b),i=f.useContext(x).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,N());if(t){var c,d="string"===typeof t?(0,l.cP)(t):t;"/"===u||(null==(c=d.pathname)?void 0:c.startsWith(u))||(0,l.kG)(!1),n=d}else n=s;var p=n.pathname||"/",v="/"===u?p:p.slice(u.length)||"/",y=(0,l.fp)(e,{pathname:v}),m=Z(y&&y.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:(0,l.RQ)([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:(0,l.RQ)([u,e.pathnameBase])})})),i,r||void 0);return t&&m?f.createElement(S.Provider,{value:{location:h({pathname:"/",search:"",hash:"",state:null,key:"default"},n),navigationType:l.aU.Pop}},m):m}(r&&!t?r.router.routes:K(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(V||(V={}));var G=new Promise((function(){}));f.Component;function K(e,t){void 0===t&&(t=[]);var n=[];return f.Children.forEach(e,(function(e,r){if(f.isValidElement(e))if(e.type!==f.Fragment){e.type!==B&&(0,l.kG)(!1),e.props.index&&e.props.children&&(0,l.kG)(!1);var a=[].concat((0,i.Z)(t),[r]),o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=K(e.props.children,a)),n.push(o)}else n.push.apply(n,K(e.props.children,t))})),n}},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var _=k.prototype=new g;_.constructor=k,v(_,m.prototype),_.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:E.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+I(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+I(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+I(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},P={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:P,ReactCurrentOwner:E};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=E.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},3315:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=(0,i.default)(e);return{getItem:function(e){return new Promise((function(n,r){n(t.getItem(e))}))},setItem:function(e,n){return new Promise((function(r,i){r(t.setItem(e,n))}))},removeItem:function(e){return new Promise((function(n,r){n(t.removeItem(e))}))}}};var r,i=(r=n(2900))&&r.__esModule?r:{default:r}},2900:function(e,t){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(){}t.__esModule=!0,t.default=function(e){var t="".concat(e,"Storage");return function(e){if("object"!==("undefined"===typeof self?"undefined":n(self))||!(e in self))return!1;try{var t=self[e],r="redux-persist ".concat(e," test");t.setItem(r,"test"),t.getItem(r),t.removeItem(r)}catch(i){return!1}return!0}(t)?self[t]:i};var i={getItem:r,setItem:r,removeItem:r}},5752:function(e,t,n){"use strict";var r;t.Z=void 0;var i=(0,((r=n(3315))&&r.__esModule?r:{default:r}).default)("local");t.Z=i},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(y=!1,_(e),!v)if(null!==r(c))v=!0,P(w);else{var t=r(l);null!==t&&D(b,t.startTime-e)}}function w(e,n){v=!1,y&&(y=!1,g(T),T=-1),p=!0;var a=d;try{for(_(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),_(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&D(b,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,x=null,T=-1,C=5,I=-1;function N(){return!(t.unstable_now()-I<C)}function A(){if(null!==x){var e=t.unstable_now();I=e;var n=!0;try{n=x(!0,e)}finally{n?E():(S=!1,x=null)}}else S=!1}if("function"===typeof k)E=function(){k(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,O=R.port2;R.port1.onmessage=A,E=function(){O.postMessage(null)}}else E=function(){m(A,0)};function P(e){x=e,S||(S=!0,E())}function D(e,n){T=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(T),T=-1):y=!0,D(b,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,P(w))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},1561:function(e,t,n){"use strict";var r=n(2791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},7595:function(e,t,n){"use strict";var r=n(2791),i=n(7248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},7248:function(e,t,n){"use strict";e.exports=n(1561)},327:function(e,t,n){"use strict";e.exports=n(7595)},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},7326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},5671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},5647:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9611),i=n(8814);function a(e,t,n){return a=(0,i.Z)()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&(0,r.Z)(a,n.prototype),a},a.apply(null,arguments)}},3144:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return i}})},7277:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(1120),i=n(8814),a=n(1002),o=n(7326);function u(e,t){if(t&&("object"===(0,a.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,o.Z)(e)}function s(e){var t=(0,i.Z)();return function(){var n,i=(0,r.Z)(e);if(t){var a=(0,r.Z)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return u(this,n)}}},1120:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},136:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9611);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},8814:function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:function(){return r}})},9611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},885:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(181);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2982:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(907);var i=n(181);function a(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},8664:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(1120),i=n(9611);var a=n(5647);function o(e){var t="function"===typeof Map?new Map:void 0;return o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return(0,a.Z)(e,arguments,(0,r.Z)(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),(0,i.Z)(o,e)},o(e)}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+"."+{31:"6d5de617",55:"e0f40d64",262:"3140c179",478:"bc6e9028",661:"1f485871",681:"709bc618",787:"d4a11971",976:"77af38a0"}[e]+".chunk.js"},n.miniCssF=function(e){return"static/css/"+e+"."+{31:"8252c647",55:"9348106b",262:"01195c42",478:"a868afc7",661:"d23232f4",681:"30f921b3",976:"1f3040db"}[e]+".chunk.css"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="messenger2000:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/messenger/",function(){var e=function(e){return new Promise((function(t,r){var i=n.miniCssF(e),a=n.p+i;if(function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var i=(o=n[r]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(i===e||i===t))return o}var a=document.getElementsByTagName("style");for(r=0;r<a.length;r++){var o;if((i=(o=a[r]).getAttribute("data-href"))===e||i===t)return o}}(i,a))return t();!function(e,t,n,r){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=function(a){if(i.onerror=i.onload=null,"load"===a.type)n();else{var o=a&&("load"===a.type?"missing":a.type),u=a&&a.target&&a.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+u+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=o,s.request=u,i.parentNode.removeChild(i),r(s)}},i.href=t,document.head.appendChild(i)}(e,a,t,r)}))},t={179:0};n.f.miniCss=function(n,r){t[n]?r.push(t[n]):0!==t[n]&&{31:1,55:1,262:1,478:1,661:1,681:1,976:1}[n]&&r.push(t[n]=e(n).then((function(){t[n]=0}),(function(e){throw delete t[n],e})))}}(),function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkmessenger2000=self.webpackChunkmessenger2000||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e=n(2791),t=n(1250),r=n(7689),i=n(184);function a(e){var t=e.auth,n=e.children;return t?n:(0,i.jsx)(r.Fg,{to:"/login",replace:"true"})}function o(e){var t=e.auth,n=e.children;return t?(0,i.jsx)(r.Fg,{to:"/chats"}):n}var u="Home_home__v3GZo",s="Home_home__logo__h1A-6",c="Home_home__text__kHNPN",l="Home_ad__3LI+4",f="Home_link__u57L8",h=n(1087),d="HomeLogin_list__xmxz3",p="HomeLogin_listLink__m414E",v=function(){return(0,i.jsxs)("ul",{className:d,children:[(0,i.jsx)("li",{children:(0,i.jsx)(h.rU,{to:"/login",className:p,children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})}),(0,i.jsx)("li",{children:(0,i.jsx)(h.rU,{to:"/registration",className:p,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0432\u0430\u0442\u044c\u0441\u044f"})})]})};function y(e){var t=e.isAuth;return(0,i.jsxs)("div",{className:u,children:[(0,i.jsxs)("h1",{className:s,variant:"h1",children:["<","Messenger 2000","/>"]}),!t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:c,children:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!"}),(0,i.jsx)("p",{className:c,children:"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0432\u0430\u0442\u044c\u0441\u044f \u0438\u043b\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f."})]}),!t&&(0,i.jsx)(v,{}),t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:c,children:"\u0412\u044b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0435\u0441\u044c \u043d\u0430 \u0441\u0430\u0439\u0442\u0435 Messenger2000"}),(0,i.jsx)("p",{className:c,children:"\u041c\u0435\u0441\u0441\u0435\u043d\u0434\u0436\u0435\u0440 \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438 "})]}),(0,i.jsxs)("div",{class:l,children:["\u0412 \u043f\u043e\u0438\u0441\u043a\u0430\u0445 \u0434\u0438\u0437\u0430\u0439\u043d\u0435\u0440\u0430",(0,i.jsx)("p",{children:"telegram: @toron2c"}),(0,i.jsx)("a",{class:f,href:"https://t.me/toron2c",children:"\u0441\u0441\u044b\u043b\u043a\u0430"})]})]})}var m=n(5048),g=n(2470),k={app:"Menu_app__D8Nx2",menu:"Menu_menu__yXLYi",list:"Menu_list__yfMZq",active:"Menu_active__JZkGl",link:"Menu_link__vWWNv",authButton:"Menu_authButton__j556U"},_=n(8278),b=n(5122);function w(e){var t=e.isAuth,n=(0,m.I0)();return(0,i.jsx)(i.Fragment,{children:t?(0,i.jsx)("div",{children:(0,i.jsx)(h.rU,{className:k.link,onClick:function(e){e.preventDefault(),n((0,b.MQ)()),(0,_.uX)("/")},children:"\u0412\u044b\u0439\u0442\u0438"})}):(0,i.jsx)("div",{children:(0,i.jsx)(h.rU,{className:k.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})})})}function E(e){var t=e.isAuth;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("nav",{className:k.menuNavigation,children:(0,i.jsxs)("ul",{className:k.list,children:[(0,i.jsx)("li",{children:(0,i.jsx)(h.OL,{className:function(e){return e.isActive?k.active:k.link},to:"/",children:"Home"})}),t&&(0,i.jsx)("li",{children:(0,i.jsx)(h.OL,{className:function(e){return e.isActive?k.active:k.link},to:"/profile",children:"Profile"})}),t&&(0,i.jsx)("li",{children:(0,i.jsx)(h.OL,{className:function(e){return e.isActive?k.active:k.link},to:"/chats",children:"Chats"})}),(0,i.jsx)("li",{children:(0,i.jsx)(h.OL,{className:function(e){return e.isActive?k.active:k.link},to:"/characters",children:"Characters"})})]})})})}function S(){return(0,i.jsx)(r.j3,{})}function x(e){var t=e.isAuth;return(0,i.jsxs)("div",{className:k.app,children:[(0,i.jsxs)("header",{className:k.menu,children:[(0,i.jsx)(E,{isAuth:t}),(0,i.jsx)(w,{isAuth:t})]}),(0,i.jsx)("main",{className:k.main,children:(0,i.jsx)(S,{})})]})}var T=e.lazy((function(){return n.e(31).then(n.bind(n,8031))})),C=e.lazy((function(){return n.e(661).then(n.bind(n,6661))})),I=e.lazy((function(){return n.e(55).then(n.bind(n,1055))})),N=e.lazy((function(){return n.e(262).then(n.bind(n,8262))})),A=e.lazy((function(){return n.e(681).then(n.bind(n,681))})),R=e.lazy((function(){return n.e(478).then(n.bind(n,4478))})),O=e.lazy((function(){return n.e(976).then(n.bind(n,9976))}));var P=function(){var t=(0,m.v9)((0,g.F)(),(function(e,t){return e.value!==t.value})),n=window.innerWidth;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(r.Z5,{children:(0,i.jsxs)(r.AW,{element:(0,i.jsx)(x,{isAuth:t}),children:[(0,i.jsx)(r.AW,{index:!0,element:(0,i.jsx)(y,{isAuth:t})}),(0,i.jsx)(r.AW,{path:"registration",element:(0,i.jsx)(e.Suspense,{children:(0,i.jsx)(o,{auth:t,children:(0,i.jsx)(O,{})})})}),(0,i.jsx)(r.AW,{path:"login",element:(0,i.jsx)(e.Suspense,{children:(0,i.jsx)(o,{auth:t,children:(0,i.jsx)(O,{})})})}),(0,i.jsx)(r.AW,{path:"profile",element:(0,i.jsx)(e.Suspense,{children:(0,i.jsx)(a,{auth:t,children:(0,i.jsx)(A,{})})})}),n>1024?(0,i.jsx)(r.AW,{path:"chats/",element:(0,i.jsx)(e.Suspense,{children:(0,i.jsx)(a,{auth:t,children:(0,i.jsx)(C,{})})}),children:(0,i.jsx)(r.AW,{path:":id",element:(0,i.jsx)(e.Suspense,{children:(0,i.jsx)(C,{})})})}):(0,i.jsx)(r.AW,{path:"/chats",element:(0,i.jsx)(e.Suspense,{children:(0,i.jsx)(a,{auth:t,children:(0,i.jsx)(I,{})})})}),n<1024&&(0,i.jsx)(r.AW,{path:"chats/:id",element:(0,i.jsx)(e.Suspense,{children:(0,i.jsx)(a,{auth:t,children:(0,i.jsx)(N,{})})})}),(0,i.jsx)(r.AW,{path:"characters",element:(0,i.jsx)(e.Suspense,{children:(0,i.jsx)(T,{})})}),(0,i.jsx)(r.AW,{path:"*",element:(0,i.jsx)(e.Suspense,{children:(0,i.jsx)(R,{})})})]})})})},D=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Z="function"===typeof Symbol&&Symbol.observable||"@@observable",j=function(){return Math.random().toString(36).substring(7).split("").join(".")},V={INIT:"@@redux/INIT"+j(),REPLACE:"@@redux/REPLACE"+j(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+j()}};function q(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function z(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(U(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(U(1));return n(z)(e,t)}if("function"!==typeof e)throw new Error(U(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(U(3));return a}function f(e){if("function"!==typeof e)throw new Error(U(4));if(s)throw new Error(U(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(U(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!q(e))throw new Error(U(7));if("undefined"===typeof e.type)throw new Error(U(8));if(s)throw new Error(U(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!==typeof e)throw new Error(U(10));i=e,h({type:V.REPLACE})}function p(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(U(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[Z]=function(){return this},e}return h({type:V.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:d})[Z]=p,r}function B(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var H=n(3605),W={email:"",name:"",uid:"",avatar:"",infoUser:{status:"",about:""},isEditProfile:!1,error:{isError:!1,msg:""}},G=n(2982),K={toggleNewChat:!1,nameNewChat:"",chatList:[],subscribeActived:!1,error:{isError:!1,msg:""}},Q={textNewMessage:"",messageList:{}},$={info:{prev:"",next:""},list:[],err:{errMessage:null,errPage:null}},Y={email:"",pass:"",isAuth:!1,error:{isError:!1,message:""}},X=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:V.INIT}))throw new Error(U(12));if("undefined"===typeof n(void 0,{type:V.PROBE_UNKNOWN_ACTION()}))throw new Error(U(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(U(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H.eh:return F(F({},e),{},{email:t.value});case H.cg:return F(F({},e),{},{pass:t.value});case H.G5:return F(F({},e),{},{isAuth:t.status});case H.nv:return F(F({},e),{},{error:{isError:t.payload.status,message:t.payload.message}});case H.qh:return{email:"",pass:"",isAuth:e.isAuth,error:{isError:!1,message:""}};case H.H7:return F(F({},e),{},{isAuth:!1});case H.Ub:return{email:"",pass:"",isAuth:!1,error:{isError:!1,message:""}};default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H.lk:return F(F({},e),t.payload);case H.xv:return F(F({},e),{},{isEditProfile:!e.isEditProfile,error:{isError:!1,msg:""}});case H.CI:return F(F({},e),{},{name:t.value});case H.FL:return F(F({},e),{},{infoUser:F(F({},e.infoUser),{},{status:t.value})});case H.d:return F(F({},e),{},{infoUser:F(F({},e.infoUser),{},{about:t.value})});case H.nn:return F(F({},e),{},{avatar:t.src});case H.pr:return F(F({},e),{},{isEditProfile:!1,error:{isError:!0,msg:t.msg}});case H.Ub:return{email:"",name:"",uid:"",avatar:"",infoUser:{status:"",about:""},isEditProfile:!1,error:{isError:!1,msg:""}};default:return e}},chats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H.xl:return F(F({},e),{},{toggleNewChat:!e.toggleNewChat,error:{isError:!1,msg:""}});case H.V$:return F(F({},e),{},{nameNewChat:t.text});case H.ZS:return F(F({},e),{},{chatList:(0,G.Z)(t.payload)});case H.z:return F(F({},e),{},{subscribeActived:!0});case H.X5:return F(F({},e),{},{subscribeActived:!1});case H.N3:if(e.chatList.find((function(e){return e.chatId===t.payload.chatId})))return e;var n=F(F({},t.payload),{},{linkToDialog:e.chatList.length>0?e.chatList[e.chatList.length-1].linkToDialog+1:0});return F(F({},e),{},{toggleNewChat:!1,chatList:[].concat((0,G.Z)(e.chatList),[n])});case H.$N:return F(F({},e),{},{error:{isError:!0,msg:t.msg}});case H.Ub:return{toggleNewChat:!1,nameNewChat:"",chatList:[],subscribeActived:!1,error:{isError:!1,msg:""}};default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H.HR:return F(F({},e),{},{textNewMessage:t.text});case H.ww:return F(F({},e),{},{textNewMessage:""});case H.wo:var n,r;if(null!==(n=e.messageList[t.uid])&&void 0!==n&&null!==(r=n.messages)&&void 0!==r&&r.length)return e;var i={link:t.link,avatar:t.img,page:t.pageMessage,messages:t.messages,subscribe:!1};return F(F({},e),{},{messageList:F(F({},e.messageList),{},L({},t.uid,i))});case H.yX:var a=e.messageList[t.uid].messages;return t.messages.forEach((function(e){var t=a.findIndex((function(t){return t.idMessage===e.idMessage}));-1===t&&a.push(e)})),a.length===e.messageList[t.uid].messages.length?e:(a.sort((function(e,t){return e.TimestampServer.getTime()-t.TimestampServer.getTime()})),F(F({},e),{},{messageList:F(F({},e.messageList),{},L({},t.uid,F(F({},e.messageList[t.uid]),{},{messages:(0,G.Z)(a)})))}));case H.E5:var o=e.messageList[t.uid].messages;return o.unshift.apply(o,(0,G.Z)(t.messages)),F(F({},e),{},{messageList:F(F({},e.messageList),{},L({},t.uid,F(F({},e.messageList[t.uid]),{},{page:e.messageList[t.uid].page+1,messages:(0,G.Z)(o)})))});case H.nF:return F(F({},e),{},{messageList:F(F({},e.messageList),{},L({},t.uid,F(F({},e.messageList[t.uid]),{},{subscribe:!0})))});case H.Am:return F(F({},e),{},{messageList:F(F({},e.messageList),{},L({},t.uid,F(F({},e.messageList[t.uid]),{},{subscribe:!1})))});case H.DF:if(e.messageList[t.uid].messages.find((function(e){return e.idMessage===t.message.idMessage})))return e;var u=e.messageList[t.uid].messages;return u.push(t.message),F(F({},e),{},{messageList:F(F({},e.messageList),{},L({},t.uid,F(F({},e.messageList[t.uid]),{},{messages:(0,G.Z)(u)})))});case H.Ub:return{textNewMessage:"",messageList:{}};default:return e}},characters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H.At:return F(F({},t.payload),{},{err:{errMessage:null,errPage:null}});case H.Go:return F(F({},e),{},{list:[],err:{errMessage:t.payload.message,errPage:t.payload.page}});default:return e}}}),J=function(e){return"@@redux-saga/"+e},ee=J("CANCEL_PROMISE"),te=J("CHANNEL_END"),ne=J("IO"),re=J("MATCH"),ie=J("MULTICAST"),ae=J("SAGA_ACTION"),oe=J("SELF_CANCELLATION"),ue=J("TASK"),se=J("TASK_CANCEL"),ce=J("TERMINATE"),le=J("LOCATION");function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fe.apply(this,arguments)}var he=function(e){return null===e||void 0===e},de=function(e){return null!==e&&void 0!==e},pe=function(e){return"function"===typeof e},ve=function(e){return"string"===typeof e},ye=Array.isArray,me=function(e){return e&&pe(e.then)},ge=function(e){return e&&pe(e.next)&&pe(e.throw)},ke=function e(t){return t&&(ve(t)||we(t)||pe(t)||ye(t)&&t.every(e))},_e=function(e){return e&&pe(e.take)&&pe(e.close)},be=function(e){return pe(e)&&e.hasOwnProperty("toString")},we=function(e){return Boolean(e)&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype};var Ee=function(e,t){var n;void 0===t&&(t=!0);var r=new Promise((function(r){n=setTimeout(r,Math.min(2147483647,e),t)}));return r[ee]=function(){clearTimeout(n)},r},Se=function(e){return function(){return e}},xe=Se(!0),Te=function(){};var Ce=function(e){return e};"function"===typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var Ie=function(e,t){fe(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(n){e[n]=t[n]}))};function Ne(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function Ae(e){var t=!1;return function(){t||(t=!0,e())}}var Re=function(e){throw e},Oe=function(e){return{value:e,done:!0}};function Pe(e,t,n){void 0===t&&(t=Re),void 0===n&&(n="iterator");var r={meta:{name:n},next:e,throw:t,return:Oe,isSagaIterator:!0};return"undefined"!==typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function De(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var Le=function(e){return Array.apply(null,new Array(e))},Me=function(e){return function(t){return e(Object.defineProperty(t,ae,{value:!0}))}},Fe=function(e){return e===ce},Ue=function(e){return e===se},Ze=function(e){return Fe(e)||Ue(e)};function je(e,t){var n=Object.keys(e),r=n.length;var i,a=0,o=ye(e)?Le(r):{},u={};return n.forEach((function(e){var n=function(n,u){i||(u||Ze(n)?(t.cancel(),t(n,u)):(o[e]=n,++a===r&&(i=!0,t(o))))};n.cancel=Te,u[e]=n})),t.cancel=function(){i||(i=!0,n.forEach((function(e){return u[e].cancel()})))},u}function Ve(e){return{name:e.name||"anonymous",location:qe(e)}}function qe(e){return e[le]}var ze={isEmpty:xe,put:Te,take:Te};function Be(e,t){void 0===e&&(e=10);var n=new Array(e),r=0,i=0,a=0,o=function(t){n[i]=t,i=(i+1)%e,r++},u=function(){if(0!=r){var t=n[a];return n[a]=null,r--,a=(a+1)%e,t}},s=function(){for(var e=[];r;)e.push(u());return e};return{isEmpty:function(){return 0==r},put:function(u){var c;if(r<e)o(u);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:n[i]=u,a=i=(i+1)%e;break;case 4:c=2*e,n=s(),r=n.length,i=n.length,a=0,n.length=c,e=c,o(u)}},take:u,flush:s}}var He=function(){return ze},We=function(e){return Be(e,4)},Ge="TAKE",Ke="PUT",Qe="ALL",$e="CALL",Ye="FORK",Xe="CANCEL",Je="SELECT",et=function(e,t){var n;return(n={})[ne]=!0,n.combinator=!1,n.type=e,n.payload=t,n};function tt(e,t){return void 0===e&&(e="*"),ke(e)?(de(t)&&console.warn("take(pattern) takes one argument but two were provided. Consider passing an array for listening to several action types"),et(Ge,{pattern:e})):function(e){return _e(e)&&e[ie]}(e)&&de(t)&&ke(t)?et(Ge,{channel:e,pattern:t}):_e(e)?(de(t)&&console.warn("take(channel) takes one argument but two were provided. Second argument is ignored."),et(Ge,{channel:e})):void 0}function nt(e,t){return he(t)&&(t=e,e=void 0),et(Ke,{channel:e,action:t})}function rt(e){var t=et(Qe,e);return t.combinator=!0,t}function it(e,t){var n,r=null;return pe(e)?n=e:(ye(e)?(r=e[0],n=e[1]):(r=e.context,n=e.fn),r&&ve(n)&&pe(r[n])&&(n=r[n])),{context:r,fn:n,args:t}}function at(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return et($e,it(e,n))}function ot(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return et(Ye,it(e,n))}function ut(e){return void 0===e&&(e=oe),et(Xe,e)}function st(e){void 0===e&&(e=Ce);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return et(Je,{selector:e,args:n})}var ct=at.bind(null,Ee);function lt(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}var ft=lt,ht=[],dt=0;function pt(e){try{mt(),e()}finally{gt()}}function vt(e){ht.push(e),dt||(mt(),kt())}function yt(e){try{return mt(),e()}finally{kt()}}function mt(){dt++}function gt(){dt--}function kt(){var e;for(gt();!dt&&void 0!==(e=ht.shift());)pt(e)}var _t=function(e){return function(t){return e.some((function(e){return xt(e)(t)}))}},bt=function(e){return function(t){return e(t)}},wt=function(e){return function(t){return t.type===String(e)}},Et=function(e){return function(t){return t.type===e}},St=function(){return xe};function xt(e){var t="*"===e?St:ve(e)?wt:ye(e)?_t:be(e)?wt:pe(e)?bt:we(e)?Et:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var Tt={type:te},Ct=function(e){return e&&e.type===te};function It(e){void 0===e&&(e=We());var t=!1,n=[];return{take:function(r){t&&e.isEmpty()?r(Tt):e.isEmpty()?(n.push(r),r.cancel=function(){Ne(n,r)}):r(e.take())},put:function(r){if(!t){if(0===n.length)return e.put(r);n.shift()(r)}},flush:function(n){t&&e.isEmpty()?n(Tt):n(e.flush())},close:function(){if(!t){t=!0;var e=n;n=[];for(var r=0,i=e.length;r<i;r++){(0,e[r])(Tt)}}}}}function Nt(e,t){void 0===t&&(t=He());var n,r=!1,i=It(t),a=function(){r||(r=!0,pe(n)&&n(),i.close())};return n=Ae(n=e((function(e){Ct(e)?a():i.put(e)}))),r&&n(),{take:i.take,flush:i.flush,close:a}}function At(){var e=function(){var e,t=!1,n=[],r=n,i=function(){r===n&&(r=n.slice())},a=function(){t=!0;var e=n=r;r=[],e.forEach((function(e){e(Tt)}))};return(e={})[ie]=!0,e.put=function(e){if(!t)if(Ct(e))a();else for(var i=n=r,o=0,u=i.length;o<u;o++){var s=i[o];s[re](e)&&(s.cancel(),s(e))}},e.take=function(e,n){void 0===n&&(n=St),t?e(Tt):(e[re]=n,i(),r.push(e),e.cancel=Ae((function(){i(),Ne(r,e)})))},e.close=a,e}(),t=e.put;return e.put=function(e){e[ae]?t(e):vt((function(){t(e)}))},e}function Rt(e,t){var n=e[ee];pe(n)&&(t.cancel=n),e.then(t,(function(e){t(e,!0)}))}var Ot,Pt=0,Dt=function(){return++Pt};function Lt(e){e.isRunning()&&e.cancel()}var Mt=((Ot={}).TAKE=function(e,t,n){var r=t.channel,i=void 0===r?e.channel:r,a=t.pattern,o=t.maybe,u=function(e){e instanceof Error?n(e,!0):!Ct(e)||o?n(e):n(ce)};try{i.take(u,de(a)?xt(a):null)}catch(s){return void n(s,!0)}n.cancel=u.cancel},Ot.PUT=function(e,t,n){var r=t.channel,i=t.action,a=t.resolve;vt((function(){var t;try{t=(r?r.put:e.dispatch)(i)}catch(If){return void n(If,!0)}a&&me(t)?Rt(t,n):n(t)}))},Ot.ALL=function(e,t,n,r){var i=r.digestEffect,a=Pt,o=Object.keys(t);if(0!==o.length){var u=je(t,n);o.forEach((function(e){i(t[e],a,u[e],e)}))}else n(ye(t)?[]:{})},Ot.RACE=function(e,t,n,r){var i=r.digestEffect,a=Pt,o=Object.keys(t),u=ye(t)?Le(o.length):{},s={},c=!1;o.forEach((function(e){var t=function(t,r){c||(r||Ze(t)?(n.cancel(),n(t,r)):(n.cancel(),c=!0,u[e]=t,n(u)))};t.cancel=Te,s[e]=t})),n.cancel=function(){c||(c=!0,o.forEach((function(e){return s[e].cancel()})))},o.forEach((function(e){c||i(t[e],a,s[e],e)}))},Ot.CALL=function(e,t,n,r){var i=t.context,a=t.fn,o=t.args,u=r.task;try{var s=a.apply(i,o);if(me(s))return void Rt(s,n);if(ge(s))return void Wt(e,s,u.context,Pt,Ve(a),!1,n);n(s)}catch(If){n(If,!0)}},Ot.CPS=function(e,t,n){var r=t.context,i=t.fn,a=t.args;try{var o=function(e,t){he(e)?n(t):n(e,!0)};i.apply(r,a.concat(o)),o.cancel&&(n.cancel=o.cancel)}catch(If){n(If,!0)}},Ot.FORK=function(e,t,n,r){var i=t.context,a=t.fn,o=t.args,u=t.detached,s=r.task,c=function(e){var t=e.context,n=e.fn,r=e.args;try{var i=n.apply(t,r);if(ge(i))return i;var a=!1;return Pe((function(e){return a?{value:e,done:!0}:(a=!0,{value:i,done:!me(i)})}))}catch(o){return Pe((function(){throw o}))}}({context:i,fn:a,args:o}),l=function(e,t){return e.isSagaIterator?{name:e.meta.name}:Ve(t)}(c,a);yt((function(){var t=Wt(e,c,s.context,Pt,l,u,void 0);u?n(t):t.isRunning()?(s.queue.addTask(t),n(t)):t.isAborted()?s.queue.abort(t.error()):n(t)}))},Ot.JOIN=function(e,t,n,r){var i=r.task,a=function(e,t){if(e.isRunning()){var n={task:i,cb:t};t.cancel=function(){e.isRunning()&&Ne(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())};if(ye(t)){if(0===t.length)return void n([]);var o=je(t,n);t.forEach((function(e,t){a(e,o[t])}))}else a(t,n)},Ot.CANCEL=function(e,t,n,r){var i=r.task;t===oe?Lt(i):ye(t)?t.forEach(Lt):Lt(t),n()},Ot.SELECT=function(e,t,n){var r=t.selector,i=t.args;try{n(r.apply(void 0,[e.getState()].concat(i)))}catch(If){n(If,!0)}},Ot.ACTION_CHANNEL=function(e,t,n){var r=t.pattern,i=It(t.buffer),a=xt(r),o=function t(n){Ct(n)||e.channel.take(t,a),i.put(n)},u=i.close;i.close=function(){o.cancel(),u()},e.channel.take(o,a),n(i)},Ot.CANCELLED=function(e,t,n,r){n(r.task.isCancelled())},Ot.FLUSH=function(e,t,n){t.flush(n)},Ot.GET_CONTEXT=function(e,t,n,r){n(r.task.context[t])},Ot.SET_CONTEXT=function(e,t,n,r){var i=r.task;Ie(i.context,t),n()},Ot);function Ft(e,t){return e+"?"+t}function Ut(e){var t=e.name,n=e.location;return n?t+"  "+Ft(n.fileName,n.lineNumber):t}function Zt(e){var t=function(e,t){var n;return(n=[]).concat.apply(n,t.map(e))}((function(e){return e.cancelledTasks}),e);return t.length?["Tasks cancelled due to error:"].concat(t).join("\n"):""}var jt=null,Vt=[],qt=function(e){e.crashedEffect=jt,Vt.push(e)},zt=function(){jt=null,Vt.length=0},Bt=function(){var e=Vt[0],t=Vt.slice(1),n=e.crashedEffect?function(e){var t=qe(e);return t?t.code+"  "+Ft(t.fileName,t.lineNumber):""}(e.crashedEffect):null;return["The above error occurred in task "+Ut(e.meta)+(n?" \n when executing effect "+n:"")].concat(t.map((function(e){return"    created by "+Ut(e.meta)})),[Zt(Vt)]).join("\n")};function Ht(e,t,n,r,i,a,o){var u;void 0===o&&(o=Te);var s,c,l=0,f=null,h=[],d=Object.create(n),p=function(e,t,n){var r,i=[],a=!1;function o(e){t(),s(),n(e,!0)}function u(t){i.push(t),t.cont=function(u,s){a||(Ne(i,t),t.cont=Te,s?o(u):(t===e&&(r=u),i.length||(a=!0,n(r))))}}function s(){a||(a=!0,i.forEach((function(e){e.cont=Te,e.cancel()})),i=[])}return u(e),{addTask:u,cancelAll:s,abort:o,getTasks:function(){return i}}}(t,(function(){h.push.apply(h,p.getTasks().map((function(e){return e.meta.name})))}),v);function v(t,n){if(n){if(l=2,qt({meta:i,cancelledTasks:h}),y.isRoot){var r=Bt();zt(),e.onError(t,{sagaStack:r})}c=t,f&&f.reject(t)}else t===se?l=1:1!==l&&(l=3),s=t,f&&f.resolve(t);y.cont(t,n),y.joiners.forEach((function(e){e.cb(t,n)})),y.joiners=null}var y=((u={})[ue]=!0,u.id=r,u.meta=i,u.isRoot=a,u.context=d,u.joiners=[],u.queue=p,u.cancel=function(){0===l&&(l=1,p.cancelAll(),v(se,!1))},u.cont=o,u.end=v,u.setContext=function(e){Ie(d,e)},u.toPromise=function(){return f||(f=ft(),2===l?f.reject(c):0!==l&&f.resolve(s)),f.promise},u.isRunning=function(){return 0===l},u.isCancelled=function(){return 1===l||0===l&&1===t.status},u.isAborted=function(){return 2===l},u.result=function(){return s},u.error=function(){return c},u);return y}function Wt(e,t,n,r,i,a,o){var u=e.finalizeRunEffect((function(t,n,r){if(me(t))Rt(t,r);else if(ge(t))Wt(e,t,c.context,n,i,!1,r);else if(t&&t[ne]){(0,Mt[t.type])(e,t.payload,r,l)}else r(t)}));f.cancel=Te;var s={meta:i,cancel:function(){0===s.status&&(s.status=1,f(se))},status:0},c=Ht(e,s,n,r,i,a,o),l={task:c,digestEffect:h};return o&&(o.cancel=c.cancel),f(),c;function f(e,n){try{var i;n?(i=t.throw(e),zt()):Ue(e)?(s.status=1,f.cancel(),i=pe(t.return)?t.return(se):{done:!0,value:se}):i=Fe(e)?pe(t.return)?t.return():{done:!0}:t.next(e),i.done?(1!==s.status&&(s.status=3),s.cont(i.value)):h(i.value,r,f)}catch(If){if(1===s.status)throw If;s.status=2,s.cont(If,!0)}}function h(t,n,r,i){void 0===i&&(i="");var a,o=Dt();function s(n,i){a||(a=!0,r.cancel=Te,e.sagaMonitor&&(i?e.sagaMonitor.effectRejected(o,n):e.sagaMonitor.effectResolved(o,n)),i&&function(e){jt=e}(t),r(n,i))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:o,parentEffectId:n,label:i,effect:t}),s.cancel=Te,r.cancel=function(){a||(a=!0,s.cancel(),s.cancel=Te,e.sagaMonitor&&e.sagaMonitor.effectCancelled(o))},u(t,o,s)}}function Gt(e,t){var n=e.channel,r=void 0===n?At():n,i=e.dispatch,a=e.getState,o=e.context,u=void 0===o?{}:o,s=e.sagaMonitor,c=e.effectMiddlewares,l=e.onError,f=void 0===l?De:l;for(var h=arguments.length,d=new Array(h>2?h-2:0),p=2;p<h;p++)d[p-2]=arguments[p];var v=t.apply(void 0,d);var y,m=Dt();if(s&&(s.rootSagaStarted=s.rootSagaStarted||Te,s.effectTriggered=s.effectTriggered||Te,s.effectResolved=s.effectResolved||Te,s.effectRejected=s.effectRejected||Te,s.effectCancelled=s.effectCancelled||Te,s.actionDispatched=s.actionDispatched||Te,s.rootSagaStarted({effectId:m,saga:t,args:d})),c){var g=B.apply(void 0,c);y=function(e){return function(t,n,r){return g((function(t){return e(t,n,r)}))(t)}}}else y=Ce;var k={channel:r,dispatch:Me(i),getState:a,sagaMonitor:s,onError:f,finalizeRunEffect:y};return yt((function(){var e=Wt(k,v,u,m,Ve(t),!0,void 0);return s&&s.effectResolved(m,e),e}))}var Kt=function(e){var t,n=void 0===e?{}:e,r=n.context,i=void 0===r?{}:r,a=n.channel,o=void 0===a?At():a,u=n.sagaMonitor,s=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,["context","channel","sagaMonitor"]);function c(e){var n=e.getState,r=e.dispatch;return t=Gt.bind(null,fe({},s,{context:i,channel:o,dispatch:r,getState:n,sagaMonitor:u})),function(e){return function(t){u&&u.actionDispatched&&u.actionDispatched(t);var n=e(t);return o.put(t),n}}}return c.run=function(){return t.apply(void 0,arguments)},c.setContext=function(e){Ie(i,e)},c},Qt=n(5752),$t="persist:",Yt="persist/FLUSH",Xt="persist/REHYDRATE",Jt="persist/PAUSE",en="persist/PERSIST",tn="persist/PURGE",nn="persist/REGISTER";function rn(e){return rn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(e)}function an(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function on(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function un(e,t,n,r){r.debug;var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?an(n,!0).forEach((function(t){on(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):an(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);return e&&"object"===rn(e)&&Object.keys(e).forEach((function(r){"_persist"!==r&&t[r]===n[r]&&(i[r]=e[r])})),i}function sn(e){var t,n=e.blacklist||null,r=e.whitelist||null,i=e.transforms||[],a=e.throttle||0,o="".concat(void 0!==e.keyPrefix?e.keyPrefix:$t).concat(e.key),u=e.storage;t=!1===e.serialize?function(e){return e}:"function"===typeof e.serialize?e.serialize:cn;var s=e.writeFailHandler||null,c={},l={},f=[],h=null,d=null;function p(){if(0===f.length)return h&&clearInterval(h),void(h=null);var e=f.shift(),n=i.reduce((function(t,n){return n.in(t,e,c)}),c[e]);if(void 0!==n)try{l[e]=t(n)}catch(r){console.error("redux-persist/createPersistoid: error serializing state",r)}else delete l[e];0===f.length&&(Object.keys(l).forEach((function(e){void 0===c[e]&&delete l[e]})),d=u.setItem(o,t(l)).catch(y))}function v(e){return(!r||-1!==r.indexOf(e)||"_persist"===e)&&(!n||-1===n.indexOf(e))}function y(e){s&&s(e)}return{update:function(e){Object.keys(e).forEach((function(t){v(t)&&c[t]!==e[t]&&-1===f.indexOf(t)&&f.push(t)})),Object.keys(c).forEach((function(t){void 0===e[t]&&v(t)&&-1===f.indexOf(t)&&void 0!==c[t]&&f.push(t)})),null===h&&(h=setInterval(p,a)),c=e},flush:function(){for(;0!==f.length;)p();return d||Promise.resolve()}}}function cn(e){return JSON.stringify(e)}function ln(e){var t,n=e.transforms||[],r="".concat(void 0!==e.keyPrefix?e.keyPrefix:$t).concat(e.key),i=e.storage;e.debug;return t=!1===e.deserialize?function(e){return e}:"function"===typeof e.deserialize?e.deserialize:fn,i.getItem(r).then((function(e){if(e)try{var r={},i=t(e);return Object.keys(i).forEach((function(e){r[e]=n.reduceRight((function(t,n){return n.out(t,e,i)}),t(i[e]))})),r}catch(a){throw a}}))}function fn(e){return JSON.parse(e)}function hn(e){0}function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(n,!0).forEach((function(t){vn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yn(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function mn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gn(n,!0).forEach((function(t){_n(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bn={registry:[],bootstrapped:!1},wn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case nn:return kn({},e,{registry:[].concat(mn(e.registry),[t.key])});case Xt:var n=e.registry.indexOf(t.key),r=mn(e.registry);return r.splice(n,1),kn({},e,{registry:r,bootstrapped:0===r.length});default:return e}};var En=function(e,t){var n=void 0!==e.version?e.version:-1,r=(e.debug,void 0===e.stateReconciler?un:e.stateReconciler),i=e.getStoredState||ln,a=void 0!==e.timeout?e.timeout:5e3,o=null,u=!1,s=!0,c=function(e){return e._persist.rehydrated&&o&&!s&&o.update(e),e};return function(l,f){var h=l||{},d=h._persist,p=yn(h,["_persist"]);if(f.type===en){var v=!1,y=function(t,n){v||(f.rehydrate(e.key,t,n),v=!0)};if(a&&setTimeout((function(){!v&&y(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))}),a),s=!1,o||(o=sn(e)),d)return pn({},t(p,f),{_persist:d});if("function"!==typeof f.rehydrate||"function"!==typeof f.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return f.register(e.key),i(e).then((function(t){(e.migrate||function(e,t){return Promise.resolve(e)})(t,n).then((function(e){y(e)}),(function(e){y(void 0,e)}))}),(function(e){y(void 0,e)})),pn({},t(p,f),{_persist:{version:n,rehydrated:!1}})}if(f.type===tn)return u=!0,f.result(function(e){var t=e.storage,n="".concat(void 0!==e.keyPrefix?e.keyPrefix:$t).concat(e.key);return t.removeItem(n,hn)}(e)),pn({},t(p,f),{_persist:d});if(f.type===Yt)return f.result(o&&o.flush()),pn({},t(p,f),{_persist:d});if(f.type===Jt)s=!0;else if(f.type===Xt){if(u)return pn({},p,{_persist:pn({},d,{rehydrated:!0})});if(f.key===e.key){var m=t(p,f),g=f.payload,k=pn({},!1!==r&&void 0!==g?r(g,l,m,e):m,{_persist:pn({},d,{rehydrated:!0})});return c(k)}}if(!d)return t(l,f);var _=t(p,f);return _===p?l:c(pn({},_,{_persist:d}))}}({key:"root",storage:Qt.Z},X),Sn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||B,xn=Kt(),Tn=z(En,Sn(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(U(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=B.apply(void 0,a)(n.dispatch),F(F({},n),{},{dispatch:r})}}}(xn))),Cn=function(e,t,n){var r=n||!1,i=z(wn,bn,t&&t.enhancer?t.enhancer:void 0),a=function(e){i.dispatch({type:nn,key:e})},o=function(t,n,a){var o={type:Xt,payload:n,err:a,key:t};e.dispatch(o),i.dispatch(o),r&&u.getState().bootstrapped&&(r(),r=!1)},u=kn({},i,{purge:function(){var t=[];return e.dispatch({type:tn,result:function(e){t.push(e)}}),Promise.all(t)},flush:function(){var t=[];return e.dispatch({type:Yt,result:function(e){t.push(e)}}),Promise.all(t)},pause:function(){e.dispatch({type:Jt})},persist:function(){e.dispatch({type:en,register:a,rehydrate:o})}});return t&&t.manualPersist||u.persist(),u}(Tn);function In(e){return In="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In(e)}function Nn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function An(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rn(e,t){return!t||"object"!==In(t)&&"function"!==typeof t?Pn(e):t}function On(e){return On=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},On(e)}function Pn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dn(e,t){return Dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Dn(e,t)}function Ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mn=function(e){function t(){var e,n;Nn(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Ln(Pn(n=Rn(this,(e=On(t)).call.apply(e,[this].concat(i)))),"state",{bootstrapped:!1}),Ln(Pn(n),"_unsubscribe",void 0),Ln(Pn(n),"handlePersistorState",(function(){n.props.persistor.getState().bootstrapped&&(n.props.onBeforeLift?Promise.resolve(n.props.onBeforeLift()).finally((function(){return n.setState({bootstrapped:!0})})):n.setState({bootstrapped:!0}),n._unsubscribe&&n._unsubscribe())})),n}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dn(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return"function"===typeof this.props.children?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}])&&An(n.prototype,r),i&&An(n,i),t}(e.PureComponent);Ln(Mn,"defaultProps",{children:null,loading:null});var Fn=n(1002);function Un(){Un=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new x(i||[]);return r(o,"_invoke",{value:b(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,a,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(T([])));m&&m!==t&&n.call(m,a)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==(0,Fn.Z)(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function b(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=w(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},k(_.prototype),s(_.prototype,o,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(g),s(g,u,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var Zn=function(e){return{done:!0,value:e}},jn={};function Vn(e){return _e(e)?"channel":be(e)?String(e):pe(e)?e.name:String(e)}function qn(e,t,n){var r,i,a,o=t;function u(t,n){if(o===jn)return Zn(t);if(n&&!i)throw o=jn,n;r&&r(t);var u=n?e[i](n):e[o]();return o=u.nextState,a=u.effect,r=u.stateUpdater,i=u.errorState,o===jn?Zn(t):a}return Pe(u,(function(e){return u(null,e)}),n)}function zn(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,o={done:!1,value:tt(e)},u=function(e){return{done:!1,value:ot.apply(void 0,[t].concat(r,[e]))}},s=function(e){return a=e};return qn({q1:function(){return{nextState:"q2",effect:o,stateUpdater:s}},q2:function(){return{nextState:"q1",effect:u(a)}}},"q1","takeEvery("+Vn(e)+", "+t.name+")")}function Bn(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,o,u={done:!1,value:tt(e)},s=function(e){return{done:!1,value:ot.apply(void 0,[t].concat(r,[e]))}},c=function(e){return{done:!1,value:ut(e)}},l=function(e){return a=e},f=function(e){return o=e};return qn({q1:function(){return{nextState:"q2",effect:u,stateUpdater:f}},q2:function(){return a?{nextState:"q3",effect:c(a)}:{nextState:"q1",effect:s(o),stateUpdater:l}},q3:function(){return{nextState:"q1",effect:s(o),stateUpdater:l}}},"q1","takeLatest("+Vn(e)+", "+t.name+")")}function Hn(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return ot.apply(void 0,[zn,e,t].concat(r))}function Wn(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return ot.apply(void 0,[Bn,e,t].concat(r))}function Gn(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(If){return void n(If)}u.done?t(s):Promise.resolve(s).then(r,i)}function Kn(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Gn(a,r,i,o,u,"next",e)}function u(e){Gn(a,r,i,o,u,"throw",e)}o(void 0)}))}}function Qn(e,t){return function(){return e.apply(t,arguments)}}var $n,Yn=Object.prototype.toString,Xn=Object.getPrototypeOf,Jn=($n=Object.create(null),function(e){var t=Yn.call(e);return $n[t]||($n[t]=t.slice(8,-1).toLowerCase())}),er=function(e){return e=e.toLowerCase(),function(t){return Jn(t)===e}},tr=function(e){return function(t){return typeof t===e}},nr=Array.isArray,rr=tr("undefined");var ir=er("ArrayBuffer");var ar=tr("string"),or=tr("function"),ur=tr("number"),sr=function(e){return null!==e&&"object"===typeof e},cr=function(e){if("object"!==Jn(e))return!1;var t=Xn(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},lr=er("Date"),fr=er("File"),hr=er("Blob"),dr=er("FileList"),pr=er("URLSearchParams");function vr(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.allOwnKeys,o=void 0!==a&&a;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),nr(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var u,s=o?Object.getOwnPropertyNames(e):Object.keys(e),c=s.length;for(n=0;n<c;n++)u=s[n],t.call(null,e[u],u,e)}}function yr(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var mr="undefined"===typeof self?"undefined"===typeof global?void 0:global:self,gr=function(e){return!rr(e)&&e!==mr};var kr,_r=(kr="undefined"!==typeof Uint8Array&&Xn(Uint8Array),function(e){return kr&&e instanceof kr}),br=er("HTMLFormElement"),wr=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),Er=er("RegExp"),Sr=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};vr(n,(function(n,i){!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},xr={isArray:nr,isArrayBuffer:ir,isBuffer:function(e){return null!==e&&!rr(e)&&null!==e.constructor&&!rr(e.constructor)&&or(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||Yn.call(e)===t||or(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ir(e.buffer)},isString:ar,isNumber:ur,isBoolean:function(e){return!0===e||!1===e},isObject:sr,isPlainObject:cr,isUndefined:rr,isDate:lr,isFile:fr,isBlob:hr,isRegExp:Er,isFunction:or,isStream:function(e){return sr(e)&&or(e.pipe)},isURLSearchParams:pr,isTypedArray:_r,isFileList:dr,forEach:vr,merge:function e(){for(var t=gr(this)&&this||{},n=t.caseless,r={},i=function(t,i){var a=n&&yr(r,i)||i;cr(r[a])&&cr(t)?r[a]=e(r[a],t):cr(t)?r[a]=e({},t):nr(t)?r[a]=t.slice():r[a]=t},a=0,o=arguments.length;a<o;a++)arguments[a]&&vr(arguments[a],i);return r},extend:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.allOwnKeys;return vr(t,(function(t,r){n&&or(t)?e[r]=Qn(t,n):e[r]=t}),{allOwnKeys:i}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,u={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||u[o]||(t[o]=e[o],u[o]=!0);e=!1!==n&&Xn(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Jn,kindOfTest:er,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(nr(e))return e;var t=e.length;if(!ur(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:br,hasOwnProperty:wr,hasOwnProp:wr,reduceDescriptors:Sr,freezeMethods:function(e){Sr(e,(function(t,n){if(or(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];or(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return nr(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:yr,global:mr,isContextDefined:gr,toJSONObject:function(e){var t=new Array(10);return function e(n,r){if(sr(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var i=nr(n)?[]:{};return vr(n,(function(t,n){var a=e(t,r+1);!rr(a)&&(i[n]=a)})),t[r]=void 0,i}}return n}(e,0)}},Tr=n(5671),Cr=n(3144);function Ir(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}xr.inherits(Ir,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xr.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Nr=Ir.prototype,Ar={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){Ar[e]={value:e}})),Object.defineProperties(Ir,Ar),Object.defineProperty(Nr,"isAxiosError",{value:!0}),Ir.from=function(e,t,n,r,i,a){var o=Object.create(Nr);return xr.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),Ir.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var Rr=Ir,Or=n(7472);function Pr(e){return xr.isPlainObject(e)||xr.isArray(e)}function Dr(e){return xr.endsWith(e,"[]")?e.slice(0,-2):e}function Lr(e,t,n){return e?e.concat(t).map((function(e,t){return e=Dr(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var Mr=xr.toFlatObject(xr,{},null,(function(e){return/^is[A-Z]/.test(e)}));var Fr=function(e,t,n){if(!xr.isObject(e))throw new TypeError("target must be an object");t=t||new(Or||FormData);var r,i=(n=xr.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!xr.isUndefined(t[e])}))).metaTokens,a=n.visitor||l,o=n.dots,u=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&((r=t)&&xr.isFunction(r.append)&&"FormData"===r[Symbol.toStringTag]&&r[Symbol.iterator]);if(!xr.isFunction(a))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(xr.isDate(e))return e.toISOString();if(!s&&xr.isBlob(e))throw new Rr("Blob is not supported. Use a Buffer instead.");return xr.isArrayBuffer(e)||xr.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,r){var a=e;if(e&&!r&&"object"===typeof e)if(xr.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(xr.isArray(e)&&function(e){return xr.isArray(e)&&!e.some(Pr)}(e)||xr.isFileList(e)||xr.endsWith(n,"[]")&&(a=xr.toArray(e)))return n=Dr(n),a.forEach((function(e,r){!xr.isUndefined(e)&&null!==e&&t.append(!0===u?Lr([n],r,o):null===u?n:n+"[]",c(e))})),!1;return!!Pr(e)||(t.append(Lr(r,n,o),c(e)),!1)}var f=[],h=Object.assign(Mr,{defaultVisitor:l,convertValue:c,isVisitable:Pr});if(!xr.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!xr.isUndefined(n)){if(-1!==f.indexOf(n))throw Error("Circular reference detected in "+r.join("."));f.push(n),xr.forEach(n,(function(n,i){!0===(!(xr.isUndefined(n)||null===n)&&a.call(t,n,xr.isString(i)?i.trim():i,r,h))&&e(n,r?r.concat(i):[i])})),f.pop()}}(e),t};function Ur(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Zr(e,t){this._pairs=[],e&&Fr(e,this,t)}var jr=Zr.prototype;jr.append=function(e,t){this._pairs.push([e,t])},jr.toString=function(e){var t=e?function(t){return e.call(this,t,Ur)}:Ur;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var Vr=Zr;function qr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zr(e,t,n){if(!t)return e;var r,i=n&&n.encode||qr,a=n&&n.serialize;if(r=a?a(t,n):xr.isURLSearchParams(t)?t.toString():new Vr(t,n).toString(i)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var Br=function(){function e(){(0,Tr.Z)(this,e),this.handlers=[]}return(0,Cr.Z)(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){xr.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),Hr=Br,Wr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Gr="undefined"!==typeof URLSearchParams?URLSearchParams:Vr,Kr=FormData,Qr=function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),$r={isBrowser:!0,classes:{URLSearchParams:Gr,FormData:Kr,Blob:Blob},isStandardBrowserEnv:Qr,protocols:["http","https","file","blob","url","data"]};var Yr=function(e){function t(e,n,r,i){var a=e[i++],o=Number.isFinite(+a),u=i>=e.length;return a=!a&&xr.isArray(r)?r.length:a,u?(xr.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&xr.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&xr.isArray(r[a])&&(r[a]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a])),!o)}if(xr.isFormData(e)&&xr.isFunction(e.entries)){var n={};return xr.forEachEntry(e,(function(e,r){t(function(e){return xr.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null},Xr={"Content-Type":void 0};var Jr={transitional:Wr,adapter:["xhr","http"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=xr.isObject(e);if(a&&xr.isHTMLForm(e)&&(e=new FormData(e)),xr.isFormData(e))return i&&i?JSON.stringify(Yr(e)):e;if(xr.isArrayBuffer(e)||xr.isBuffer(e)||xr.isStream(e)||xr.isFile(e)||xr.isBlob(e))return e;if(xr.isArrayBufferView(e))return e.buffer;if(xr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Fr(e,new $r.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return $r.isNode&&xr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=xr.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return Fr(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(xr.isString(e))try{return(t||JSON.parse)(e),xr.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Jr.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&xr.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(i){if("SyntaxError"===a.name)throw Rr.from(a,Rr.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$r.classes.FormData,Blob:$r.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};xr.forEach(["delete","get","head"],(function(e){Jr.headers[e]={}})),xr.forEach(["post","put","patch"],(function(e){Jr.headers[e]=xr.merge(Xr)}));var ei=Jr,ti=n(885),ni=xr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ri=Symbol("internals");function ii(e){return e&&String(e).trim().toLowerCase()}function ai(e){return!1===e||null==e?e:xr.isArray(e)?e.map(ai):String(e)}function oi(e,t,n,r){return xr.isFunction(r)?r.call(this,t,n):xr.isString(t)?xr.isString(r)?-1!==t.indexOf(r):xr.isRegExp(r)?r.test(t):void 0:void 0}var ui=function(e,t){function n(e){(0,Tr.Z)(this,n),e&&this.set(e)}return(0,Cr.Z)(n,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=ii(t);if(!i)throw new Error("header name must be a non-empty string");var a=xr.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=ai(e))}var a=function(e,t){return xr.forEach(e,(function(e,n){return i(e,n,t)}))};return xr.isPlainObject(e)||e instanceof this.constructor?a(e,t):xr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z]+$/.test(e.trim())?a(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&ni[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e),t):null!=e&&i(t,e,n),this}},{key:"get",value:function(e,t){if(e=ii(e)){var n=xr.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(xr.isFunction(t))return t.call(this,r,n);if(xr.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=ii(e)){var n=xr.findKey(this,e);return!(!n||t&&!oi(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=ii(e)){var i=xr.findKey(n,e);!i||t&&!oi(0,n[i],i,t)||(delete n[i],r=!0)}}return xr.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(){return Object.keys(this).forEach(this.delete.bind(this))}},{key:"normalize",value:function(e){var t=this,n={};return xr.forEach(this,(function(r,i){var a=xr.findKey(n,i);if(a)return t[a]=ai(r),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=ai(r),n[o]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return xr.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&xr.isArray(n)?n.join(", "):n)})),t}},{key:e,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=(0,ti.Z)(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:t,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[ri]=this[ri]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=ii(e);t[r]||(!function(e,t){var n=xr.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return xr.isArray(e)?e.forEach(r):r(e),this}}]),n}(Symbol.iterator,Symbol.toStringTag);ui.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]),xr.freezeMethods(ui.prototype),xr.freezeMethods(ui);var si=ui;function ci(e,t){var n=this||ei,r=t||n,i=si.from(r.headers),a=r.data;return xr.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function li(e){return!(!e||!e.__CANCEL__)}function fi(e,t,n){Rr.call(this,null==e?"canceled":e,Rr.ERR_CANCELED,t,n),this.name="CanceledError"}xr.inherits(fi,Rr,{__CANCEL__:!0});var hi=fi;var di=$r.isStandardBrowserEnv?{write:function(e,t,n,r,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),xr.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),xr.isString(r)&&o.push("path="+r),xr.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function pi(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var vi=$r.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=xr.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};var yi=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(u){var s=Date.now(),c=i[o];n||(n=s),r[a]=u,i[a]=s;for(var l=o,f=0;l!==a;)f+=r[l++],l%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(s-n<t)){var h=c&&s-c;return h?Math.round(1e3*f/h):void 0}}};function mi(e,t){var n=0,r=yi(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,u=a-n,s=r(u);n=a;var c={loaded:a,total:o,progress:o?a/o:void 0,bytes:u,rate:s||void 0,estimated:s&&o&&a<=o?(o-a)/s:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}var gi="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i=e.data,a=si.from(e.headers).normalize(),o=e.responseType;function u(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}xr.isFormData(i)&&$r.isStandardBrowserEnv&&a.setContentType(!1);var s=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(c+":"+l))}var f=pi(e.baseURL,e.url);function h(){if(s){var r=si.from("getAllResponseHeaders"in s&&s.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Rr("Request failed with status code "+n.status,[Rr.ERR_BAD_REQUEST,Rr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),u()}),(function(e){n(e),u()}),{data:o&&"text"!==o&&"json"!==o?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:r,config:e,request:s}),s=null}}if(s.open(e.method.toUpperCase(),zr(f,e.params,e.paramsSerializer),!0),s.timeout=e.timeout,"onloadend"in s?s.onloadend=h:s.onreadystatechange=function(){s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))&&setTimeout(h)},s.onabort=function(){s&&(n(new Rr("Request aborted",Rr.ECONNABORTED,e,s)),s=null)},s.onerror=function(){n(new Rr("Network Error",Rr.ERR_NETWORK,e,s)),s=null},s.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||Wr;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Rr(t,r.clarifyTimeoutError?Rr.ETIMEDOUT:Rr.ECONNABORTED,e,s)),s=null},$r.isStandardBrowserEnv){var d=(e.withCredentials||vi(f))&&e.xsrfCookieName&&di.read(e.xsrfCookieName);d&&a.set(e.xsrfHeaderName,d)}void 0===i&&a.setContentType(null),"setRequestHeader"in s&&xr.forEach(a.toJSON(),(function(e,t){s.setRequestHeader(t,e)})),xr.isUndefined(e.withCredentials)||(s.withCredentials=!!e.withCredentials),o&&"json"!==o&&(s.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&s.addEventListener("progress",mi(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",mi(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){s&&(n(!t||t.type?new hi(null,e,s):t),s.abort(),s=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(f);p&&-1===$r.protocols.indexOf(p)?n(new Rr("Unsupported protocol "+p+":",Rr.ERR_BAD_REQUEST,e)):s.send(i||null)}))},ki={http:null,xhr:gi};xr.forEach(ki,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));var _i=function(e){for(var t,n,r=(e=xr.isArray(e)?e:[e]).length,i=0;i<r&&(t=e[i],!(n=xr.isString(t)?ki[t.toLowerCase()]:t));i++);if(!n){if(!1===n)throw new Rr("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(xr.hasOwnProp(ki,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!xr.isFunction(n))throw new TypeError("adapter is not a function");return n};function bi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new hi}function wi(e){return bi(e),e.headers=si.from(e.headers),e.data=ci.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),_i(e.adapter||ei.adapter)(e).then((function(t){return bi(e),t.data=ci.call(e,e.transformResponse,t),t.headers=si.from(t.headers),t}),(function(t){return li(t)||(bi(e),t&&t.response&&(t.response.data=ci.call(e,e.transformResponse,t.response),t.response.headers=si.from(t.response.headers))),Promise.reject(t)}))}var Ei=function(e){return e instanceof si?e.toJSON():e};function Si(e,t){t=t||{};var n={};function r(e,t,n){return xr.isPlainObject(e)&&xr.isPlainObject(t)?xr.merge.call({caseless:n},e,t):xr.isPlainObject(t)?xr.merge({},t):xr.isArray(t)?t.slice():t}function i(e,t,n){return xr.isUndefined(t)?xr.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function a(e,t){if(!xr.isUndefined(t))return r(void 0,t)}function o(e,t){return xr.isUndefined(t)?xr.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function u(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}var s={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:function(e,t){return i(Ei(e),Ei(t),!0)}};return xr.forEach(Object.keys(e).concat(Object.keys(t)),(function(r){var a=s[r]||i,o=a(e[r],t[r],r);xr.isUndefined(o)&&a!==u||(n[r]=o)})),n}var xi="1.2.0",Ti={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){Ti[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var Ci={};Ti.transitional=function(e,t,n){function r(e,t){return"[Axios v1.2.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new Rr(r(i," has been removed"+(t?" in "+t:"")),Rr.ERR_DEPRECATED);return t&&!Ci[i]&&(Ci[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var Ii={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Rr("options must be an object",Rr.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var u=e[a],s=void 0===u||o(u,a,e);if(!0!==s)throw new Rr("option "+a+" must be "+s,Rr.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Rr("Unknown option "+a,Rr.ERR_BAD_OPTION)}},validators:Ti},Ni=Ii.validators,Ai=function(){function e(t){(0,Tr.Z)(this,e),this.defaults=t,this.interceptors={request:new Hr,response:new Hr}}return(0,Cr.Z)(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n,r=t=Si(this.defaults,t),i=r.transitional,a=r.paramsSerializer,o=r.headers;void 0!==i&&Ii.assertOptions(i,{silentJSONParsing:Ni.transitional(Ni.boolean),forcedJSONParsing:Ni.transitional(Ni.boolean),clarifyTimeoutError:Ni.transitional(Ni.boolean)},!1),void 0!==a&&Ii.assertOptions(a,{encode:Ni.function,serialize:Ni.function},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase(),(n=o&&xr.merge(o.common,o[t.method]))&&xr.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete o[e]})),t.headers=si.concat(n,o);var u=[],s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,u.unshift(e.fulfilled,e.rejected))}));var c,l=[];this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));var f,h=0;if(!s){var d=[wi.bind(this),void 0];for(d.unshift.apply(d,u),d.push.apply(d,l),f=d.length,c=Promise.resolve(t);h<f;)c=c.then(d[h++],d[h++]);return c}f=u.length;var p=t;for(h=0;h<f;){var v=u[h++],y=u[h++];try{p=v(p)}catch(If){y.call(this,If);break}}try{c=wi.call(this,p)}catch(If){return Promise.reject(If)}for(h=0,f=l.length;h<f;)c=c.then(l[h++],l[h++]);return c}},{key:"getUri",value:function(e){return zr(pi((e=Si(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();xr.forEach(["delete","get","head","options"],(function(e){Ai.prototype[e]=function(t,n){return this.request(Si(n||{},{method:e,url:t,data:(n||{}).data}))}})),xr.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Si(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Ai.prototype[e]=t(),Ai.prototype[e+"Form"]=t(!0)}));var Ri=Ai,Oi=function(){function e(t){if((0,Tr.Z)(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new hi(e,t,i),n(r.reason))}))}return(0,Cr.Z)(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t;return{token:new e((function(e){t=e})),cancel:t}}}]),e}(),Pi=Oi;var Di=function e(t){var n=new Ri(t),r=Qn(Ri.prototype.request,n);return xr.extend(r,Ri.prototype,n,{allOwnKeys:!0}),xr.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Si(t,n))},r}(ei);Di.Axios=Ri,Di.CanceledError=hi,Di.CancelToken=Pi,Di.isCancel=li,Di.VERSION=xi,Di.toFormData=Fr,Di.AxiosError=Rr,Di.Cancel=Di.CanceledError,Di.all=function(e){return Promise.all(e)},Di.spread=function(e){return function(t){return e.apply(null,t)}},Di.isAxiosError=function(e){return xr.isObject(e)&&!0===e.isAxiosError},Di.AxiosHeaders=si,Di.formToJSON=function(e){return Yr(xr.isHTMLForm(e)?new FormData(e):e)},Di.default=Di;var Li=Di.create({baseURL:"https://rickandmortyapi.com/api"}),Mi=function(){var e=Kn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Li.get("/character?page=".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fi=Un().mark(Zi);function Ui(e){var t=e.page;return Un().mark((function e(){var n,r,i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at(Mi,t);case 3:return n=e.sent,r=n.data,i=r.info.next?r.info.next.substring(r.info.next.search(/=/)+1):null,a=r.info.prev?r.info.prev.substring(r.info.next.search(/=/)+1):null,r={info:{prev:a,next:i},list:r.results.map((function(e){return{name:e.name,image:e.image,id:e.id}}))},e.next=10,nt((0,b.Dv)(r));case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),e.next=16,nt((0,b.sT)(e.t0.message,t));case 16:case"end":return e.stop()}}),e,null,[[0,12]])}))()}function Zi(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(H.bD,Ui);case 2:case"end":return e.stop()}}),Fi)}var ji=n(1120);function Vi(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,ji.Z)(e)););return e}function qi(){return qi="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Vi(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},qi.apply(this,arguments)}var zi=n(7326),Bi=n(136),Hi=n(7277),Wi=n(181);function Gi(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,Wi.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}var Ki=n(8664),Qi=!1,$i=!1,Yi="${JSCORE_VERSION}",Xi=function(e,t){if(!e)throw Ji(t)},Ji=function(e){return new Error("Firebase Database ("+Yi+") INTERNAL ASSERT FAILED: "+e)},ea=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ta={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ea(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},na=function(e){var t=ea(e);return ta.encodeByteArray(t,!0)},ra=function(e){return na(e).replace(/\./g,"")},ia=function(e){try{return ta.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function aa(e){return oa(void 0,e)}function oa(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=oa(e[n],t[n]));return e}function ua(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function sa(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ua())}function ca(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function la(){return!0===Qi||!0===$i}var fa=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},ha=function(){try{return fa()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/messenger",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&ia(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},da=function(e){var t,n;return null===(n=null===(t=ha())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},pa=function(e){var t=da(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},va=function(){var e;return null===(e=ha())||void 0===e?void 0:e.config},ya=function(e){var t;return null===(t=ha())||void 0===t?void 0:t["_".concat(e)]},ma=function(){function e(){var t=this;(0,Tr.Z)(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return(0,Cr.Z)(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ga(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ra(JSON.stringify({alg:"none",type:"JWT"})),ra(JSON.stringify(a)),""].join(".")}var ka=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r,i){var a;return(0,Tr.Z)(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf((0,zi.Z)(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace((0,zi.Z)(a),_a.prototype.create),a}return(0,Cr.Z)(n)}((0,Ki.Z)(Error)),_a=function(){function e(t,n,r){(0,Tr.Z)(this,e),this.service=t,this.serviceName=n,this.errors=r}return(0,Cr.Z)(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?ba(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new ka(n,a,t);return o}}]),e}();function ba(e,t){return e.replace(wa,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var wa=/\{\$([^}]+)}/g;function Ea(e){return JSON.parse(e)}function Sa(e){return JSON.stringify(e)}var xa=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Ea(ia(a[0])||""),n=Ea(ia(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Ta(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ca(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Ia(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Na(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Aa(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Ra(u)&&Ra(s)){if(!Aa(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Ra(e){return null!==e&&"object"===typeof e}function Oa(e){for(var t=[],n=function(){var e=(0,ti.Z)(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Pa(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=(0,ti.Z)(n,2),i=r[0],a=r[1];t[decodeURIComponent(i)]=decodeURIComponent(a)}})),t}function Da(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var La=function(){function e(){(0,Tr.Z)(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return(0,Cr.Z)(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=h^l&(f^h),s=1518500249):(u=l^f^h,s=1859775393):p<60?(u=l&f|h&(l|f),s=2400959708):(u=l^f^h,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();var Ma=function(){function e(t,n){var r=this;(0,Tr.Z)(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return(0,Cr.Z)(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Gi(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Fa),void 0===r.error&&(r.error=Fa),void 0===r.complete&&(r.complete=Fa);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Fa(){}function Ua(e,t){return"".concat(e," failed: ").concat(t," argument ")}var Za=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function ja(e){return e&&e._delegate?e._delegate:e}var Va=function(){function e(t,n,r){(0,Tr.Z)(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return(0,Cr.Z)(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),qa="[DEFAULT]",za=function(){function e(t,n){(0,Tr.Z)(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return(0,Cr.Z)(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ma;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:qa})}catch(s){}var t,n=Gi(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=(0,ti.Z)(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Kn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat((0,G.Z)(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),(0,G.Z)(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Gi(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=(0,ti.Z)(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Gi(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(iI){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===qa?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(iI){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa;return this.component?this.component.multipleInstances?e:qa:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ba,Ha,Wa=function(){function e(t){(0,Tr.Z)(this,e),this.name=t,this.providers=new Map}return(0,Cr.Z)(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new za(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ga=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ha||(Ha={}));var Ka={debug:Ha.DEBUG,verbose:Ha.VERBOSE,info:Ha.INFO,warn:Ha.WARN,error:Ha.ERROR,silent:Ha.SILENT},Qa=Ha.INFO,$a=(L(Ba={},Ha.DEBUG,"log"),L(Ba,Ha.VERBOSE,"log"),L(Ba,Ha.INFO,"info"),L(Ba,Ha.WARN,"warn"),L(Ba,Ha.ERROR,"error"),Ba),Ya=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=$a[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Xa=function(){function e(t){(0,Tr.Z)(this,e),this.name=t,this._logLevel=Qa,this._logHandler=Ya,this._userLogHandler=null,Ga.push(this)}return(0,Cr.Z)(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ha))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ka[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ha.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ha.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ha.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ha.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ha.INFO].concat(t)),this._logHandler.apply(this,[this,Ha.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ha.WARN].concat(t)),this._logHandler.apply(this,[this,Ha.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ha.ERROR].concat(t)),this._logHandler.apply(this,[this,Ha.ERROR].concat(t))}}]),e}();var Ja,eo;var to=new WeakMap,no=new WeakMap,ro=new WeakMap,io=new WeakMap,ao=new WeakMap;var oo={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return no.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ro.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return co(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function uo(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(eo||(eo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(lo(this),n),co(to.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return co(e.apply(lo(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[lo(this),t].concat(r));return ro.set(a,t.sort?t.sort():[t]),co(a)}}function so(e){return"function"===typeof e?uo(e):(e instanceof IDBTransaction&&function(e){if(!no.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));no.set(e,t)}}(e),function(e,t){return t.some((function(t){return e instanceof t}))}(e,Ja||(Ja=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,oo):e)}function co(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(co(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&to.set(t,e)})).catch((function(){})),ao.set(t,e),t}(e);if(io.has(e))return io.get(e);var t=so(e);return t!==e&&(io.set(e,t),ao.set(t,e)),t}var lo=function(e){return ao.get(e)};var fo,ho,po=["get","getKey","getAll","getAllKeys","count"],vo=["put","add","delete","clear"],yo=new Map;function mo(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(yo.get(t))return yo.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=vo.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||po.includes(n))){var a=function(){var e=Kn(Un().mark((function e(t){var a,o,u,s,c,l,f=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return yo.set(t,a),a}}}oo=function(e){return F(F({},e),{},{get:function(t,n,r){return mo(t,n)||e.get(t,n,r)},has:function(t,n){return!!mo(t,n)||e.has(t,n)}})}(oo);var go=function(){function e(t){(0,Tr.Z)(this,e),this.container=t}return(0,Cr.Z)(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var ko="@firebase/app",_o="0.8.4",bo=new Xa("@firebase/app"),wo="[DEFAULT]",Eo=(L(fo={},ko,"fire-core"),L(fo,"@firebase/app-compat","fire-core-compat"),L(fo,"@firebase/analytics","fire-analytics"),L(fo,"@firebase/analytics-compat","fire-analytics-compat"),L(fo,"@firebase/app-check","fire-app-check"),L(fo,"@firebase/app-check-compat","fire-app-check-compat"),L(fo,"@firebase/auth","fire-auth"),L(fo,"@firebase/auth-compat","fire-auth-compat"),L(fo,"@firebase/database","fire-rtdb"),L(fo,"@firebase/database-compat","fire-rtdb-compat"),L(fo,"@firebase/functions","fire-fn"),L(fo,"@firebase/functions-compat","fire-fn-compat"),L(fo,"@firebase/installations","fire-iid"),L(fo,"@firebase/installations-compat","fire-iid-compat"),L(fo,"@firebase/messaging","fire-fcm"),L(fo,"@firebase/messaging-compat","fire-fcm-compat"),L(fo,"@firebase/performance","fire-perf"),L(fo,"@firebase/performance-compat","fire-perf-compat"),L(fo,"@firebase/remote-config","fire-rc"),L(fo,"@firebase/remote-config-compat","fire-rc-compat"),L(fo,"@firebase/storage","fire-gcs"),L(fo,"@firebase/storage-compat","fire-gcs-compat"),L(fo,"@firebase/firestore","fire-fst"),L(fo,"@firebase/firestore-compat","fire-fst-compat"),L(fo,"fire-js","fire-js"),L(fo,"firebase","fire-js-all"),fo),So=new Map,xo=new Map;function To(e,t){try{e.container.addComponent(t)}catch(n){bo.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Co(e){var t=e.name;if(xo.has(t))return bo.debug("There were multiple attempts to register component ".concat(t,".")),!1;xo.set(t,e);var n,r=Gi(So.values());try{for(r.s();!(n=r.n()).done;){To(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Io(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var No=(L(ho={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),L(ho,"bad-app-name","Illegal App name: '{$appName}"),L(ho,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),L(ho,"app-deleted","Firebase App named '{$appName}' already deleted"),L(ho,"no-options","Need to provide options, when not being deployed to hosting via source."),L(ho,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),L(ho,"invalid-log-argument","First argument to `onLog` must be null or a function."),L(ho,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),L(ho,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),L(ho,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),L(ho,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),ho),Ao=new _a("app","Firebase",No),Ro=function(){function e(t,n,r){var i=this;(0,Tr.Z)(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Va("app",(function(){return i}),"PUBLIC"))}return(0,Cr.Z)(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ao.create("app-deleted",{appName:this._name})}}]),e}(),Oo="9.14.0";function Po(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:wo,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw Ao.create("bad-app-name",{appName:String(a)});if(n||(n=va()),!n)throw Ao.create("no-options");var o=So.get(a);if(o){if(Aa(n,o.options)&&Aa(i,o.config))return o;throw Ao.create("duplicate-app",{appName:a})}var u,s=new Wa(a),c=Gi(xo.values());try{for(c.s();!(u=c.n()).done;){var l=u.value;s.addComponent(l)}}catch(h){c.e(h)}finally{c.f()}var f=new Ro(n,i,s);return So.set(a,f),f}function Do(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wo,t=So.get(e);if(!t&&e===wo)return Po();if(!t)throw Ao.create("no-app",{appName:e});return t}function Lo(e,t,n){var r,i=null!==(r=Eo[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void bo.warn(u.join(" "))}Co(new Va("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var Mo="firebase-heartbeat-store",Fo=null;function Uo(){return Fo||(Fo=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=co(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(co(u.result),e.oldVersion,e.newVersion,co(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Mo)}}).catch((function(e){throw Ao.create("idb-open",{originalErrorMessage:e.message})}))),Fo}function Zo(e){return jo.apply(this,arguments)}function jo(){return jo=Kn(Un().mark((function e(t){var n,r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Uo();case 3:return r=e.sent,e.abrupt("return",r.transaction(Mo).objectStore(Mo).get(zo(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof ka?bo.warn(e.t0.message):(i=Ao.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),bo.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),jo.apply(this,arguments)}function Vo(e,t){return qo.apply(this,arguments)}function qo(){return qo=Kn(Un().mark((function e(t,n){var r,i,a,o,u;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Uo();case 3:return i=e.sent,a=i.transaction(Mo,"readwrite"),o=a.objectStore(Mo),e.next=8,o.put(n,zo(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof ka?bo.warn(e.t0.message):(u=Ao.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),bo.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),qo.apply(this,arguments)}function zo(e){return"".concat(e.name,"!").concat(e.options.appId)}var Bo=function(){function e(t){var n=this;(0,Tr.Z)(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Ko(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return(0,Cr.Z)(e,[{key:"triggerHeartbeat",value:function(){var e=Kn(Un().mark((function e(){var t,n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Ho(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Kn(Un().mark((function e(){var t,n,r,i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Ho(),n=Wo(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=ra(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ho(){return(new Date).toISOString().substring(0,10)}function Wo(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Gi(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Qo(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Qo(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Go,Ko=function(){function e(t){(0,Tr.Z)(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return(0,Cr.Z)(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Kn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"===typeof indexedDB){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(If){t(If)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Kn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Zo(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Kn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Vo(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Kn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Vo(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat((0,G.Z)(r.heartbeats),(0,G.Z)(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Qo(e){return ra(JSON.stringify({version:2,heartbeats:e})).length}Go="",Co(new Va("platform-logger",(function(e){return new go(e)}),"PRIVATE")),Co(new Va("heartbeat",(function(e){return new Bo(e)}),"PRIVATE")),Lo(ko,_o,Go),Lo(ko,_o,"esm2017"),Lo("fire-js","");function $o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Yo;Object.create;function Xo(){return L({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Jo=Xo,eu=new _a("auth","Firebase",Xo()),tu=new Xa("@firebase/auth");function nu(e){if(tu.logLevel<=Ha.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];tu.error.apply(tu,["Auth (".concat(Oo,"): ").concat(e)].concat(n))}}function ru(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ou.apply(void 0,[e].concat(n))}function iu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ou.apply(void 0,[e].concat(n))}function au(e,t,n){var r=Object.assign(Object.assign({},Jo()),L({},t,n));return new _a("auth","Firebase",r).create(t,{appName:e.name})}function ou(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=(0,G.Z)(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat((0,G.Z)(o)))}return eu.create.apply(eu,[e].concat(n))}function uu(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ou.apply(void 0,[t].concat(r))}}function su(e){var t="INTERNAL ASSERTION FAILED: "+e;throw nu(t),new Error(t)}function cu(e,t){e||su(t)}var lu=new Map;function fu(e){cu(e instanceof Function,"Expected a class definition");var t=lu.get(e);return t?(cu(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,lu.set(e,t),t)}function hu(e,t){var n=Io(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(Aa(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;ru(r,"already-initialized")}return n.initialize({options:t})}function du(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function pu(){return"http:"===vu()||"https:"===vu()}function vu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function yu(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(pu()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var mu=function(){function e(t,n){(0,Tr.Z)(this,e),this.shortDelay=t,this.longDelay=n,cu(n>t,"Short delay should be less than long delay!"),this.isMobile=sa()||ca()}return(0,Cr.Z)(e,[{key:"get",value:function(){return yu()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function gu(e,t){cu(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var ku=function(){function e(){(0,Tr.Z)(this,e)}return(0,Cr.Z)(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void su("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void su("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void su("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),_u=(L(Yo={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),L(Yo,"MISSING_CUSTOM_TOKEN","internal-error"),L(Yo,"INVALID_IDENTIFIER","invalid-email"),L(Yo,"MISSING_CONTINUE_URI","internal-error"),L(Yo,"INVALID_PASSWORD","wrong-password"),L(Yo,"MISSING_PASSWORD","internal-error"),L(Yo,"EMAIL_EXISTS","email-already-in-use"),L(Yo,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),L(Yo,"INVALID_IDP_RESPONSE","invalid-credential"),L(Yo,"INVALID_PENDING_TOKEN","invalid-credential"),L(Yo,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),L(Yo,"MISSING_REQ_TYPE","internal-error"),L(Yo,"EMAIL_NOT_FOUND","user-not-found"),L(Yo,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),L(Yo,"EXPIRED_OOB_CODE","expired-action-code"),L(Yo,"INVALID_OOB_CODE","invalid-action-code"),L(Yo,"MISSING_OOB_CODE","internal-error"),L(Yo,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),L(Yo,"INVALID_ID_TOKEN","invalid-user-token"),L(Yo,"TOKEN_EXPIRED","user-token-expired"),L(Yo,"USER_NOT_FOUND","user-token-expired"),L(Yo,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),L(Yo,"INVALID_CODE","invalid-verification-code"),L(Yo,"INVALID_SESSION_INFO","invalid-verification-id"),L(Yo,"INVALID_TEMPORARY_PROOF","invalid-credential"),L(Yo,"MISSING_SESSION_INFO","missing-verification-id"),L(Yo,"SESSION_EXPIRED","code-expired"),L(Yo,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),L(Yo,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),L(Yo,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),L(Yo,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),L(Yo,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),L(Yo,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),L(Yo,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),L(Yo,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),L(Yo,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),L(Yo,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),L(Yo,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Yo),bu=new mu(3e4,6e4);function wu(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Eu(e,t,n,r){return Su.apply(this,arguments)}function Su(){return Su=Kn(Un().mark((function e(t,n,r,i){var a,o=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",xu(t,a,Kn(Un().mark((function e(){var a,o,u,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Oa(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",ku.fetch()(Nu(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Su.apply(this,arguments)}function xu(e,t,n){return Tu.apply(this,arguments)}function Tu(){return Tu=Kn(Un().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},_u),n),e.prev=2,a=new Au(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Ru(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=(0,ti.Z)(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Ru(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw Ru(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw Ru(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw au(t,d,h);case 34:ru(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof ka)){e.next=41;break}throw e.t0;case 41:ru(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Tu.apply(this,arguments)}function Cu(e,t,n,r){return Iu.apply(this,arguments)}function Iu(){return Iu=Kn(Un().mark((function e(t,n,r,i){var a,o,u=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Eu(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&ru(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Iu.apply(this,arguments)}function Nu(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?gu(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Au=function(){function e(t){var n=this;(0,Tr.Z)(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(iu(n.auth,"network-request-failed"))}),bu.get())}))}return(0,Cr.Z)(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Ru(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=iu(e,t,r);return i.customData._tokenResponse=n,i}function Ou(e,t){return Pu.apply(this,arguments)}function Pu(){return Pu=Kn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eu(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Pu.apply(this,arguments)}function Du(e,t){return Lu.apply(this,arguments)}function Lu(){return Lu=Kn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eu(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Lu.apply(this,arguments)}function Mu(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Fu(){return Fu=Kn(Un().mark((function e(t){var n,r,i,a,o,u,s=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=ja(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,uu((a=Zu(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Mu(Uu(a.auth_time)),issuedAtTime:Mu(Uu(a.iat)),expirationTime:Mu(Uu(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Fu.apply(this,arguments)}function Uu(e){return 1e3*Number(e)}function Zu(e){var t,n=e.split("."),r=(0,ti.Z)(n,3),i=r[0],a=r[1],o=r[2];if(void 0===i||void 0===a||void 0===o)return nu("JWT malformed, contained fewer than 3 sections"),null;try{var u=ia(a);return u?JSON.parse(u):(nu("Failed to decode base64 JWT payload"),null)}catch(s){return nu("Caught error parsing JWT payload as JSON",null===(t=s)||void 0===t?void 0:t.toString()),null}}function ju(e,t){return Vu.apply(this,arguments)}function Vu(){return Vu=Kn(Un().mark((function e(t,n){var r=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof ka&&qu(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Vu.apply(this,arguments)}function qu(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var zu=function(){function e(t){(0,Tr.Z)(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return(0,Cr.Z)(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Kn(Un().mark((function t(){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Kn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Bu=function(){function e(t,n){(0,Tr.Z)(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return(0,Cr.Z)(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Mu(this.lastLoginAt),this.creationTime=Mu(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Hu(e){return Wu.apply(this,arguments)}function Wu(){return Wu=Kn(Un().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ju(t,Du(r,{idToken:i}));case 6:uu(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Qu(o.providerUserInfo):[],s=Ku(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Bu(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Wu.apply(this,arguments)}function Gu(){return(Gu=Kn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ja(t),e.next=3,Hu(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ku(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat((0,G.Z)(n),(0,G.Z)(t))}function Qu(e){return e.map((function(e){var t=e.providerId,n=$o(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function $u(e,t){return Yu.apply(this,arguments)}function Yu(){return Yu=Kn(Un().mark((function e(t,n){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xu(t,{},Kn(Un().mark((function e(){var r,i,a,o,u,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oa({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Nu(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",ku.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Yu.apply(this,arguments)}var Xu=function(){function e(){(0,Tr.Z)(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return(0,Cr.Z)(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){uu(e.idToken,"internal-error"),uu("undefined"!==typeof e.idToken,"internal-error"),uu("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Zu(e);return uu(t,"internal-error"),uu("undefined"!==typeof t.exp,"internal-error"),uu("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Kn(Un().mark((function e(t){var n,r=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],uu(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Kn(Un().mark((function e(t,n){var r,i,a,o;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$u(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return su("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(uu("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(uu("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(uu("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Ju(e,t){uu("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var es=function(){function e(t){(0,Tr.Z)(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=$o(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?(0,G.Z)(a.providerData):[],this.metadata=new Bu(a.createdAt||void 0,a.lastLoginAt||void 0)}return(0,Cr.Z)(e,[{key:"getIdToken",value:function(){var e=Kn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ju(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(uu(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Fu.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Gu.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(uu(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){uu(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Kn(Un().mark((function e(t){var n,r,i=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Hu(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Kn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,ju(this,Ou(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,_=n.emailVerified,b=n.isAnonymous,w=n.providerData,E=n.stsTokenManager;uu(k&&E,t,"internal-error");var S=Xu.fromJSON(this.name,E);uu("string"===typeof k,t,"internal-error"),Ju(f,t.name),Ju(h,t.name),uu("boolean"===typeof _,t,"internal-error"),uu("boolean"===typeof b,t,"internal-error"),Ju(d,t.name),Ju(p,t.name),Ju(v,t.name),Ju(y,t.name),Ju(m,t.name),Ju(g,t.name);var x=new e({uid:k,auth:t,email:h,emailVerified:_,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:m,lastLoginAt:g});return w&&Array.isArray(w)&&(x.providerData=w.map((function(e){return Object.assign({},e)}))),y&&(x._redirectEventId=y),x}},{key:"_fromIdTokenResponse",value:function(){var t=Kn(Un().mark((function t(n,r){var i,a,o,u=arguments;return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Xu).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Hu(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),ts=function(){function e(){(0,Tr.Z)(this,e),this.type="NONE",this.storage={}}return(0,Cr.Z)(e,[{key:"_isAvailable",value:function(){var e=Kn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Kn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Kn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Kn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();ts.type="NONE";var ns=ts;function rs(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var is=function(){function e(t,n,r){(0,Tr.Z)(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=rs(this.userKey,a.apiKey,o),this.fullPersistenceKey=rs("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return(0,Cr.Z)(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Kn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?es._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Kn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Kn(Un().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(fu(ns),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Kn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||fu(ns),u=rs(i,n.config.apiKey,n.name),s=null,c=Gi(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=es._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Kn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function as(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(cs(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(os(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(fs(t))return"Blackberry";if(hs(t))return"Webos";if(us(t))return"Safari";if((t.includes("chrome/")||ss(t))&&!t.includes("edge/"))return"Chrome";if(ls(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function os(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ua();return/firefox\//i.test(e)}function us(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ua(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ss(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ua();return/crios\//i.test(e)}function cs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ua();return/iemobile/i.test(e)}function ls(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ua();return/android/i.test(e)}function fs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ua();return/blackberry/i.test(e)}function hs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ua();return/webos/i.test(e)}function ds(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ua();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ps(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ua();return ds(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function vs(){return function(){var e=ua();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function ys(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ua();return ds(e)||ls(e)||hs(e)||fs(e)||/windows phone/i.test(e)||cs(e)}function ms(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=as(ua());break;case"Worker":t="".concat(as(ua()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Oo,"/").concat(r)}var gs=function(){function e(t){(0,Tr.Z)(this,e),this.auth=t,this.queue=[]}return(0,Cr.Z)(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Kn(Un().mark((function e(t){var n,r,i,a,o,u,s,c;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=Gi(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=Gi(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(l){}}}catch(f){u.e(f)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ks=function(){function e(t,n,r){(0,Tr.Z)(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bs(this),this.idTokenSubscription=new bs(this),this.beforeStateQueue=new gs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eu,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return(0,Cr.Z)(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=fu(t)),this._initializationPromise=this.queue(Kn(Un().mark((function r(){var i,a;return Un().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,is.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Kn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Kn(Un().mark((function e(t){var n,r,i,a,o,u,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return uu(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Kn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Kn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Hu(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Kn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Kn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ja(t):null)&&uu(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Kn(Un().mark((function e(t){var n,r=this,i=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&uu(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Kn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Kn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Kn(Un().mark((function n(){return Un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(fu(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new _a("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Kn(Un().mark((function e(t,n){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Kn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return uu(n=t&&fu(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,is.create(this,[fu(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Kn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Kn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Kn(Un().mark((function e(t){var n=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Kn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return uu(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Kn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return uu(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ms(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Kn(Un().mark((function e(){var t,n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=L({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function _s(e){return ja(e)}var bs=function(){function e(t){var n=this;(0,Tr.Z)(this,e),this.auth=t,this.observer=null,this.addObserver=function(e,t){var n=new Ma(e,t);return n.subscribe.bind(n)}((function(e){return n.observer=e}))}return(0,Cr.Z)(e,[{key:"next",get:function(){return uu(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function ws(e,t,n){var r=_s(e);uu(r._canInitEmulator,r,"emulator-config-failed"),uu(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Es(t),o=function(e){var t=Es(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Ss(r.substr(a.length+1))}}var o=r.split(":"),u=(0,ti.Z)(o,2);return{host:u[0],port:Ss(u[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Es(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ss(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var xs=function(){function e(t,n){(0,Tr.Z)(this,e),this.providerId=t,this.signInMethod=n}return(0,Cr.Z)(e,[{key:"toJSON",value:function(){return su("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return su("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return su("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return su("not implemented")}}]),e}();function Ts(e,t){return Cs.apply(this,arguments)}function Cs(){return Cs=Kn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eu(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Cs.apply(this,arguments)}function Is(e,t){return Ns.apply(this,arguments)}function Ns(){return Ns=Kn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cu(t,"POST","/v1/accounts:signInWithPassword",wu(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ns.apply(this,arguments)}function As(e,t){return Rs.apply(this,arguments)}function Rs(){return Rs=Kn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cu(t,"POST","/v1/accounts:signInWithEmailLink",wu(t,n)));case 1:case"end":return e.stop()}}),e)}))),Rs.apply(this,arguments)}function Os(e,t){return Ps.apply(this,arguments)}function Ps(){return Ps=Kn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cu(t,"POST","/v1/accounts:signInWithEmailLink",wu(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ps.apply(this,arguments)}var Ds=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,Tr.Z)(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return(0,Cr.Z)(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Kn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Is(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",As(t,{email:this._email,oobCode:this._password}));case 5:ru(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Kn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ts(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Os(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:ru(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(xs);function Ls(e,t){return Ms.apply(this,arguments)}function Ms(){return Ms=Kn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cu(t,"POST","/v1/accounts:signInWithIdp",wu(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ms.apply(this,arguments)}var Fs=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){var e;return(0,Tr.Z)(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return(0,Cr.Z)(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Ls(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ls(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ls(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Oa(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ru("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=$o(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(xs);function Us(e,t){return Zs.apply(this,arguments)}function Zs(){return Zs=Kn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eu(t,"POST","/v1/accounts:sendVerificationCode",wu(t,n)));case 1:case"end":return e.stop()}}),e)}))),Zs.apply(this,arguments)}function js(){return js=Kn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cu(t,"POST","/v1/accounts:signInWithPhoneNumber",wu(t,n)));case 1:case"end":return e.stop()}}),e)}))),js.apply(this,arguments)}function Vs(){return Vs=Kn(Un().mark((function e(t,n){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cu(t,"POST","/v1/accounts:signInWithPhoneNumber",wu(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Ru(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Vs.apply(this,arguments)}var qs=L({},"USER_NOT_FOUND","user-not-found");function zs(){return zs=Kn(Un().mark((function e(t,n){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Cu(t,"POST","/v1/accounts:signInWithPhoneNumber",wu(t,r),qs));case 2:case"end":return e.stop()}}),e)}))),zs.apply(this,arguments)}var Bs=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e){var r;return(0,Tr.Z)(this,n),(r=t.call(this,"phone","phone")).params=e,r}return(0,Cr.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return js.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Vs.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return zs.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(xs);var Hs=function(){function e(t){var n,r,i,a,o,u;(0,Tr.Z)(this,e);var s=Pa(Da(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);uu(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return(0,Cr.Z)(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Pa(Da(e)).link,n=t?Pa(Da(t)).deep_link_id:null,r=Pa(Da(e)).deep_link_id;return(r?Pa(Da(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(iI){return null}}}]),e}();var Ws=function(){function e(){(0,Tr.Z)(this,e),this.providerId=e.PROVIDER_ID}return(0,Cr.Z)(e,null,[{key:"credential",value:function(e,t){return Ds._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Hs.parseLink(t);return uu(n,"argument-error"),Ds._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ws.PROVIDER_ID="password",Ws.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ws.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Gs=function(){function e(t){(0,Tr.Z)(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return(0,Cr.Z)(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Ks=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){var e;return(0,Tr.Z)(this,n),(e=t.apply(this,arguments)).scopes=[],e}return(0,Cr.Z)(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return(0,G.Z)(this.scopes)}}]),n}(Gs),Qs=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){return(0,Tr.Z)(this,n),t.call(this,"facebook.com")}return(0,Cr.Z)(n,null,[{key:"credential",value:function(e){return Fs._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(iI){return null}}}]),n}(Ks);Qs.FACEBOOK_SIGN_IN_METHOD="facebook.com",Qs.PROVIDER_ID="facebook.com";var $s=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){var e;return(0,Tr.Z)(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return(0,Cr.Z)(n,null,[{key:"credential",value:function(e,t){return Fs._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(iI){return null}}}]),n}(Ks);$s.GOOGLE_SIGN_IN_METHOD="google.com",$s.PROVIDER_ID="google.com";var Ys=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){return(0,Tr.Z)(this,n),t.call(this,"github.com")}return(0,Cr.Z)(n,null,[{key:"credential",value:function(e){return Fs._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(iI){return null}}}]),n}(Ks);Ys.GITHUB_SIGN_IN_METHOD="github.com",Ys.PROVIDER_ID="github.com";var Xs=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){return(0,Tr.Z)(this,n),t.call(this,"twitter.com")}return(0,Cr.Z)(n,null,[{key:"credential",value:function(e,t){return Fs._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(iI){return null}}}]),n}(Ks);function Js(e,t){return ec.apply(this,arguments)}function ec(){return ec=Kn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cu(t,"POST","/v1/accounts:signUp",wu(t,n)));case 1:case"end":return e.stop()}}),e)}))),ec.apply(this,arguments)}Xs.TWITTER_SIGN_IN_METHOD="twitter.com",Xs.PROVIDER_ID="twitter.com";var tc=function(){function e(t){(0,Tr.Z)(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return(0,Cr.Z)(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Kn(Un().mark((function t(n,r,i){var a,o,u,s,c=arguments;return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,es._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=nc(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Kn(Un().mark((function t(n,r,i){var a;return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=nc(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function nc(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var rc=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r,i,a){var o,u;return(0,Tr.Z)(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf((0,zi.Z)(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return(0,Cr.Z)(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(ka);function ic(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw rc._fromErrorAndOperation(e,n,t,r);throw n}))}function ac(e,t){return oc.apply(this,arguments)}function oc(){return oc=Kn(Un().mark((function e(t,n){var r,i,a=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=ju,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",tc._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),oc.apply(this,arguments)}function uc(e,t){return sc.apply(this,arguments)}function sc(){return sc=Kn(Un().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,ju(t,ic(a,o,n,t),r);case 6:return uu((u=e.sent).idToken,a,"internal-error"),uu(s=Zu(u.idToken),a,"internal-error"),c=s.sub,uu(t.uid===c,a,"user-mismatch"),e.abrupt("return",tc._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&ru(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),sc.apply(this,arguments)}function cc(e,t){return lc.apply(this,arguments)}function lc(){return lc=Kn(Un().mark((function e(t,n){var r,i,a,o,u=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,ic(t,i,n);case 4:return a=e.sent,e.next=7,tc._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),lc.apply(this,arguments)}function fc(e,t){return hc.apply(this,arguments)}function hc(){return hc=Kn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cc(_s(t),n));case 1:case"end":return e.stop()}}),e)}))),hc.apply(this,arguments)}function dc(e,t,n){return pc.apply(this,arguments)}function pc(){return pc=Kn(Un().mark((function e(t,n,r){var i,a,o;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_s(t),e.next=3,Js(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,tc._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),pc.apply(this,arguments)}function vc(e,t,n){return fc(ja(e),Ws.credential(t,n))}function yc(e,t){return mc.apply(this,arguments)}function mc(){return mc=Kn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eu(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),mc.apply(this,arguments)}function gc(e,t){return kc.apply(this,arguments)}function kc(){return(kc=Kn(Un().mark((function e(t,n){var r,i,a,o,u,s,c;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ja(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,ju(a,yc(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _c(e,t,n,r){return ja(e).onIdTokenChanged(t,n,r)}function bc(e,t,n){return ja(e).beforeAuthStateChanged(t,n)}function wc(e){return ja(e).signOut()}function Ec(e,t){return Eu(e,"POST","/v2/accounts/mfaEnrollment:start",wu(e,t))}new WeakMap;var Sc="__sak",xc=function(){function e(t,n){(0,Tr.Z)(this,e),this.storageRetriever=t,this.type=n}return(0,Cr.Z)(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Sc,"1"),this.storage.removeItem(Sc),Promise.resolve(!0)):Promise.resolve(!1)}catch(iI){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Tc=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){var e;return(0,Tr.Z)(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=ua();return us(e)||ds(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=ys(),e._shouldAllowMigration=!0,e}return(0,Cr.Z)(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);vs()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Kn(Un().mark((function e(t,r){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qi((0,ji.Z)(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Kn(Un().mark((function e(t){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qi((0,ji.Z)(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Kn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qi((0,ji.Z)(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(xc);Tc.type="LOCAL";var Cc=Tc,Ic=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){return(0,Tr.Z)(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return(0,Cr.Z)(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(xc);Ic.type="SESSION";var Nc=Ic;function Ac(e){return Promise.all(e.map(function(){var e=Kn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Rc=function(){function e(t){(0,Tr.Z)(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return(0,Cr.Z)(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Kn(Un().mark((function e(t){var n,r,i,a,o,u,s,c;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Kn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ac(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Oc(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Rc.receivers=[];var Pc=function(){function e(t){(0,Tr.Z)(this,e),this.target=t,this.handlers=new Set}return(0,Cr.Z)(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Kn(Un().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Oc("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Dc(){return window}function Lc(){return"undefined"!==typeof Dc().WorkerGlobalScope&&"function"===typeof Dc().importScripts}function Mc(){return Fc.apply(this,arguments)}function Fc(){return(Fc=Kn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Uc(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Zc="firebaseLocalStorageDb",jc="firebaseLocalStorage",Vc="fbase_key",qc=function(){function e(t){(0,Tr.Z)(this,e),this.request=t}return(0,Cr.Z)(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function zc(e,t){return e.transaction([jc],t?"readwrite":"readonly").objectStore(jc)}function Bc(){var e=indexedDB.deleteDatabase(Zc);return new qc(e).toPromise()}function Hc(){var e=indexedDB.open(Zc,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(jc,{keyPath:Vc})}catch(r){n(r)}})),e.addEventListener("success",Kn(Un().mark((function n(){var r;return Un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(jc)){n.next=12;break}return r.close(),n.next=5,Bc();case 5:return n.t0=t,n.next=8,Hc();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Wc(e,t,n){return Gc.apply(this,arguments)}function Gc(){return Gc=Kn(Un().mark((function e(t,n,r){var i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=zc(t,!0).put((L(i={},Vc,n),L(i,"value",r),i)),e.abrupt("return",new qc(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Gc.apply(this,arguments)}function Kc(e,t){return Qc.apply(this,arguments)}function Qc(){return Qc=Kn(Un().mark((function e(t,n){var r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zc(t,!1).get(n),e.next=3,new qc(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Qc.apply(this,arguments)}function $c(e,t){var n=zc(e,!0).delete(t);return new qc(n).toPromise()}var Yc=function(){function e(){(0,Tr.Z)(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return(0,Cr.Z)(e,[{key:"_openDb",value:function(){var e=Kn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Hc();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Kn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Kn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lc()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Kn(Un().mark((function e(){var t=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Rc._getInstance(Lc()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Kn(Un().mark((function e(n,r){var i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Kn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Kn(Un().mark((function e(){var t,n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mc();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Pc(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Kn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Uc()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Kn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Hc();case 5:return t=e.sent,e.next=8,Wc(t,Sc,"1");case 8:return e.next=10,$c(t,Sc);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Kn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Kn(Un().mark((function e(t,n){var r=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Kn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Wc(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Kn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Kc(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Kn(Un().mark((function e(t){var n=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Kn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return $c(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Kn(Un().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=zc(e,!1).getAll();return new qc(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Gi(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Kn(Un().mark((function t(){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Yc.type="LOCAL";var Xc=Yc;function Jc(e,t){return Eu(e,"POST","/v2/accounts/mfaSignIn:start",wu(e,t))}function el(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=iu("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function tl(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}tl("rcb"),new mu(3e4,6e4);var nl="recaptcha";function rl(e,t,n){return il.apply(this,arguments)}function il(){return il=Kn(Un().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,uu("string"===typeof a,t,"argument-error"),uu(r.type===nl,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return uu("enroll"===u.type,t,"internal-error"),e.next=13,Ec(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return uu("signin"===u.type,t,"internal-error"),uu(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Jc(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Us(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),il.apply(this,arguments)}var al=function(){function e(t){(0,Tr.Z)(this,e),this.providerId=e.PROVIDER_ID,this.auth=_s(t)}return(0,Cr.Z)(e,[{key:"verifyPhoneNumber",value:function(e,t){return rl(this.auth,e,ja(t))}}],[{key:"credential",value:function(e,t){return Bs._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Bs._fromTokenResponse(n,r):null}}]),e}();function ol(e,t){return t?fu(t):(uu(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}al.PROVIDER_ID="phone",al.PHONE_SIGN_IN_METHOD="phone";var ul=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e){var r;return(0,Tr.Z)(this,n),(r=t.call(this,"custom","custom")).params=e,r}return(0,Cr.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return Ls(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Ls(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Ls(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(xs);function sl(e){return cc(e.auth,new ul(e),e.bypassAuthState)}function cl(e){var t=e.auth,n=e.user;return uu(n,t,"internal-error"),uc(n,new ul(e),e.bypassAuthState)}function ll(e){return fl.apply(this,arguments)}function fl(){return fl=Kn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,uu(r=t.user,n,"internal-error"),e.abrupt("return",ac(r,new ul(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),fl.apply(this,arguments)}var hl=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,Tr.Z)(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return(0,Cr.Z)(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Kn(Un().mark((function t(n,r){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Kn(Un().mark((function e(t){var n,r,i,a,o,u,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sl;case"linkViaPopup":case"linkViaRedirect":return ll;case"reauthViaPopup":case"reauthViaRedirect":return cl;default:ru(this.auth,"internal-error")}}},{key:"resolve",value:function(e){cu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){cu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),dl=new mu(2e3,1e4);var pl=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r,i,a,o){var u;return(0,Tr.Z)(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=(0,zi.Z)(u),u}return(0,Cr.Z)(n,[{key:"executeNotNull",value:function(){var e=Kn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return uu(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Kn(Un().mark((function e(){var t,n=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cu(1===this.filter.length,"Popup operations only handle one event"),t=Oc(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(iu(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(iu(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(iu(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,dl.get())}()}}]),n}(hl);pl.currentPopupAction=null;var vl=new Map,yl=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,Tr.Z)(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return(0,Cr.Z)(n,[{key:"execute",value:function(){var e=Kn(Un().mark((function e(){var t,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=vl.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,ml(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,qi((0,ji.Z)(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:vl.set(this.auth._key(),t);case 21:return this.bypassAuthState||vl.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Kn(Un().mark((function e(t){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",qi((0,ji.Z)(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",qi((0,ji.Z)(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Kn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(hl);function ml(e,t){return gl.apply(this,arguments)}function gl(){return gl=Kn(Un().mark((function e(t,n){var r,i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bl(n),i=_l(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),gl.apply(this,arguments)}function kl(e,t){vl.set(e._key(),t)}function _l(e){return fu(e._redirectPersistence)}function bl(e){return rs("pendingRedirect",e.config.apiKey,e.name)}function wl(e,t){return El.apply(this,arguments)}function El(){return El=Kn(Un().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=_s(t),a=ol(i,n),o=new yl(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),El.apply(this,arguments)}var Sl=function(){function e(t){(0,Tr.Z)(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return(0,Cr.Z)(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tl(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Tl(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(iu(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xl(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(xl(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function xl(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Tl(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Cl(e){return Il.apply(this,arguments)}function Il(){return Il=Kn(Un().mark((function e(t){var n,r=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Eu(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Il.apply(this,arguments)}var Nl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Al=/^https?/;function Rl(){return Rl=Kn(Un().mark((function e(t){var n,r,i,a,o;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Cl(t);case 4:n=e.sent,r=n.authorizedDomains,i=Gi(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Ol(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:ru(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Rl.apply(this,arguments)}function Ol(e){var t=du(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Al.test(r))return!1;if(Nl.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Pl=new mu(3e4,6e4);function Dl(){var e=Dc().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=(0,G.Z)(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Ll=null;function Ml(e){return Ll=Ll||function(e){return new Promise((function(t,n){var r,i,a;function o(){Dl(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Dl(),n(iu(e,"network-request-failed"))},timeout:Pl.get()})}if(null===(i=null===(r=Dc().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Dc().gapi)||void 0===a?void 0:a.load)){var u=tl("iframefcb");return Dc()[u]=function(){gapi.load?o():n(iu(e,"network-request-failed"))},el("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Ll=null,e}))}(e),Ll}var Fl=new mu(5e3,15e3),Ul={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jl(e){var t=e.config;uu(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?gu(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Oo},i=Zl.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Oa(r).slice(1))}function Vl(e){return ql.apply(this,arguments)}function ql(){return ql=Kn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ml(t);case 2:return n=e.sent,uu(r=Dc().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:jl(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ul,dontclear:!0},(function(e){return new Promise(function(){var n=Kn(Un().mark((function n(r,i){var a,o,u;return Un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Dc().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=iu(t,"network-request-failed"),o=Dc().setTimeout((function(){i(a)}),Fl.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),ql.apply(this,arguments)}var zl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Bl="_blank",Hl="http://localhost",Wl=function(){function e(t){(0,Tr.Z)(this,e),this.window=t,this.associatedEvent=null}return(0,Cr.Z)(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Gl(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},zl),{width:r.toString(),height:i.toString(),top:a,left:o}),c=ua().toLowerCase();n&&(u=ss(c)?Bl:n),os(c)&&(t=t||Hl,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=(0,ti.Z)(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(ps(c)&&"_self"!==u)return Kl(t||"",u),new Wl(null);var f=window.open(t||"",u,l);uu(f,e,"popup-blocked");try{f.focus()}catch(h){}return new Wl(f)}function Kl(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Ql="__/auth/handler",$l="emulator/auth/handler";function Yl(e,t,n,r,i,a){uu(e.config.authDomain,e,"auth-domain-config-required"),uu(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Oo,eventId:i};if(t instanceof Gs){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Ia(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=(0,ti.Z)(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof Ks){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ql);return gu(t,$l)}(e),"?").concat(Oa(d).slice(1))}var Xl="webStorageSupport",Jl=function(){function e(){(0,Tr.Z)(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nc,this._completeRedirectFn=wl,this._overrideRedirectResult=kl}return(0,Cr.Z)(e,[{key:"_openPopup",value:function(){var e=Kn(Un().mark((function e(t,n,r,i){var a,o;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cu(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Yl(t,n,r,du(),i),e.abrupt("return",Gl(t,o,Oc()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Kn(Un().mark((function e(t,n,r,i){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Yl(t,n,r,du(),i),Dc().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(cu(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Kn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vl(t);case 2:return n=e.sent,r=new Sl(t),n.register("authEvent",(function(e){return uu(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Xl,{type:Xl},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),ru(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Rl.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ys()||us()||ds()}}]),e}(),ef=Jl,tf=function(){function e(t){(0,Tr.Z)(this,e),this.factorId=t}return(0,Cr.Z)(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return su("unexpected MultiFactorSessionType")}}}]),e}(),nf=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e){var r;return(0,Tr.Z)(this,n),(r=t.call(this,"phone")).credential=e,r}return(0,Cr.Z)(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Eu(e,"POST","/v2/accounts/mfaEnrollment:finalize",wu(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Eu(e,"POST","/v2/accounts/mfaSignIn:finalize",wu(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(tf);(function(){function e(){(0,Tr.Z)(this,e)}return(0,Cr.Z)(e,null,[{key:"assertion",value:function(e){return nf._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var rf="@firebase/auth",af="0.20.11",of=function(){function e(t){(0,Tr.Z)(this,e),this.auth=t,this.internalListeners=new Map}return(0,Cr.Z)(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Kn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){uu(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var uf,sf=ya("authIdTokenMaxAge")||300,cf=null,lf=function(e){return function(){var t=Kn(Un().mark((function t(n){var r,i,a;return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>sf)){t.next=9;break}return t.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,cf!==a){t.next=12;break}return t.abrupt("return");case 12:return cf=a,t.next=15,fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};uf="Browser",Co(new Va("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){uu(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),uu(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:uf,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ms(uf)},i=new ks(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fu);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Co(new Va("auth-internal",(function(e){return function(e){return new of(e)}(_s(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Lo(rf,af,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(uf)),Lo(rf,af,"esm2017");var ff="@firebase/database",hf="0.13.10",df="";var pf=function(){function e(t){(0,Tr.Z)(this,e),this.domStorage_=t,this.prefix_="firebase:"}return(0,Cr.Z)(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Sa(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Ea(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),vf=function(){function e(){(0,Tr.Z)(this,e),this.cache_={},this.isInMemoryStorage=!0}return(0,Cr.Z)(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Ta(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),yf=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new pf(t)}}catch(n){}return new vf},mf=yf("localStorage"),gf=yf("sessionStorage"),kf=new Xa("@firebase/database"),_f=function(){var e=1;return function(){return e++}}(),bf=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Xi(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new La;n.update(t);var r=n.digest();return ta.encodeByteArray(r)},wf=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?Sa(r):r,t+=" "}return t},Ef=null,Sf=!0,xf=function(e,t){Xi(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(kf.logLevel=Ha.VERBOSE,Ef=kf.log.bind(kf),t&&gf.set("logging_enabled",!0)):"function"===typeof e?Ef=e:(Ef=null,gf.remove("logging_enabled"))},Tf=function(){if(!0===Sf&&(Sf=!1,null===Ef&&!0===gf.get("logging_enabled")&&xf(!0)),Ef){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=wf.apply(null,t);Ef(r)}},Cf=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Tf.apply(void 0,[e].concat(n))}},If=function(){var e="FIREBASE INTERNAL ERROR: "+wf.apply(void 0,arguments);kf.error(e)},Nf=function(){var e="FIREBASE FATAL ERROR: ".concat(wf.apply(void 0,arguments));throw kf.error(e),new Error(e)},Af=function(){var e="FIREBASE WARNING: "+wf.apply(void 0,arguments);kf.warn(e)},Rf=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Of="[MIN_NAME]",Pf="[MAX_NAME]",Df=function(e,t){if(e===t)return 0;if(e===Of||t===Pf)return-1;if(t===Of||e===Pf)return 1;var n=Bf(e),r=Bf(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Lf=function(e,t){return e===t?0:e<t?-1:1},Mf=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Sa(t))},Ff=function e(t){if("object"!==typeof t||null===t)return Sa(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=Sa(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Uf=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Zf(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var jf=function(e){Xi(!Rf(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var Vf=new RegExp("^-?(0*)\\d{1,10}$"),qf=-2147483648,zf=2147483647,Bf=function(e){if(Vf.test(e)){var t=Number(e);if(t>=qf&&t<=zf)return t}return null},Hf=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Af("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Wf=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},Gf=function(){function e(t,n){var r=this;(0,Tr.Z)(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return(0,Cr.Z)(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Af('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),Kf=function(){function e(t,n,r){var i=this;(0,Tr.Z)(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return(0,Cr.Z)(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Tf("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Af(e)}}]),e}(),Qf=function(){function e(t){(0,Tr.Z)(this,e),this.accessToken=t}return(0,Cr.Z)(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Qf.OWNER="owner";var $f="5",Yf=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Xf="websocket",Jf="long_polling",eh=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];(0,Tr.Z)(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=mf.get("host:"+t)||this._host}return(0,Cr.Z)(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&mf.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function th(e,t,n){var r;if(Xi("string"===typeof t,"typeof type must == string"),Xi("object"===typeof n,"typeof params must == object"),t===Xf)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Jf)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Zf(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var nh=function(){function e(){(0,Tr.Z)(this,e),this.counters_={}}return(0,Cr.Z)(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Ta(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return aa(this.counters_)}}]),e}(),rh={},ih={};function ah(e){var t=e.toString();return rh[t]||(rh[t]=new nh),rh[t]}var oh=function(){function e(t){(0,Tr.Z)(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return(0,Cr.Z)(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&Hf((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),uh="start",sh="close",ch=function(){function e(t,n,r,i,a,o,u){var s=this;(0,Tr.Z)(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Cf(t),this.stats_=ah(n),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),th(n,Jf,e)}}return(0,Cr.Z)(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new oh(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(la()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new lh((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===uh)n.id=a,n.password=o;else{if(i!==sh)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=$f,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&Yf.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=Sa(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=na(t),r=Uf(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!la()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=Sa(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!la()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),lh=function(){function e(t,n,r,i){if((0,Tr.Z)(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,la())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=_f(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){Tf("frame writing exception"),u.stack&&Tf(u.stack),Tf(u)}}}return(0,Cr.Z)(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;la()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Tf("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Tf("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),fh=null;"undefined"!==typeof MozWebSocket?fh=MozWebSocket:"undefined"!==typeof WebSocket&&(fh=WebSocket);var hh=function(){function e(t,n,r,i,a,o,u){(0,Tr.Z)(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Cf(this.connId),this.stats_=ah(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return(0,Cr.Z)(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,mf.set("previous_websocket_failure",!0);try{var r;if(la()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat($f,"/").concat(df,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/messenger",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new fh(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){mf.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Ea(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Xi(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=Sa(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Uf(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=$f,!la()&&"undefined"!==typeof location&&location.hostname&&Yf.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),th(e,Xf,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==fh&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return mf.isInMemoryStorage||!0===mf.get("previous_websocket_failure")}}]),e}();hh.responsesRequiredToBeHealthy=2,hh.healthyTimeout=3e4;var dh=function(){function e(t){(0,Tr.Z)(this,e),this.initTransports_(t)}return(0,Cr.Z)(e,[{key:"initTransports_",value:function(t){var n=hh&&hh.isAvailable(),r=n&&!hh.previouslyFailed();if(t.webSocketOnly&&(n||Af("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[hh];else{var i,a=this.transports_=[],o=Gi(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[ch,hh]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();dh.globalTransportInitialized_=!1;var ph=function(){function e(t,n,r,i,a,o,u,s,c,l){(0,Tr.Z)(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Cf("c:"+this.id+":"),this.transportManager_=new dh(n),this.log_("Connection created"),this.start_()}return(0,Cr.Z)(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Wf((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Mf("t",e),n=Mf("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Mf("t",e),n=Mf("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Mf("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?If("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):If("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),$f!==n&&Af("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Wf((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wf((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(mf.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),vh=function(){function e(){(0,Tr.Z)(this,e)}return(0,Cr.Z)(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),yh=function(){function e(t){(0,Tr.Z)(this,e),this.allowedEvents_=t,this.listeners_={},Xi(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return(0,Cr.Z)(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=(0,G.Z)(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Xi(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),mh=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){var e;return(0,Tr.Z)(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||sa()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return(0,Cr.Z)(n,[{key:"getInitialEvent",value:function(e){return Xi("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(yh),gh=function(){function e(t,n){if((0,Tr.Z)(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return(0,Cr.Z)(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function kh(){return new gh("")}function _h(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function bh(e){return e.pieces_.length-e.pieceNum_}function wh(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new gh(e.pieces_,t)}function Eh(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Sh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function xh(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new gh(t,0)}function Th(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof gh)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new gh(n,0)}function Ch(e){return e.pieceNum_>=e.pieces_.length}function Ih(e,t){var n=_h(e),r=_h(t);if(null===n)return t;if(n===r)return Ih(wh(e),wh(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Nh(e,t){if(bh(e)!==bh(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ah(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(bh(e)>bh(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Rh=(0,Cr.Z)((function e(t,n){(0,Tr.Z)(this,e),this.errorPrefix_=n,this.parts_=Sh(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Za(this.parts_[r]);Oh(this)}));function Oh(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ph(e))}function Ph(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Dh=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){var e,r,i;return(0,Tr.Z)(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return(0,Cr.Z)(n,[{key:"getInitialEvent",value:function(e){return Xi("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(yh),Lh=1e3,Mh=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r,i,a,o,u,s,c){var l;if((0,Tr.Z)(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=Cf("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Lh,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!la())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Dh.getInstance().on("visible",l.onVisible_,(0,zi.Z)(l)),-1===e.host.indexOf("fblocal")&&mh.getInstance().on("online",l.onOnline_,(0,zi.Z)(l)),l}return(0,Cr.Z)(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Sa(i)),Xi(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new ma,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Xi(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Xi(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=xa(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=xa(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Xi(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+Sa(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):If("Unrecognized action received from server: "+Sa(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Xi(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Lh,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Lh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Lh),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Kn(Un().mark((function e(){var t,r,i,a,o,u,s,c,l,f,h,d,p,v,y=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,c=function(){s?s.close():(u=!0,i())},l=function(e){Xi(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:c,sendRequest:l},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:h=e.sent,d=(0,ti.Z)(h,2),p=d[0],v=d[1],u?Tf("getToken() completed but was canceled"):(Tf("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,s=new ph(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Af(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&Af(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Tf("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Tf("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ia(this.interruptReasons_)&&(this.reconnectDelay_=Lh,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Ff(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new gh(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Tf("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Tf("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=Gi(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=Gi(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";la()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+df.replace(/\./g,"-")]=1,sa()?e["framework.cordova"]=1:ca()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=mh.getInstance().currentlyOnline();return Ia(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Ta(e,"w")){var n=Ca(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Af("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(vh);Mh.nextPersistentConnectionId_=0,Mh.nextConnectionId_=0;var Fh,Uh=function(){function e(t,n){(0,Tr.Z)(this,e),this.name=t,this.node=n}return(0,Cr.Z)(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Zh=function(){function e(){(0,Tr.Z)(this,e)}return(0,Cr.Z)(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Uh(Of,e),r=new Uh(Of,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Uh.MIN}}]),e}(),jh=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){return(0,Tr.Z)(this,n),t.apply(this,arguments)}return(0,Cr.Z)(n,[{key:"compare",value:function(e,t){return Df(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Ji("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Uh.MIN}},{key:"maxPost",value:function(){return new Uh(Pf,Fh)}},{key:"makePost",value:function(e,t){return Xi("string"===typeof e,"KeyIndex indexValue must always be a string."),new Uh(e,Fh)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Fh},set:function(e){Fh=e}}]),n}(Zh),Vh=new jh,qh=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;(0,Tr.Z)(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return(0,Cr.Z)(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),zh=function(){function e(t,n,r,i,a){(0,Tr.Z)(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Wh.EMPTY_NODE,this.right=null!=a?a:Wh.EMPTY_NODE}return(0,Cr.Z)(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Wh.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Wh.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();zh.RED=!0,zh.BLACK=!1;var Bh,Hh=function(){function e(){(0,Tr.Z)(this,e)}return(0,Cr.Z)(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new zh(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),Wh=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;(0,Tr.Z)(this,e),this.comparator_=t,this.root_=n}return(0,Cr.Z)(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,zh.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,zh.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new qh(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new qh(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new qh(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new qh(this.root_,null,this.comparator_,!0,e)}}]),e}();function Gh(e,t){return Df(e.name,t.name)}function Kh(e,t){return Df(e,t)}Wh.EMPTY_NODE=new Hh;var Qh,$h,Yh,Xh=function(e){return"number"===typeof e?"number:"+jf(e):"string:"+e},Jh=function(e){if(e.isLeafNode()){var t=e.val();Xi("string"===typeof t||"number"===typeof t||"object"===typeof t&&Ta(t,".sv"),"Priority must be a string or number.")}else Xi(e===Bh||e.isEmpty(),"priority of unexpected type.");Xi(e===Bh||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ed=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;(0,Tr.Z)(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Xi(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Jh(this.priorityNode_)}return(0,Cr.Z)(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Ch(t)?this:".priority"===_h(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=_h(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Xi(".priority"!==r||1===bh(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(wh(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Xh(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?jf(this.value_):this.value_,this.lazyHash_=bf(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Xi(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Xi(i>=0,"Unknown leaf type: "+n),Xi(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return Qh},set:function(e){Qh=e}}]),e}();ed.VALUE_TYPE_ORDER=["object","boolean","number","string"];var td,nd,rd=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){return(0,Tr.Z)(this,n),t.apply(this,arguments)}return(0,Cr.Z)(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Df(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Uh.MIN}},{key:"maxPost",value:function(){return new Uh(Pf,new ed("[PRIORITY-POST]",Yh))}},{key:"makePost",value:function(e,t){var n=$h(e);return new Uh(t,new ed("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Zh),id=new rd,ad=Math.log(2),od=function(){function e(t){(0,Tr.Z)(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/ad,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return(0,Cr.Z)(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),ud=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new zh(o,a.node,zh.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new zh(o,a.node,zh.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],f=n?n(l):l;s(new zh(f,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?u(f,zh.BLACK):(u(f,zh.BLACK),u(f,zh.RED))}return a}(new od(e.length));return new Wh(r||t,a)},sd={},cd=function(){function e(t,n){(0,Tr.Z)(this,e),this.indexes_=t,this.indexSet_=n}return(0,Cr.Z)(e,[{key:"get",value:function(e){var t=Ca(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Wh?t:null}},{key:"hasIndex",value:function(e){return Ta(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Xi(t!==Vh,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Uh.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?ud(i,t.getCompare()):sd;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Na(this.indexes_,(function(e,i){var a=Ca(r.indexSet_,i);if(Xi(a,"Missing index implementation for "+i),e===sd){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(Uh.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),ud(o,a.getCompare())}return sd}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Uh(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Na(this.indexes_,(function(e){if(e===sd)return e;var r=n.get(t.name);return r?e.remove(new Uh(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Xi(sd&&id,"ChildrenNode.ts has not been loaded"),td=td||new e({".priority":sd},{".priority":id})}}]),e}(),ld=function(){function e(t,n,r){(0,Tr.Z)(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Jh(this.priorityNode_),this.children_.isEmpty()&&Xi(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return(0,Cr.Z)(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||nd}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?nd:t}},{key:"getChild",value:function(e){var t=_h(e);return null===t?this:this.getImmediateChild(t).getChild(wh(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Xi(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Uh(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?nd:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=_h(e);if(null===n)return t;Xi(".priority"!==_h(e)||1===bh(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(wh(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(id,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Xh(this.getPriority().val())+":"),this.forEachChild(id,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":bf(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Uh(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Uh(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Uh(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Uh.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Uh.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===fd?-1:0}},{key:"withIndex",value:function(t){if(t===Vh||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Vh||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(id),r=t.getIterator(id),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Vh?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return nd||(nd=new e(new Wh(Kh),null,cd.Default))}}]),e}();ld.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var fd=new(function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){return(0,Tr.Z)(this,n),t.call(this,new Wh(Kh),ld.EMPTY_NODE,cd.Default)}return(0,Cr.Z)(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return ld.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(ld));Object.defineProperties(Uh,{MIN:{value:new Uh(Of,ld.EMPTY_NODE)},MAX:{value:new Uh(Pf,fd)}}),jh.__EMPTY_NODE=ld.EMPTY_NODE,ed.__childrenNodeConstructor=ld,Bh=fd,function(e){Yh=e}(fd);function hd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return ld.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Xi(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new ed(n,hd(t))}if(e instanceof Array){var r=ld.EMPTY_NODE;return Zf(e,(function(t,n){if(Ta(e,t)&&"."!==t.substring(0,1)){var i=hd(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(hd(t))}var i=[],a=!1,o=e;if(Zf(o,(function(e,t){if("."!==e.substring(0,1)){var n=hd(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new Uh(e,n)))}})),0===i.length)return ld.EMPTY_NODE;var u=ud(i,Gh,(function(e){return e.name}),Kh);if(a){var s=ud(i,id.getCompare());return new ld(u,hd(t),new cd({".priority":s},{".priority":id}))}return new ld(u,hd(t),cd.Default)}!function(e){$h=e}(hd);var dd=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e){var r;return(0,Tr.Z)(this,n),(r=t.call(this)).indexPath_=e,Xi(!Ch(e)&&".priority"!==_h(e),"Can't create PathIndex with empty path or .priority key"),r}return(0,Cr.Z)(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Df(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=hd(e),r=ld.EMPTY_NODE.updateChild(this.indexPath_,n);return new Uh(t,r)}},{key:"maxPost",value:function(){var e=ld.EMPTY_NODE.updateChild(this.indexPath_,fd);return new Uh(Pf,e)}},{key:"toString",value:function(){return Sh(this.indexPath_,0).join("/")}}]),n}(Zh),pd=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){return(0,Tr.Z)(this,n),t.apply(this,arguments)}return(0,Cr.Z)(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Df(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Uh.MIN}},{key:"maxPost",value:function(){return Uh.MAX}},{key:"makePost",value:function(e,t){var n=hd(e);return new Uh(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Zh),vd=new pd,yd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){var e=0,t=[]}();function md(e){return{type:"value",snapshotNode:e}}function gd(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function kd(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function _d(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var bd=function(){function e(t){(0,Tr.Z)(this,e),this.index_=t}return(0,Cr.Z)(e,[{key:"updateChild",value:function(e,t,n,r,i,a){Xi(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(kd(t,o)):Xi(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(gd(t,n)):a.trackChildChange(_d(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(id,(function(e,r){t.hasChild(e)||n.trackChildChange(kd(e,r))})),t.isLeafNode()||t.forEachChild(id,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(_d(t,r,i))}else n.trackChildChange(gd(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?ld.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),wd=function(){function e(t){(0,Tr.Z)(this,e),this.indexedFilter_=new bd(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return(0,Cr.Z)(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new Uh(t,n))||(n=ld.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=ld.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(ld.EMPTY_NODE);var i=this;return t.forEachChild(id,(function(e,t){i.matches(new Uh(e,t))||(r=r.updateImmediateChild(e,ld.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),Ed=function(){function e(t){(0,Tr.Z)(this,e),this.rangedFilter_=new wd(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return(0,Cr.Z)(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new Uh(t,n))||(n=ld.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=ld.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=ld.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var u,s,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(ld.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();var f=this.index_.getCompare();c=function(e,t){return f(t,e)}}else l=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var h=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(u,p)<=0&&(d=!0),d&&h<this.limit_&&c(p,s)<=0?h++:r=r.updateImmediateChild(p.name,ld.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;Xi(u.numChildren()===this.limit_,"");var s=new Uh(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var f=u.getImmediateChild(t),h=r.getChildAfterChild(this.index_,c,this.reverse_);null!=h&&(h.name===t||u.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var d=null==h?1:a(h,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(_d(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(kd(t,f));var p=u.updateImmediateChild(t,ld.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(gd(h.name,h.node)),p.updateImmediateChild(h.name,h.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(kd(c.name,c.node)),i.trackChildChange(gd(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,ld.EMPTY_NODE)):e}}]),e}(),Sd=function(){function e(){(0,Tr.Z)(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=id}return(0,Cr.Z)(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Xi(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Xi(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Of}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Xi(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Xi(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Pf}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Xi(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===id}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function xd(e){var t,n={};return e.isDefault()||(e.index_===id?t="$priority":e.index_===vd?t="$value":e.index_===Vh?t="$key":(Xi(e.index_ instanceof dd,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Sa(t),e.startSet_&&(n.startAt=Sa(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+Sa(e.indexStartName_))),e.endSet_&&(n.endAt=Sa(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+Sa(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function Td(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==id&&(t.i=e.index_.toString()),t}var Cd=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r,i,a){var o;return(0,Tr.Z)(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=Cf("p:rest:"),o.listens_={},o}return(0,Cr.Z)(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=xd(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Ca(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=xd(e._queryParams),r=e._path.toString(),i=new ma;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=(0,ti.Z)(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Oa(n);t.log_("Sending REST request for "+s);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+s+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=Ea(c.responseText)}catch(n){Af("Failed to parse JSON response for "+s+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&Af("Got unsuccessful REST response for "+s+" Status: "+c.status),r(c.status);r=null}},c.open("GET",s,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Xi(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(vh),Id=function(){function e(){(0,Tr.Z)(this,e),this.rootNode_=ld.EMPTY_NODE}return(0,Cr.Z)(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Nd(){return{value:null,children:new Map}}function Ad(e,t,n){if(Ch(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=_h(t);e.children.has(r)||e.children.set(r,Nd()),Ad(e.children.get(r),t=wh(t),n)}}function Rd(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Rd(r,new gh(t.toString()+"/"+e),n)}))}var Od,Pd=function(){function e(t){(0,Tr.Z)(this,e),this.collection_=t,this.last_=null}return(0,Cr.Z)(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Zf(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Dd=function(){function e(t,n){(0,Tr.Z)(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Pd(t);var r=1e4+2e4*Math.random();Wf(this.reportStats_.bind(this),Math.floor(r))}return(0,Cr.Z)(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Zf(t,(function(t,i){i>0&&Ta(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Wf(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Ld(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Od||(Od={}));var Md,Fd=function(){function e(t,n,r){(0,Tr.Z)(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Od.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return(0,Cr.Z)(e,[{key:"operationForChild",value:function(t){if(Ch(this.path)){if(null!=this.affectedTree.value)return Xi(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new gh(t));return new e(kh(),n,this.revert)}return Xi(_h(this.path)===t,"operationForChild called for unrelated child."),new e(wh(this.path),this.affectedTree,this.revert)}}]),e}(),Ud=function(){function e(t,n){(0,Tr.Z)(this,e),this.source=t,this.path=n,this.type=Od.LISTEN_COMPLETE}return(0,Cr.Z)(e,[{key:"operationForChild",value:function(t){return Ch(this.path)?new e(this.source,kh()):new e(this.source,wh(this.path))}}]),e}(),Zd=function(){function e(t,n,r){(0,Tr.Z)(this,e),this.source=t,this.path=n,this.snap=r,this.type=Od.OVERWRITE}return(0,Cr.Z)(e,[{key:"operationForChild",value:function(t){return Ch(this.path)?new e(this.source,kh(),this.snap.getImmediateChild(t)):new e(this.source,wh(this.path),this.snap)}}]),e}(),jd=function(){function e(t,n,r){(0,Tr.Z)(this,e),this.source=t,this.path=n,this.children=r,this.type=Od.MERGE}return(0,Cr.Z)(e,[{key:"operationForChild",value:function(t){if(Ch(this.path)){var n=this.children.subtree(new gh(t));return n.isEmpty()?null:n.value?new Zd(this.source,kh(),n.value):new e(this.source,kh(),n)}return Xi(_h(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,wh(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),Vd=function(){function e(t,n,r){(0,Tr.Z)(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return(0,Cr.Z)(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Ch(e))return this.isFullyInitialized()&&!this.filtered_;var t=_h(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),qd=(0,Cr.Z)((function e(t){(0,Tr.Z)(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function zd(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Ji("Should only compare child_ events.");var r=new Uh(t.childName,t.snapshotNode),i=new Uh(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Bd(e,t){return{eventCache:e,serverCache:t}}function Hd(e,t,n,r){return Bd(new Vd(t,n,r),e.serverCache)}function Wd(e,t,n,r){return Bd(e.eventCache,new Vd(t,n,r))}function Gd(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Kd(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Qd=function(){return Md||(Md=new Wh(Lf)),Md},$d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qd();(0,Tr.Z)(this,e),this.value=t,this.children=n}return(0,Cr.Z)(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:kh(),value:this.value};if(Ch(e))return null;var n=_h(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(wh(e),t);return null!=i?{path:Th(new gh(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Ch(t))return this;var n=_h(t),r=this.children.get(n);return null!==r?r.subtree(wh(t)):new e(null)}},{key:"set",value:function(t,n){if(Ch(t))return new e(n,this.children);var r=_h(t),i=(this.children.get(r)||new e(null)).set(wh(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Ch(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=_h(t),r=this.children.get(n);if(r){var i,a=r.remove(wh(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Ch(e))return this.value;var t=_h(e),n=this.children.get(t);return n?n.get(wh(e)):null}},{key:"setTree",value:function(t,n){if(Ch(t))return n;var r,i=_h(t),a=(this.children.get(i)||new e(null)).setTree(wh(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(kh(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Th(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,kh(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Ch(e))return null;var i=_h(e),a=this.children.get(i);return a?a.findOnPath_(wh(e),Th(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,kh(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Ch(t))return this;this.value&&r(n,this.value);var i=_h(t),a=this.children.get(i);return a?a.foreachOnPath_(wh(t),Th(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(kh(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Th(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Zf(t,(function(e,t){n=n.set(new gh(e),t)})),n}}]),e}(),Yd=function(){function e(t){(0,Tr.Z)(this,e),this.writeTree_=t}return(0,Cr.Z)(e,null,[{key:"empty",value:function(){return new e(new $d(null))}}]),e}();function Xd(e,t,n){if(Ch(t))return new Yd(new $d(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Ih(i,t);return a=a.updateChild(o,n),new Yd(e.writeTree_.set(i,a))}var u=new $d(n),s=e.writeTree_.setTree(t,u);return new Yd(s)}function Jd(e,t,n){var r=e;return Zf(n,(function(e,n){r=Xd(r,Th(t,e),n)})),r}function ep(e,t){if(Ch(t))return Yd.empty();var n=e.writeTree_.setTree(t,new $d(null));return new Yd(n)}function tp(e,t){return null!=np(e,t)}function np(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Ih(n.path,t)):null}function rp(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(id,(function(e,n){t.push(new Uh(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Uh(e,n.value))})),t}function ip(e,t){if(Ch(t))return e;var n=np(e,t);return new Yd(null!=n?new $d(n):e.writeTree_.subtree(t))}function ap(e){return e.writeTree_.isEmpty()}function op(e,t){return up(kh(),e.writeTree_,t)}function up(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Xi(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=up(Th(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Th(e,".priority"),r)),n}function sp(e,t){return wp(t,e)}function cp(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function lp(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Xi(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&fp(u,r.path)?i=!1:Ah(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=dp(e.allWrites,hp,kh()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=ep(e.visibleWrites,r.path):Zf(r.children,(function(t){e.visibleWrites=ep(e.visibleWrites,Th(r.path,t))}));return!0}return!1}function fp(e,t){if(e.snap)return Ah(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Ah(Th(e.path,n),t))return!0;return!1}function hp(e){return e.visible}function dp(e,t,n){for(var r=Yd.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)Ah(n,o)?r=Xd(r,u=Ih(n,o),a.snap):Ah(o,n)&&(u=Ih(o,n),r=Xd(r,kh(),a.snap.getChild(u)));else{if(!a.children)throw Ji("WriteRecord should have .snap or .children");if(Ah(n,o))r=Jd(r,u=Ih(n,o),a.children);else if(Ah(o,n))if(Ch(u=Ih(o,n)))r=Jd(r,kh(),a.children);else{var s=Ca(a.children,_h(u));if(s){var c=s.getChild(wh(u));r=Xd(r,kh(),c)}}}}}return r}function pp(e,t,n,r,i){if(r||i){var a=ip(e.visibleWrites,t);if(!i&&ap(a))return n;if(i||null!=n||tp(a,kh())){return op(dp(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Ah(e.path,t)||Ah(t,e.path))}),t),n||ld.EMPTY_NODE)}return null}var o=np(e.visibleWrites,t);if(null!=o)return o;var u=ip(e.visibleWrites,t);return ap(u)?n:null!=n||tp(u,kh())?op(u,n||ld.EMPTY_NODE):null}function vp(e,t,n,r){return pp(e.writeTree,e.treePath,t,n,r)}function yp(e,t){return function(e,t,n){var r=ld.EMPTY_NODE,i=np(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(id,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=ip(e.visibleWrites,t);return n.forEachChild(id,(function(e,t){var n=op(ip(a,new gh(e)),t);r=r.updateImmediateChild(e,n)})),rp(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return rp(ip(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function mp(e,t,n,r){return function(e,t,n,r,i){Xi(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Th(t,n);if(tp(e.visibleWrites,a))return null;var o=ip(e.visibleWrites,a);return ap(o)?i.getChild(n):op(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function gp(e,t){return function(e,t){return np(e.visibleWrites,t)}(e.writeTree,Th(e.treePath,t))}function kp(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=ip(e.visibleWrites,t),c=np(s,kh());if(null!=c)u=c;else{if(null==n)return[];u=op(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function _p(e,t,n){return function(e,t,n,r){var i=Th(t,n),a=np(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?op(ip(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function bp(e,t){return wp(Th(e.treePath,t),e.writeTree)}function wp(e,t){return{treePath:e,writeTree:t}}var Ep=function(){function e(){(0,Tr.Z)(this,e),this.changeMap=new Map}return(0,Cr.Z)(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Xi("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Xi(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,_d(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,kd(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,gd(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Ji("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,_d(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),Sp=new(function(){function e(){(0,Tr.Z)(this,e)}return(0,Cr.Z)(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),xp=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,Tr.Z)(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return(0,Cr.Z)(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Vd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _p(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Kd(this.viewCache_),i=kp(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function Tp(e,t,n,r,i){var a,o,u=new Ep;if(n.type===Od.OVERWRITE){var s=n;s.source.fromUser?a=Np(e,t,s.path,s.snap,r,i,u):(Xi(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!Ch(s.path),a=Ip(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===Od.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=Th(n,r);Ap(t,_h(c))&&(u=Np(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=Th(n,r);Ap(t,_h(c))||(u=Np(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(Xi(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=Op(e,t,c.path,c.children,r,i,o,u))}else if(n.type===Od.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=gp(r,n))return t;var u,s=new xp(r,t,i),c=t.eventCache.getNode();if(Ch(n)||".priority"===_h(n)){var l;if(t.serverCache.isFullyInitialized())l=vp(r,Kd(t));else{var f=t.serverCache.getNode();Xi(f instanceof ld,"serverChildren would be complete if leaf node"),l=yp(r,f)}u=e.filter.updateFullNode(c,l,a)}else{var h=_h(n),d=_p(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(u=null!=d?e.filter.updateChild(c,h,d,wh(n),s,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,ld.EMPTY_NODE,wh(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=vp(r,Kd(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=gp(r,kh()),Hd(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=gp(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(Ch(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return Ip(e,t,n,s.getNode().getChild(n),i,a,u,o);if(Ch(n)){var c=new $d(null);return s.getNode().forEachChild(Vh,(function(e,t){c=c.set(new gh(e),t)})),Op(e,t,n,c,i,a,u,o)}return t}var l=new $d(null);return r.foreach((function(e,t){var r=Th(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),Op(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==Od.LISTEN_COMPLETE)throw Ji("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=Wd(t,a.getNode(),a.isFullyInitialized()||Ch(n),a.isFiltered());return Cp(e,o,n,r,Sp,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Gd(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(md(Gd(t)))}}(t,a,f),{viewCache:a,changes:f}}function Cp(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=gp(r,n))return t;if(Ch(n))if(Xi(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=Kd(t),l=yp(r,c instanceof ld?c:ld.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=vp(r,Kd(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=_h(n);if(".priority"===h){Xi(1===bh(n),"Can't have a priority with additional path components");var d=s.getNode(),p=mp(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=wh(n);if(s.isCompleteForChild(h)){u=t.serverCache.getNode();var m=mp(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(h).updateChild(y,m):s.getNode().getImmediateChild(h)}else v=_p(r,h,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),h,v,y,i,a):s.getNode()}}return Hd(t,o,s.isFullyInitialized()||Ch(n),e.filter.filtersNodes())}function Ip(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(Ch(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),f,null)}else{var h=_h(n);if(!c.isCompleteForPath(n)&&bh(n)>1)return t;var d=wh(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);s=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,Sp,null)}var v=Wd(t,s,c.isFullyInitialized()||Ch(n),l.filtersNodes());return Cp(e,v,n,i,new xp(i,v,a),u)}function Np(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new xp(i,t,a);if(Ch(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=Hd(t,s,!0,e.filter.filtersNodes());else{var f=_h(n);if(".priority"===f)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=Hd(t,s,c.isFullyInitialized(),c.isFiltered());else{var h,d=wh(n),p=c.getNode().getImmediateChild(f);if(Ch(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===Eh(d)&&v.getChild(xh(d)).isEmpty()?v:v.updateChild(d,r):ld.EMPTY_NODE}if(p.equals(h))u=t;else u=Hd(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function Ap(e,t){return e.eventCache.isCompleteForChild(t)}function Rp(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Op(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=Ch(n)?r:new $d(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=Rp(0,t.serverCache.getNode().getImmediateChild(n),r);c=Ip(e,c,new gh(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!s){var f=Rp(0,t.serverCache.getNode().getImmediateChild(n),r);c=Ip(e,c,new gh(n),f,i,a,o,u)}})),c}var Pp,Dp=function(){function e(t,n){(0,Tr.Z)(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new bd(i.getIndex()),o=(r=i).loadsAllData()?new bd(r.getIndex()):r.hasLimit()?new Ed(r):new wd(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(ld.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(ld.EMPTY_NODE,s.getNode(),null),f=new Vd(c,u.isFullyInitialized(),a.filtersNodes()),h=new Vd(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=Bd(h,f),this.eventGenerator_=new qd(this.query_)}return(0,Cr.Z)(e,[{key:"query",get:function(){return this.query_}}]),e}();function Lp(e,t){var n=Kd(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Ch(t)&&!n.getImmediateChild(_h(t)).isEmpty())?n.getChild(t):null}function Mp(e){return 0===e.eventRegistrations_.length}function Fp(e,t,n){var r=[];if(n){Xi(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function Up(e,t,n,r){t.type===Od.MERGE&&null!==t.source.queryId&&(Xi(Kd(e.viewCache_),"We should always have a full cache before handling merges"),Xi(Gd(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=Tp(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,Xi(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Xi(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Xi(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,Zp(e,u.changes,u.viewCache.eventCache.getNode(),null)}function Zp(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),zd(e,i,"child_removed",t,r,n),zd(e,i,"child_added",t,r,n),zd(e,i,"child_moved",a,r,n),zd(e,i,"child_changed",t,r,n),zd(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var jp,Vp=(0,Cr.Z)((function e(){(0,Tr.Z)(this,e),this.views=new Map}));function qp(e){return 0===e.views.size}function zp(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Xi(null!=a,"SyncTree gave us an op for an invalid query."),Up(a,t,n,r)}var o,u=[],s=Gi(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(Up(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function Bp(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=vp(n,i?r:null),s=!1;u?s=!0:r instanceof ld?(u=yp(n,r),s=!1):(u=ld.EMPTY_NODE,s=!1);var c=Bd(new Vd(u,s,!1),new Vd(r,i,!1));return new Dp(t,c)}return o}function Hp(e,t,n,r,i,a){var o=Bp(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(id,(function(e,t){r.push(gd(e,t))})),n.isFullyInitialized()&&r.push(md(n.getNode())),Zp(e,r,n.getNode(),t)}(o,n)}function Wp(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=Yp(e);if("default"===i){var s,c=Gi(e.views.entries());try{for(c.s();!(s=c.n()).done;){var l=(0,ti.Z)(s.value,2),f=l[0],h=l[1];o=o.concat(Fp(h,n,r)),Mp(h)&&(e.views.delete(f),h.query._queryParams.loadsAllData()||a.push(h.query))}}catch(p){c.e(p)}finally{c.f()}}else{var d=e.views.get(i);d&&(o=o.concat(Fp(d,n,r)),Mp(d)&&(e.views.delete(i),d.query._queryParams.loadsAllData()||a.push(d.query)))}return u&&!Yp(e)&&a.push(new(Xi(Pp,"Reference.ts has not been loaded"),Pp)(t._repo,t._path)),{removed:a,events:o}}function Gp(e){var t,n=[],r=Gi(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function Kp(e,t){var n,r=null,i=Gi(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Lp(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function Qp(e,t){if(t._queryParams.loadsAllData())return Xp(e);var n=t._queryIdentifier;return e.views.get(n)}function $p(e,t){return null!=Qp(e,t)}function Yp(e){return null!=Xp(e)}function Xp(e){var t,n=Gi(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var Jp=1,ev=(0,Cr.Z)((function e(t){(0,Tr.Z)(this,e),this.listenProvider_=t,this.syncPointTree_=new $d(null),this.pendingWriteTree_={visibleWrites:Yd.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function tv(e,t,n,r,i){return function(e,t,n,r,i){Xi(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Xd(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?cv(e,new Zd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function nv(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=cp(e.pendingWriteTree_,t),i=lp(e.pendingWriteTree_,t);if(i){var a=new $d(null);return null!=r.snap?a=a.set(kh(),!0):Zf(r.children,(function(e){a=a.set(new gh(e),!0)})),cv(e,new Fd(r.path,a,n))}return[]}function rv(e,t,n){return cv(e,new Zd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function iv(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),u=[];if(o&&("default"===t._queryIdentifier||$p(o,t))){var s=Wp(o,t,n,r);qp(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=s.removed;if(u=s.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),f=e.syncPointTree_.findOnPath(a,(function(e,t){return Yp(t)}));if(l&&!f){var h=e.syncPointTree_.subtree(a);if(!h.isEmpty())for(var d=gv(h),p=0;p<d.length;++p){var v=d[p],y=v.query,m=hv(e,v);e.listenProvider_.startListening(kv(y),dv(e,y),m.hashFn,m.onComplete)}}if(!f&&c.length>0&&!r)if(l){var g=null;e.listenProvider_.stopListening(kv(t),g)}else c.forEach((function(t){var n=e.queryToTagMap.get(pv(t));e.listenProvider_.stopListening(kv(t),n)}))}_v(e,c)}return u}function av(e,t,n,r){var i=vv(e,r);if(null!=i){var a=yv(i),o=a.path,u=a.queryId,s=Ih(o,t);return mv(e,o,new Zd(Ld(u),s,n))}return[]}function ov(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=Ih(e,i);a=a||Kp(t,n),o=o||Yp(t)}));var u,s=e.syncPointTree_.get(i);if(s?(o=o||Yp(s),a=a||Kp(s,kh())):(s=new Vp,e.syncPointTree_=e.syncPointTree_.set(i,s)),null!=a)u=!0;else{u=!1,a=ld.EMPTY_NODE;var c=e.syncPointTree_.subtree(i);c.foreachChild((function(e,t){var n=Kp(t,kh());n&&(a=a.updateImmediateChild(e,n))}))}var l=$p(s,t);if(!l&&!t._queryParams.loadsAllData()){var f=pv(t);Xi(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");var h=bv();e.queryToTagMap.set(f,h),e.tagToQueryMap.set(h,f)}var d=sp(e.pendingWriteTree_,i),p=Hp(s,t,n,d,a,u);if(!l&&!o&&!r){var v=Qp(s,t);p=p.concat(wv(e,t,v))}return p}function uv(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Kp(n,Ih(e,t));if(r)return r}));return pp(r,t,i,n,!0)}function sv(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=Ih(e,n);r=r||Kp(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||Kp(i,kh()):(i=new Vp,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new Vd(r,!0,!1):null;return function(e){return Gd(e.viewCache_)}(Bp(i,t,sp(e.pendingWriteTree_,t._path),a?o.getNode():ld.EMPTY_NODE,a))}function cv(e,t){return lv(t,e.syncPointTree_,null,sp(e.pendingWriteTree_,kh()))}function lv(e,t,n,r){if(Ch(e.path))return fv(e,t,n,r);var i=t.get(kh());null==n&&null!=i&&(n=Kp(i,kh()));var a=[],o=_h(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=bp(r,o);a=a.concat(lv(u,s,c,l))}return i&&(a=a.concat(zp(i,e,r,n))),a}function fv(e,t,n,r){var i=t.get(kh());null==n&&null!=i&&(n=Kp(i,kh()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=bp(r,t),s=e.operationForChild(t);s&&(a=a.concat(fv(s,i,o,u)))})),i&&(a=a.concat(zp(i,e,r,n))),a}function hv(e,t){var n=t.query,r=dv(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||ld.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=vv(e,n);if(r){var i=yv(r),a=i.path,o=i.queryId,u=Ih(a,t);return mv(e,a,new Ud(Ld(o),u))}return[]}(e,n._path,r):function(e,t){return cv(e,new Ud({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return iv(e,n,null,i)}}}function dv(e,t){var n=pv(t);return e.queryToTagMap.get(n)}function pv(e){return e._path.toString()+"$"+e._queryIdentifier}function vv(e,t){return e.tagToQueryMap.get(t)}function yv(e){var t=e.indexOf("$");return Xi(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new gh(e.substr(0,t))}}function mv(e,t,n){var r=e.syncPointTree_.get(t);return Xi(r,"Missing sync point for query tag that we're tracking"),zp(r,n,sp(e.pendingWriteTree_,t),null)}function gv(e){return e.fold((function(e,t,n){if(t&&Yp(t))return[Xp(t)];var r=[];return t&&(r=Gp(t)),Zf(n,(function(e,t){r=r.concat(t)})),r}))}function kv(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Xi(jp,"Reference.ts has not been loaded"),jp)(e._repo,e._path):e}function _v(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=pv(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}function bv(){return Jp++}function wv(e,t,n){var r=t._path,i=dv(e,t),a=hv(e,n),o=e.listenProvider_.startListening(kv(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)Xi(!Yp(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!Ch(e)&&t&&Yp(t))return[Xp(t).query];var r=[];return t&&(r=r.concat(Gp(t).map((function(e){return e.query})))),Zf(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(kv(l),dv(e,l))}return o}var Ev=function(){function e(t){(0,Tr.Z)(this,e),this.node_=t}return(0,Cr.Z)(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),Sv=function(){function e(t,n){(0,Tr.Z)(this,e),this.syncTree_=t,this.path_=n}return(0,Cr.Z)(e,[{key:"getImmediateChild",value:function(t){var n=Th(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return uv(this.syncTree_,this.path_)}}]),e}(),xv=function(e,t,n){return e&&"object"===typeof e?(Xi(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Tv(e[".sv"],t,n):"object"===typeof e[".sv"]?Cv(e[".sv"],t):void Xi(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Tv=function(e,t,n){if("timestamp"===e)return n.timestamp;Xi(!1,"Unexpected server value: "+e)},Cv=function(e,t,n){e.hasOwnProperty("increment")||Xi(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Xi(!1,"Unexpected increment value: "+r);var i=t.node();if(Xi(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},Iv=function(e,t,n,r){return Av(t,new Sv(n,e),r)},Nv=function(e,t,n){return Av(e,new Ev(t),n)};function Av(e,t,n){var r,i=e.getPriority().val(),a=xv(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=xv(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new ed(u,hd(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new ed(a))),s.forEachChild(id,(function(e,i){var a=Av(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var Rv=(0,Cr.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};(0,Tr.Z)(this,e),this.name=t,this.parent=n,this.node=r}));function Ov(e,t){for(var n=t instanceof gh?t:new gh(t),r=e,i=_h(n);null!==i;){var a=Ca(r.node.children,i)||{children:{},childCount:0};r=new Rv(i,r,a),i=_h(n=wh(n))}return r}function Pv(e){return e.node.value}function Dv(e,t){e.node.value=t,Zv(e)}function Lv(e){return e.node.childCount>0}function Mv(e,t){Zf(e.node.children,(function(n,r){t(new Rv(n,e,r))}))}function Fv(e,t,n,r){n&&!r&&t(e),Mv(e,(function(e){Fv(e,t,!0,r)})),n&&r&&t(e)}function Uv(e){return new gh(null===e.parent?e.name:Uv(e.parent)+"/"+e.name)}function Zv(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Pv(e)&&!Lv(e)}(n),i=Ta(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Zv(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Zv(e))}(e.parent,e.name,e)}var jv=/[\[\].#$\/\u0000-\u001F\u007F]/,Vv=/[\[\].#$\u0000-\u001F\u007F]/,qv=10485760,zv=function(e){return"string"===typeof e&&0!==e.length&&!jv.test(e)},Bv=function(e){return"string"===typeof e&&0!==e.length&&!Vv.test(e)},Hv=function(e,t,n,r){r&&void 0===t||Wv(Ua(e,"value"),t,n)},Wv=function e(t,n,r){var i=r instanceof gh?new Rh(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Ph(i));if("function"===typeof n)throw new Error(t+"contains a function "+Ph(i)+" with contents = "+n.toString());if(Rf(n))throw new Error(t+"contains "+n.toString()+" "+Ph(i));if("string"===typeof n&&n.length>qv/3&&Za(n)>qv)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+Ph(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Zf(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!zv(n)))throw new Error(t+" contains an invalid key ("+n+") "+Ph(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=Za(s),Oh(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Za(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Ph(i)+" in addition to actual children.")}},Gv=function(e,t,n,r){if((!r||void 0!==n)&&!Bv(n))throw new Error(Ua(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Kv=function(e,t){if(".info"===_h(t))throw new Error(e+" failed = Can't modify data under /.info/")},Qv=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!zv(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Bv(e)}(n))throw new Error(Ua(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},$v=(0,Cr.Z)((function e(){(0,Tr.Z)(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Yv(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Nh(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Xv(e,t,n){Yv(e,n),Jv(e,(function(e){return Ah(e,t)||Ah(t,e)}))}function Jv(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(ey(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function ey(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Ef&&Tf("event: "+n.toString()),Hf(r)}}}var ty="repo_interrupt",ny=function(){function e(t,n,r,i){(0,Tr.Z)(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $v,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Nd(),this.transactionQueueTree_=new Rv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return(0,Cr.Z)(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function ry(e,t,n){if(e.stats_=ah(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Cd(e.repoInfo_,(function(t,n,r,i){oy(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return uy(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Sa(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Mh(e.repoInfo_,t,(function(t,n,r,i){oy(e,t,n,r,i)}),(function(t){uy(e,t)}),(function(t){!function(e,t){Zf(t,(function(t,n){sy(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return ih[n]||(ih[n]=t()),ih[n]}(e.repoInfo_,(function(){return new Dd(e.stats_,e.server_)})),e.infoData_=new Id,e.infoSyncTree_=new ev({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=rv(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),sy(e,"connected",!1),e.serverSyncTree_=new ev({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);Xv(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function iy(e){var t=e.infoData_.getNode(new gh(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ay(e){return(t=(t={timestamp:iy(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function oy(e,t,n,r,i){e.dataUpdateCount++;var a=new gh(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=Na(n,(function(e){return hd(e)}));o=function(e,t,n,r){var i=vv(e,r);if(i){var a=yv(i),o=a.path,u=a.queryId,s=Ih(o,t),c=$d.fromObject(n);return mv(e,o,new jd(Ld(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=hd(n);o=av(e.serverSyncTree_,a,s,i)}else if(r){var c=Na(n,(function(e){return hd(e)}));o=function(e,t,n){var r=$d.fromObject(n);return cv(e,new jd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=hd(n);o=rv(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=my(e,a)),Xv(e.eventQueue_,f,o)}function uy(e,t){sy(e,"connected",t),!1===t&&function(e){hy(e,"onDisconnectEvents");var t=ay(e),n=Nd();Rd(e.onDisconnect_,kh(),(function(r,i){var a=Iv(r,i,e.serverSyncTree_,t);Ad(n,r,a)}));var r=[];Rd(n,kh(),(function(t,n){r=r.concat(rv(e.serverSyncTree_,t,n));var i=wy(e,t);my(e,i)})),e.onDisconnect_=Nd(),Xv(e.eventQueue_,kh(),r)}(e)}function sy(e,t,n){var r=new gh("/.info/"+t),i=hd(n);e.infoData_.updateSnapshot(r,i);var a=rv(e.infoSyncTree_,r,i);Xv(e.eventQueue_,r,a)}function cy(e){return e.nextWriteId_++}function ly(e,t,n,r,i){hy(e,"set",{path:t.toString(),value:n,priority:r});var a=ay(e),o=hd(n,r),u=uv(e.serverSyncTree_,t),s=Nv(o,u,a),c=cy(e),l=tv(e.serverSyncTree_,t,s,c,!0);Yv(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||Af("set at "+t+" failed: "+n);var o=nv(e.serverSyncTree_,c,!a);Xv(e.eventQueue_,t,o),dy(e,i,n,r)}));var f=wy(e,t);my(e,f),Xv(e.eventQueue_,f,[])}function fy(e){e.persistentConnection_&&e.persistentConnection_.interrupt(ty)}function hy(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Tf.apply(void 0,[t].concat(r))}function dy(e,t,n,r){t&&Hf((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function py(e,t,n){return uv(e.serverSyncTree_,t,n)||ld.EMPTY_NODE}function vy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||by(e,t),Pv(t)){var n=ky(e,t);Xi(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&yy(e,Uv(t),n)}else Lv(t)&&Mv(t,(function(t){vy(e,t)}))}function yy(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=py(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];Xi(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=Ih(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){hy(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(nv(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);by(e,Ov(e.transactionQueueTree_,t)),vy(e,e.transactionQueueTree_),Xv(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)Hf(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{Af("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}my(e,t)}}),o)}function my(e,t){var n=gy(e,t),r=Uv(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s=t[a],c=Ih(n,s.path),l=!1,f=void 0;if(Xi(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,f=s.abortReason,i=i.concat(nv(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)l=!0,f="maxretry",i=i.concat(nv(e.serverSyncTree_,s.currentWriteId,!0));else{var h=py(e,s.path,o);s.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){Wv("transaction failed: Data returned ",d,s.path);var p=hd(d);"object"===typeof d&&null!=d&&Ta(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=s.currentWriteId,y=ay(e),m=Nv(p,h,y);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=m,s.currentWriteId=cy(e),o.splice(o.indexOf(v),1),i=(i=i.concat(tv(e.serverSyncTree_,s.path,m,s.currentWriteId,s.applyLocally))).concat(nv(e.serverSyncTree_,v,!0))}else l=!0,f="nodata",i=i.concat(nv(e.serverSyncTree_,s.currentWriteId,!0))}Xv(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===f?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(f),!1,null)}))))},s=0;s<t.length;s++)u(s);by(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)Hf(r[c]);vy(e,e.transactionQueueTree_)}(e,ky(e,n),r),r}function gy(e,t){var n,r=e.transactionQueueTree_;for(n=_h(t);null!==n&&void 0===Pv(r);)r=Ov(r,n),n=_h(t=wh(t));return r}function ky(e,t){var n=[];return _y(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function _y(e,t,n){var r=Pv(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Mv(t,(function(t){_y(e,t,n)}))}function by(e,t){var n=Pv(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Dv(t,n.length>0?n:void 0)}Mv(t,(function(t){by(e,t)}))}function wy(e,t){var n=Uv(gy(e,t)),r=Ov(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Ey(e,t)})),Ey(e,r),Fv(r,(function(t){Ey(e,t)})),n}function Ey(e,t){var n=Pv(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Xi(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Xi(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(nv(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Dv(t,void 0):n.length=a+1,Xv(e.eventQueue_,Uv(t),i);for(var u=0;u<r.length;u++)Hf(r[u])}}var Sy=function(e,t){var n=xy(e),r=n.namespace;"firebase.com"===n.domain&&Nf(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Nf("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Af("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new eh(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new gh(n.pathString)}},xy=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=Gi(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Af("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},Ty=function(){function e(t,n,r,i){(0,Tr.Z)(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return(0,Cr.Z)(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+Sa(this.snapshot.exportVal())}}]),e}(),Cy=function(){function e(t,n,r){(0,Tr.Z)(this,e),this.eventRegistration=t,this.error=n,this.path=r}return(0,Cr.Z)(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),Iy=function(){function e(t,n){(0,Tr.Z)(this,e),this.snapshotCallback=t,this.cancelCallback=n}return(0,Cr.Z)(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return Xi(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),Ny=function(){function e(t,n,r,i){(0,Tr.Z)(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return(0,Cr.Z)(e,[{key:"key",get:function(){return Ch(this._path)?null:Eh(this._path)}},{key:"ref",get:function(){return new Ay(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Td(this._queryParams),t=Ff(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Td(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=ja(t))instanceof e))return!1;var n=this._repo===t._repo,r=Nh(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var Ay=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r){return(0,Tr.Z)(this,n),t.call(this,e,r,new Sd,!1)}return(0,Cr.Z)(n,[{key:"parent",get:function(){var e=xh(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(Ny),Ry=function(){function e(t,n,r){(0,Tr.Z)(this,e),this._node=t,this.ref=n,this._index=r}return(0,Cr.Z)(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new gh(t),r=Py(this.ref,t);return new e(this._node.getChild(n),r,id)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,Py(n.ref,r),id))}))}},{key:"hasChild",value:function(e){var t=new gh(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function Oy(e,t){return(e=ja(e))._checkNotDeleted("ref"),void 0!==t?Py(e._root,t):e._root}function Py(e,t){var n,r,i,a;return null===_h((e=ja(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Gv(n,r,i,a)):Gv("child","path",t,!1),new Ay(e._repo,Th(e._path,t))}function Dy(e,t){e=ja(e),Kv("set",e._path),Hv("set",t,e._path,!1);var n=new ma;return ly(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function Ly(e){e=ja(e);var t=new Iy((function(){})),n=new My(t);return function(e,t,n){var r=sv(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=hd(r).withIndex(t._queryParams.getIndex());if(ov(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=rv(e.serverSyncTree_,t._path,a);else{var o=dv(e.serverSyncTree_,t);i=av(e.serverSyncTree_,t._path,a,o)}return Xv(e.eventQueue_,t._path,i),iv(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return hy(e,"get for query "+Sa(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new Ry(t,new Ay(e._repo,e._path),e._queryParams.getIndex())}))}var My=function(){function e(t){(0,Tr.Z)(this,e),this.callbackContext=t}return(0,Cr.Z)(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new Ty("value",this,new Ry(e.snapshotNode,new Ay(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new Cy(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}();function Fy(e){for(var t=ja(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];t=u._apply(t)}return t}!function(e){Xi(!Pp,"__referenceConstructor has already been defined"),Pp=e}(Ay),function(e){Xi(!jp,"__referenceConstructor has already been defined"),jp=e}(Ay);var Uy={},Zy=!1;function jy(e,t,n,r){e.repoInfo_=new eh("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function Vy(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Nf("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Tf("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=Sy(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/messenger",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=Sy(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new Qf(Qf.OWNER):new Kf(e.name,e.options,t);Qv("Invalid Firebase Database URL",u),Ch(u.path)||Nf("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=Uy[t.name];i||(i={},Uy[t.name]=i);var a=i[e.toURLString()];a&&Nf("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new ny(e,Zy,n,r),i[e.toURLString()]=a,a}(s,e,l,new Gf(e.name,n));return new qy(f,e)}var qy=function(){function e(t,n){(0,Tr.Z)(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return(0,Cr.Z)(e,[{key:"_repo",get:function(){return this._instanceStarted||(ry(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Ay(this._repo,kh())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=Uy[t];n&&n[e.key]===e||Nf("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),fy(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Nf("Cannot call "+e+" on a deleted database.")}}]),e}();function zy(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Do(),t=arguments.length>1?arguments[1]:void 0,n=Io(e,"database").getImmediate({identifier:t}),r=pa("database");return r&&By.apply(void 0,[n].concat((0,G.Z)(r))),n}function By(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=ja(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Nf("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Nf('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Qf(Qf.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:ga(r.mockUserToken,e.app.options.projectId);a=new Qf(o)}jy(i,t,n,a)}Mh.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Mh.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){df=e}(Oo),Co(new Va("database",(function(e,t){var n=t.instanceIdentifier;return Vy(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Lo(ff,hf,e),Lo(ff,hf,"esm2017")}();var Hy,Wy=n(5647),Gy="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Ky={},Qy=Qy||{},$y=Gy||self;function Yy(){}function Xy(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Jy(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var em="closure_uid_"+(1e9*Math.random()>>>0),tm=0;function nm(e,t,n){return e.call.apply(e.bind,arguments)}function rm(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function im(e,t,n){return(im=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?nm:rm).apply(null,arguments)}function am(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function om(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function um(){this.s=this.s,this.o=this.o}um.prototype.s=!1,um.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,em)&&e[em]||(e[em]=++tm))},um.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var sm=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function cm(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function lm(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Xy(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function fm(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}fm.prototype.h=function(){this.defaultPrevented=!0};var hm=function(){if(!$y.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{$y.addEventListener("test",Yy,t),$y.removeEventListener("test",Yy,t)}catch(n){}return e}();function dm(e){return/^[\s\xa0]*$/.test(e)}var pm=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function vm(e,t){return e<t?-1:e>t?1:0}function ym(){var e=$y.navigator;return e&&(e=e.userAgent)?e:""}function mm(e){return-1!=ym().indexOf(e)}function gm(e){return gm[" "](e),e}gm[" "]=Yy;var km,_m=mm("Opera"),bm=mm("Trident")||mm("MSIE"),wm=mm("Edge"),Em=wm||bm,Sm=mm("Gecko")&&!(-1!=ym().toLowerCase().indexOf("webkit")&&!mm("Edge"))&&!(mm("Trident")||mm("MSIE"))&&!mm("Edge"),xm=-1!=ym().toLowerCase().indexOf("webkit")&&!mm("Edge");function Tm(){var e=$y.document;return e?e.documentMode:void 0}e:{var Cm="",Im=function(){var e=ym();return Sm?/rv:([^\);]+)(\)|;)/.exec(e):wm?/Edge\/([\d\.]+)/.exec(e):bm?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):xm?/WebKit\/(\S+)/.exec(e):_m?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Im&&(Cm=Im?Im[1]:""),bm){var Nm=Tm();if(null!=Nm&&Nm>parseFloat(Cm)){km=String(Nm);break e}}km=Cm}var Am,Rm={};function Om(){return function(e){var t=Rm;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=pm(String(km)).split("."),n=pm("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=vm(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||vm(0==a[2].length,0==o[2].length)||vm(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if($y.document&&bm){var Pm=Tm();Am=Pm||(parseInt(km,10)||void 0)}else Am=void 0;var Dm=Am;function Lm(e,t){if(fm.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Sm){e:{try{gm(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Mm[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Lm.X.h.call(this)}}om(Lm,fm);var Mm={2:"touch",3:"pen",4:"mouse"};Lm.prototype.h=function(){Lm.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Fm="closure_listenable_"+(1e6*Math.random()|0),Um=0;function Zm(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Um,this.ba=this.ea=!1}function jm(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Vm(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function qm(e){var t={};for(var n in e)t[n]=e[n];return t}var zm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bm(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<zm.length;a++)n=zm[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Hm(e){this.src=e,this.g={},this.h=0}function Wm(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=sm(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(jm(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Gm(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Hm.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Gm(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Zm(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Km="closure_lm_"+(1e6*Math.random()|0),Qm={};function $m(e,t,n,r,i){if(r&&r.once)return Xm(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)$m(e,t[a],n,r,i);return null}return n=ag(n),e&&e[Fm]?e.N(t,n,Jy(r)?!!r.capture:!!r,i):Ym(e,t,n,!1,r,i)}function Ym(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Jy(i)?!!i.capture:!!i,u=rg(e);if(u||(e[Km]=u=new Hm(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ng;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)hm||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(tg(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Xm(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Xm(e,t[a],n,r,i);return null}return n=ag(n),e&&e[Fm]?e.O(t,n,Jy(r)?!!r.capture:!!r,i):Ym(e,t,n,!0,r,i)}function Jm(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Jm(e,t[a],n,r,i);else r=Jy(r)?!!r.capture:!!r,n=ag(n),e&&e[Fm]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Gm(a=e.g[t],n,r,i))&&(jm(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=rg(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Gm(t,n,r,i)),(n=-1<e?t[e]:null)&&eg(n))}function eg(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Fm])Wm(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(tg(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=rg(t))?(Wm(n,e),0==n.h&&(n.src=null,t[Km]=null)):jm(e)}}}function tg(e){return e in Qm?Qm[e]:Qm[e]="on"+e}function ng(e,t){if(e.ba)e=!0;else{t=new Lm(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&eg(e),e=n.call(r,t)}return e}function rg(e){return(e=e[Km])instanceof Hm?e:null}var ig="__closure_events_fn_"+(1e9*Math.random()>>>0);function ag(e){return"function"===typeof e?e:(e[ig]||(e[ig]=function(t){return e.handleEvent(t)}),e[ig])}function og(){um.call(this),this.i=new Hm(this),this.P=this,this.I=null}function ug(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new fm(t,e);else if(t instanceof fm)t.target=t.target||e;else{var i=t;Bm(t=new fm(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=sg(o,r,!0,t)&&i}if(i=sg(o=t.g=e,r,!0,t)&&i,i=sg(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=sg(o=t.g=n[a],r,!1,t)&&i}function sg(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Wm(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}om(og,um),og.prototype[Fm]=!0,og.prototype.removeEventListener=function(e,t,n,r){Jm(this,e,t,n,r)},og.prototype.M=function(){if(og.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)jm(n[r]);delete t.g[e],t.h--}}this.I=null},og.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},og.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var cg=$y.JSON.stringify;function lg(){var e=gg,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var fg,hg=function(){function e(){(0,Tr.Z)(this,e),this.h=this.g=null}return(0,Cr.Z)(e,[{key:"add",value:function(e,t){var n=dg.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),dg=new(function(){function e(t,n){(0,Tr.Z)(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return(0,Cr.Z)(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new pg}),(function(e){return e.reset()})),pg=function(){function e(){(0,Tr.Z)(this,e),this.next=this.g=this.h=null}return(0,Cr.Z)(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function vg(e){$y.setTimeout((function(){throw e}),0)}function yg(e,t){fg||function(){var e=$y.Promise.resolve(void 0);fg=function(){e.then(kg)}}(),mg||(fg(),mg=!0),gg.add(e,t)}var mg=!1,gg=new hg;function kg(){for(var e;e=lg();){try{e.h.call(e.g)}catch(n){vg(n)}var t=dg;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}mg=!1}function _g(e,t){og.call(this),this.h=e||1,this.g=t||$y,this.j=im(this.lb,this),this.l=Date.now()}function bg(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function wg(e,t,n){if("function"===typeof e)n&&(e=im(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=im(e.handleEvent,e)}return 2147483647<Number(t)?-1:$y.setTimeout(e,t||0)}function Eg(e){e.g=wg((function(){e.g=null,e.i&&(e.i=!1,Eg(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}om(_g,og),(Hy=_g.prototype).ca=!1,Hy.R=null,Hy.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ug(this,"tick"),this.ca&&(bg(this),this.start()))}},Hy.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Hy.M=function(){_g.X.M.call(this),bg(this),delete this.g};var Sg=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r){var i;return(0,Tr.Z)(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return(0,Cr.Z)(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Eg(this)}},{key:"M",value:function(){qi((0,ji.Z)(n.prototype),"M",this).call(this),this.g&&($y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(um);function xg(e){um.call(this),this.h=e,this.g={}}om(xg,um);var Tg=[];function Cg(e,t,n,r){Array.isArray(n)||(n&&(Tg[0]=n.toString()),n=Tg);for(var i=0;i<n.length;i++){var a=$m(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ig(e){Vm(e.g,(function(e,t){this.g.hasOwnProperty(t)&&eg(e)}),e),e.g={}}function Ng(){this.g=!0}function Ag(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return cg(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}xg.prototype.M=function(){xg.X.M.call(this),Ig(this)},xg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ng.prototype.Aa=function(){this.g=!1},Ng.prototype.info=function(){};var Rg={},Og=null;function Pg(){return Og=Og||new og}function Dg(e){fm.call(this,Rg.Pa,e)}function Lg(e){var t=Pg();ug(t,new Dg(t))}function Mg(e,t){fm.call(this,Rg.STAT_EVENT,e),this.stat=t}function Fg(e){var t=Pg();ug(t,new Mg(t,e))}function Ug(e,t){fm.call(this,Rg.Qa,e),this.size=t}function Zg(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return $y.setTimeout((function(){e()}),t)}Rg.Pa="serverreachability",om(Dg,fm),Rg.STAT_EVENT="statevent",om(Mg,fm),Rg.Qa="timingevent",om(Ug,fm);var jg={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Vg={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function qg(){}function zg(e){return e.h||(e.h=e.i())}function Bg(){}qg.prototype.h=null;var Hg,Wg={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Gg(){fm.call(this,"d")}function Kg(){fm.call(this,"c")}function Qg(){}function $g(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new xg(this),this.O=Xg,e=Em?125:void 0,this.T=new _g(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Yg}function Yg(){this.i=null,this.g="",this.h=!1}om(Gg,fm),om(Kg,fm),om(Qg,qg),Qg.prototype.g=function(){return new XMLHttpRequest},Qg.prototype.i=function(){return{}},Hg=new Qg;var Xg=45e3,Jg={},ek={};function tk(e,t,n){e.K=1,e.v=_k(vk(t)),e.s=n,e.P=!0,nk(e,null)}function nk(e,t){e.F=Date.now(),ok(e),e.A=vk(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Pk(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Yg,e.g=D_(e.l,n?t:null,!e.s),0<e.N&&(e.L=new Sg(im(e.La,e,e.g),e.N)),Cg(e.S,e.g,"readystatechange",e.ib),t=e.H?qm(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Lg(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function rk(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function ik(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=ak(e,n))==ek){4==t&&(e.o=4,Fg(14),i=!1),Ag(e.j,e.m,null,"[Incomplete Response]");break}if(r==Jg){e.o=4,Fg(15),Ag(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ag(e.j,e.m,r,null),fk(e,r)}rk(e)&&r!=ek&&r!=Jg&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Fg(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),T_(t),t.K=!0,Fg(11))):(Ag(e.j,e.m,n,"[Invalid Chunked Response]"),lk(e),ck(e))}function ak(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ek:(n=Number(t.substring(n,r)),isNaN(n)?Jg:(r+=1)+n>t.length?ek:(t=t.substr(r,n),e.C=r+n,t))}function ok(e){e.V=Date.now()+e.O,uk(e,e.O)}function uk(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Zg(im(e.gb,e),t)}function sk(e){e.B&&($y.clearTimeout(e.B),e.B=null)}function ck(e){0==e.l.G||e.I||N_(e.l,e)}function lk(e){sk(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,bg(e.T),Ig(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function fk(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Vk(n.h,e)))if(!e.J&&Vk(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;I_(n),g_(n)}x_(n),Fg(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Zg(im(n.cb,n),6e3));if(1>=jk(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else R_(n,11)}else if((e.J||n.g==e)&&I_(n),!dm(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(qk(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,kk(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=P_(r,r.H?r.ka:null,r.V),d.J){zk(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(sk(p),ok(p)),r.g=d}else S_(r);0<n.i.length&&__(n)}else"stop"!=a[0]&&"close"!=a[0]||R_(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?R_(n,7):m_(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Lg()}catch(a){}}function hk(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Xy(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Xy(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Xy(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Hy=$g.prototype).setTimeout=function(e){this.O=e},Hy.ib=function(e){e=e.target;var t=this.L;t&&3==f_(e)?t.l():this.La(e)},Hy.La=function(e){try{if(e==this.g)e:{var t=f_(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||Em||this.g&&(this.h.h||this.g.fa()||h_(this.g)))){this.I||4!=t||7==n||Lg(),sk(this);var r=this.g.aa();this.Y=r;t:if(rk(this)){var i=h_(this.g);e="";var a=i.length,o=4==f_(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){lk(this),ck(this);var u="";break t}this.h.i=new $y.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dm(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Fg(12),lk(this),ck(this);break e}Ag(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,fk(this,r)}this.P?(ik(this,t,u),Em&&this.i&&3==t&&(Cg(this.S,this.T,"tick",this.hb),this.T.start())):(Ag(this.j,this.m,u,null),fk(this,u)),4==t&&lk(this),this.i&&!this.I&&(4==t?N_(this.l,this):(this.i=!1,ok(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Fg(12)):(this.o=0,Fg(13)),lk(this),ck(this)}}}catch(t){}},Hy.hb=function(){if(this.g){var e=f_(this.g),t=this.g.fa();this.C<t.length&&(sk(this),ik(this,e,t),this.i&&4!=e&&ok(this))}},Hy.cancel=function(){this.I=!0,lk(this)},Hy.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Lg(),Fg(17)),lk(this),this.o=2,ck(this)):uk(this,this.V-e)};var dk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pk(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof pk){this.h=void 0!==t?t:e.h,yk(this,e.j),this.s=e.s,this.g=e.g,mk(this,e.m),this.l=e.l,t=e.i;var n=new Nk;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),gk(this,n),this.o=e.o}else e&&(n=String(e).match(dk))?(this.h=!!t,yk(this,n[1]||"",!0),this.s=bk(n[2]||""),this.g=bk(n[3]||"",!0),mk(this,n[4]),this.l=bk(n[5]||"",!0),gk(this,n[6]||"",!0),this.o=bk(n[7]||"")):(this.h=!!t,this.i=new Nk(null,this.h))}function vk(e){return new pk(e)}function yk(e,t,n){e.j=n?bk(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function mk(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function gk(e,t,n){t instanceof Nk?(e.i=t,function(e,t){t&&!e.j&&(Ak(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Rk(this,t),Pk(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=wk(t,Ck)),e.i=new Nk(t,e.h))}function kk(e,t,n){e.i.set(t,n)}function _k(e){return kk(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function bk(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function wk(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ek),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ek(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}pk.prototype.toString=function(){var e=[],t=this.j;t&&e.push(wk(t,Sk,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(wk(t,Sk,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(wk(n,"/"==n.charAt(0)?Tk:xk,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",wk(n,Ik)),e.join("")};var Sk=/[#\/\?@]/g,xk=/[#\?:]/g,Tk=/[#\?]/g,Ck=/[#\?@]/g,Ik=/#/g;function Nk(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ak(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Rk(e,t){Ak(e),t=Dk(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ok(e,t){return Ak(e),t=Dk(e,t),e.g.has(t)}function Pk(e,t,n){Rk(e,t),0<n.length&&(e.i=null,e.g.set(Dk(e,t),cm(n)),e.h+=n.length)}function Dk(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Hy=Nk.prototype).add=function(e,t){Ak(this),this.i=null,e=Dk(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Hy.forEach=function(e,t){Ak(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Hy.oa=function(){Ak(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Hy.W=function(e){Ak(this);var t=[];if("string"===typeof e)Ok(this,e)&&(t=t.concat(this.g.get(Dk(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Hy.set=function(e,t){return Ak(this),this.i=null,Ok(this,e=Dk(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Hy.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Hy.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Lk=(0,Cr.Z)((function e(t,n){(0,Tr.Z)(this,e),this.h=t,this.g=n}));function Mk(e){this.l=e||Uk,$y.PerformanceNavigationTiming?e=0<(e=$y.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!($y.g&&$y.g.Ga&&$y.g.Ga()&&$y.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Fk,Uk=10;function Zk(e){return!!e.h||!!e.g&&e.g.size>=e.j}function jk(e){return e.h?1:e.g?e.g.size:0}function Vk(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function qk(e,t){e.g?e.g.add(t):e.h=t}function zk(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Bk(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Gi(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return cm(e.i)}function Hk(){}function Wk(){this.g=new Hk}function Gk(e,t,n){var r=n||"";try{hk(e,(function(e,n){var i=e;Jy(e)&&(i=cg(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Kk(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Qk(e){this.l=e.ac||null,this.j=e.jb||!1}function $k(e,t){og.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Yk,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Mk.prototype.cancel=function(){if(this.i=Bk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Gi(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Hk.prototype.stringify=function(e){return $y.JSON.stringify(e,void 0)},Hk.prototype.parse=function(e){return $y.JSON.parse(e,void 0)},om(Qk,qg),Qk.prototype.g=function(){return new $k(this.l,this.j)},Qk.prototype.i=(Fk={},function(){return Fk}),om($k,og);var Yk=0;function Xk(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Jk(e){e.readyState=4,e.l=null,e.j=null,e.A=null,e_(e)}function e_(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Hy=$k.prototype).open=function(e,t){if(this.readyState!=Yk)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,e_(this)},Hy.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||$y).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Hy.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Jk(this)),this.readyState=Yk},Hy.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,e_(this)),this.g&&(this.readyState=3,e_(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof $y.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Xk(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Hy.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Jk(this):e_(this),3==this.readyState&&Xk(this)}},Hy.Va=function(e){this.g&&(this.response=this.responseText=e,Jk(this))},Hy.Ua=function(e){this.g&&(this.response=e,Jk(this))},Hy.ga=function(){this.g&&Jk(this)},Hy.setRequestHeader=function(e,t){this.v.append(e,t)},Hy.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Hy.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty($k.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var t_=$y.JSON.parse;function n_(e){og.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=r_,this.K=this.L=!1}om(n_,og);var r_="",i_=/^https?$/i,a_=["POST","PUT"];function o_(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,u_(e),c_(e)}function u_(e){e.D||(e.D=!0,ug(e,"complete"),ug(e,"error"))}function s_(e){if(e.h&&"undefined"!=typeof Qy&&(!e.C[1]||4!=f_(e)||2!=e.aa()))if(e.v&&4==f_(e))wg(e.Ha,0,e);else if(ug(e,"readystatechange"),4==f_(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(dk)[1]||null;if(!a&&$y.self&&$y.self.location){var o=$y.self.location.protocol;a=o.substr(0,o.length-1)}i=!i_.test(a?a.toLowerCase():"")}t=i}if(t)ug(e,"complete"),ug(e,"success");else{e.m=6;try{var u=2<f_(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",u_(e)}}finally{c_(e)}}}function c_(e,t){if(e.g){l_(e);var n=e.g,r=e.C[0]?Yy:null;e.g=null,e.C=null,t||ug(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function l_(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&($y.clearTimeout(e.A),e.A=null)}function f_(e){return e.g?e.g.readyState:0}function h_(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case r_:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch($_){return null}}function d_(e){var t="";return Vm(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function p_(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=d_(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):kk(e,t,n))}function v_(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function y_(e){this.Ca=0,this.i=[],this.j=new Ng,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=v_("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=v_("baseRetryDelayMs",5e3,e),this.bb=v_("retryDelaySeedMs",1e4,e),this.$a=v_("forwardChannelMaxRetries",2,e),this.ta=v_("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Mk(e&&e.concurrentRequestLimit),this.Fa=new Wk,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function m_(e){if(k_(e),3==e.G){var t=e.U++,n=vk(e.F);kk(n,"SID",e.I),kk(n,"RID",t),kk(n,"TYPE","terminate"),w_(e,n),(t=new $g(e,e.j,t,void 0)).K=2,t.v=_k(vk(n)),n=!1,$y.navigator&&$y.navigator.sendBeacon&&(n=$y.navigator.sendBeacon(t.v.toString(),"")),!n&&$y.Image&&((new Image).src=t.v,n=!0),n||(t.g=D_(t.l,null),t.g.da(t.v)),t.F=Date.now(),ok(t)}O_(e)}function g_(e){e.g&&(T_(e),e.g.cancel(),e.g=null)}function k_(e){g_(e),e.u&&($y.clearTimeout(e.u),e.u=null),I_(e),e.h.cancel(),e.m&&("number"===typeof e.m&&$y.clearTimeout(e.m),e.m=null)}function __(e){Zk(e.h)||e.m||(e.m=!0,yg(e.Ja,e),e.C=0)}function b_(e,t){var n;n=t?t.m:e.U++;var r=vk(e.F);kk(r,"SID",e.I),kk(r,"RID",n),kk(r,"AID",e.T),w_(e,r),e.o&&e.s&&p_(r,e.o,e.s),n=new $g(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=E_(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),qk(e.h,n),tk(n,r,t)}function w_(e,t){e.ia&&Vm(e.ia,(function(e,n){kk(t,n,e)})),e.l&&hk({},(function(e,n){kk(t,n,e)}))}function E_(e,t,n){n=Math.min(e.i.length,n);var r=e.l?im(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Gk(l,o,"req"+c+"_")}catch(f){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function S_(e){e.g||e.u||(e.Z=1,yg(e.Ia,e),e.A=0)}function x_(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Zg(im(e.Ia,e),A_(e,e.A)),e.A++,!0)}function T_(e){null!=e.B&&($y.clearTimeout(e.B),e.B=null)}function C_(e){e.g=new $g(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=vk(e.sa);kk(t,"RID","rpc"),kk(t,"SID",e.I),kk(t,"CI",e.L?"0":"1"),kk(t,"AID",e.T),kk(t,"TYPE","xmlhttp"),w_(e,t),e.o&&e.s&&p_(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=_k(vk(t)),n.s=null,n.P=!0,nk(n,e)}function I_(e){null!=e.v&&($y.clearTimeout(e.v),e.v=null)}function N_(e,t){var n=null;if(e.g==t){I_(e),T_(e),e.g=null;var r=2}else{if(!Vk(e.h,t))return;n=t.D,zk(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ug(r=Pg(),new Ug(r,n)),__(e)}else S_(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(jk(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=Zg(im(e.Ja,e,t),A_(e,e.C)),e.C++,!0))}(e,t)||2==r&&x_(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:R_(e,5);break;case 4:R_(e,10);break;case 3:R_(e,6);break;default:R_(e,2)}}function A_(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function R_(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=im(e.kb,e);n||(n=new pk("//www.google.com/images/cleardot.gif"),$y.location&&"http"==$y.location.protocol||yk(n,"https"),_k(n)),function(e,t){var n=new Ng;if($y.Image){var r=new Image;r.onload=am(Kk,n,r,"TestLoadImage: loaded",!0,t),r.onerror=am(Kk,n,r,"TestLoadImage: error",!1,t),r.onabort=am(Kk,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=am(Kk,n,r,"TestLoadImage: timeout",!1,t),$y.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Fg(2);e.G=0,e.l&&e.l.va(t),O_(e),k_(e)}function O_(e){if(e.G=0,e.la=[],e.l){var t=Bk(e.h);0==t.length&&0==e.i.length||(lm(e.la,t),lm(e.la,e.i),e.h.i.length=0,cm(e.i),e.i.length=0),e.l.ua()}}function P_(e,t,n){var r=n instanceof pk?vk(n):new pk(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),mk(r,r.m);else{var i=$y.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new pk(null,void 0);r&&yk(a,r),t&&(a.g=t),i&&mk(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&kk(r,n,t),kk(r,"VER",e.ma),w_(e,r),r}function D_(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new n_(new Qk({jb:!0})):new n_(e.ra)).Ka(e.H),t}function L_(){}function M_(){if(bm&&!(10<=Number(Dm)))throw Error("Environmental error: no available transport.")}function F_(e,t){og.call(this),this.g=new y_(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!dm(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!dm(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new j_(this)}function U_(e){Gg.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Z_(){Kg.call(this),this.status=1}function j_(e){this.g=e}(Hy=n_.prototype).Ka=function(e){this.L=e},Hy.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Hg.g(),this.C=this.u?zg(this.u):zg(Hg),this.g.onreadystatechange=im(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void o_(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=Gi(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=$y.FormData&&e instanceof $y.FormData,!(0<=sm(a_,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=Gi(n);try{for(c.s();!(s=c.n()).done;){var l=(0,ti.Z)(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{l_(this),0<this.B&&((this.K=function(e){return bm&&Om()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=im(this.qa,this)):this.A=wg(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){o_(this,u)}},Hy.qa=function(){"undefined"!=typeof Qy&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ug(this,"timeout"),this.abort(8))},Hy.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ug(this,"complete"),ug(this,"abort"),c_(this))},Hy.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),c_(this,!0)),n_.X.M.call(this)},Hy.Ha=function(){this.s||(this.F||this.v||this.l?s_(this):this.fb())},Hy.fb=function(){s_(this)},Hy.aa=function(){try{return 2<f_(this)?this.g.status:-1}catch(Fk){return-1}},Hy.fa=function(){try{return this.g?this.g.responseText:""}catch(Fk){return""}},Hy.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),t_(t)}},Hy.Ea=function(){return this.m},Hy.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Hy=y_.prototype).ma=8,Hy.G=1,Hy.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new $g(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Bm(n=qm(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=E_(this,t,r),kk(i=vk(this.F),"RID",e),kk(i,"CVER",22),this.D&&kk(i,"X-HTTP-Session-Id",this.D),w_(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(d_(n)))+"&"+r:this.o&&p_(i,this.o,n)),qk(this.h,t),this.Ya&&kk(i,"TYPE","init"),this.O?(kk(i,"$req",r),kk(i,"SID","null"),t.Z=!0,tk(t,i,null)):tk(t,i,r),this.G=2}}else 3==this.G&&(e?b_(this,e):0==this.i.length||Zk(this.h)||b_(this))},Hy.Ia=function(){if(this.u=null,C_(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Zg(im(this.eb,this),e)}},Hy.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Fg(10),g_(this),C_(this))},Hy.cb=function(){null!=this.v&&(this.v=null,g_(this),x_(this),Fg(19))},Hy.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Fg(2)):(this.j.info("Failed to ping google.com"),Fg(1))},(Hy=L_.prototype).xa=function(){},Hy.wa=function(){},Hy.va=function(){},Hy.ua=function(){},Hy.Ra=function(){},M_.prototype.g=function(e,t){return new F_(e,t)},om(F_,og),F_.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Fg(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=P_(e,null,e.V),__(e)},F_.prototype.close=function(){m_(this.g)},F_.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=cg(e),e=n);t.i.push(new Lk(t.ab++,e)),3==t.G&&__(t)},F_.prototype.M=function(){this.g.l=null,delete this.j,m_(this.g),delete this.g,F_.X.M.call(this)},om(U_,Gg),om(Z_,Kg),om(j_,L_),j_.prototype.xa=function(){ug(this.g,"a")},j_.prototype.wa=function(e){ug(this.g,new U_(e))},j_.prototype.va=function(e){ug(this.g,new Z_)},j_.prototype.ua=function(){ug(this.g,"b")},M_.prototype.createWebChannel=M_.prototype.g,F_.prototype.send=F_.prototype.u,F_.prototype.open=F_.prototype.m,F_.prototype.close=F_.prototype.close,jg.NO_ERROR=0,jg.TIMEOUT=8,jg.HTTP_ERROR=6,Vg.COMPLETE="complete",Bg.EventType=Wg,Wg.OPEN="a",Wg.CLOSE="b",Wg.ERROR="c",Wg.MESSAGE="d",og.prototype.listen=og.prototype.N,n_.prototype.listenOnce=n_.prototype.O,n_.prototype.getLastError=n_.prototype.Oa,n_.prototype.getLastErrorCode=n_.prototype.Ea,n_.prototype.getStatus=n_.prototype.aa,n_.prototype.getResponseJson=n_.prototype.Sa,n_.prototype.getResponseText=n_.prototype.fa,n_.prototype.send=n_.prototype.da,n_.prototype.setWithCredentials=n_.prototype.Ka;var V_=Ky.createWebChannelTransport=function(){return new M_},q_=Ky.getStatEventTarget=function(){return Pg()},z_=Ky.ErrorCode=jg,B_=Ky.EventType=Vg,H_=Ky.Event=Rg,W_=Ky.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},G_=Ky.FetchXmlHttpFactory=Qk,K_=Ky.WebChannel=Bg,Q_=Ky.XhrIo=n_,$_="@firebase/firestore",Y_=function(){function e(t){(0,Tr.Z)(this,e),this.uid=t}return(0,Cr.Z)(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Y_.UNAUTHENTICATED=new Y_(null),Y_.GOOGLE_CREDENTIALS=new Y_("google-credentials-uid"),Y_.FIRST_PARTY=new Y_("first-party-uid"),Y_.MOCK_USER=new Y_("mock-user");var X_="9.14.0",J_=new Xa("@firebase/firestore");function eb(){return J_.logLevel}function tb(e){if(J_.logLevel<=Ha.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ib);J_.debug.apply(J_,["Firestore (".concat(X_,"): ").concat(e)].concat((0,G.Z)(i)))}}function nb(e){if(J_.logLevel<=Ha.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ib);J_.error.apply(J_,["Firestore (".concat(X_,"): ").concat(e)].concat((0,G.Z)(i)))}}function rb(e){if(J_.logLevel<=Ha.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ib);J_.warn.apply(J_,["Firestore (".concat(X_,"): ").concat(e)].concat((0,G.Z)(i)))}}function ib(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ab(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(X_,") INTERNAL ASSERTION FAILED: ")+e;throw nb(t),new Error(t)}function ob(e,t){e||ab()}function ub(e,t){return e}var sb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},cb=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r){var i;return(0,Tr.Z)(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return(0,Cr.Z)(n)}(ka),lb=(0,Cr.Z)((function e(){var t=this;(0,Tr.Z)(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),fb=(0,Cr.Z)((function e(t,n){(0,Tr.Z)(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),hb=function(){function e(){(0,Tr.Z)(this,e)}return(0,Cr.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Y_.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),db=function(){function e(t){(0,Tr.Z)(this,e),this.token=t,this.changeListener=null}return(0,Cr.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),pb=function(){function e(t){(0,Tr.Z)(this,e),this.t=t,this.currentUser=Y_.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return(0,Cr.Z)(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new lb;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new lb,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Kn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){tb("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(tb("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new lb)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(tb("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(ob("string"==typeof n.accessToken),new fb(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return ob(null===e||"string"==typeof e),new Y_(e)}}]),e}(),vb=function(){function e(t,n,r,i){(0,Tr.Z)(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Y_.FIRST_PARTY,this.p=new Map}return(0,Cr.Z)(e,[{key:"I",value:function(){return this.g?this.g():(ob(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),yb=function(){function e(t,n,r,i){(0,Tr.Z)(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return(0,Cr.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(new vb(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Y_.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),mb=(0,Cr.Z)((function e(t){(0,Tr.Z)(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),gb=function(){function e(t){(0,Tr.Z)(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return(0,Cr.Z)(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&tb("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,tb("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){tb("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):tb("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(ob("string"==typeof t.token),e.A=t.token,new mb(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function kb(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var _b=function(){function e(){(0,Tr.Z)(this,e)}return(0,Cr.Z)(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=kb(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function bb(e,t){return e<t?-1:e>t?1:0}function wb(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var Eb=function(){function e(t,n){if((0,Tr.Z)(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new cb(sb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new cb(sb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new cb(sb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new cb(sb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return(0,Cr.Z)(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?bb(this.nanoseconds,e.nanoseconds):bb(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Sb=function(){function e(t){(0,Tr.Z)(this,e),this.timestamp=t}return(0,Cr.Z)(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Eb(0,0))}},{key:"max",value:function(){return new e(new Eb(253402300799,999999999))}}]),e}(),xb=function(){function e(t,n,r){(0,Tr.Z)(this,e),void 0===n?n=0:n>t.length&&ab(),void 0===r?r=t.length-n:r>t.length-n&&ab(),this.segments=t,this.offset=n,this.len=r}return(0,Cr.Z)(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Tb=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){return(0,Tr.Z)(this,n),t.apply(this,arguments)}return(0,Cr.Z)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new cb(sb.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,(0,G.Z)(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(xb),Cb=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ib=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){return(0,Tr.Z)(this,n),t.apply(this,arguments)}return(0,Cr.Z)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Cb.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new cb(sb.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new cb(sb.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new cb(sb.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new cb(sb.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(xb),Nb=function(){function e(t){(0,Tr.Z)(this,e),this.path=t}return(0,Cr.Z)(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Tb.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Tb.fromString(t))}},{key:"fromName",value:function(t){return new e(Tb.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Tb.emptyPath())}},{key:"comparator",value:function(e,t){return Tb.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Tb(t.slice()))}}]),e}(),Ab=(0,Cr.Z)((function e(t,n,r,i){(0,Tr.Z)(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));Ab.UNKNOWN_ID=-1;function Rb(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Sb.fromTimestamp(1e9===r?new Eb(n+1,0):new Eb(n,r));return new Pb(i,Nb.empty(),t)}function Ob(e){return new Pb(e.readTime,e.key,-1)}var Pb=function(){function e(t,n,r){(0,Tr.Z)(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return(0,Cr.Z)(e,null,[{key:"min",value:function(){return new e(Sb.min(),Nb.empty(),-1)}},{key:"max",value:function(){return new e(Sb.max(),Nb.empty(),-1)}}]),e}();function Db(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Nb.comparator(e.documentKey,t.documentKey))?n:bb(e.largestBatchId,t.largestBatchId)}var Lb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Mb=function(){function e(){(0,Tr.Z)(this,e),this.onCommittedListeners=[]}return(0,Cr.Z)(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Fb(e){return Ub.apply(this,arguments)}function Ub(){return Ub=Kn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===sb.FAILED_PRECONDITION&&t.message===Lb){e.next=2;break}throw t;case 2:tb("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Ub.apply(this,arguments)}var Zb=function(){function e(t){var n=this;(0,Tr.Z)(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return(0,Cr.Z)(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&ab(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Gi(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function jb(e){return"IndexedDbTransactionError"===e.name}var Vb=function(){function e(t,n){var r=this;(0,Tr.Z)(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return(0,Cr.Z)(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();function qb(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function zb(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Bb(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Vb.at=-1;var Hb=function(){function e(t,n){(0,Tr.Z)(this,e),this.comparator=t,this.root=n||Gb.EMPTY}return(0,Cr.Z)(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Gb.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Gb.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Wb(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Wb(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Wb(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Wb(this.root,e,this.comparator,!0)}}]),e}(),Wb=function(){function e(t,n,r,i){(0,Tr.Z)(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return(0,Cr.Z)(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Gb=function(){function e(t,n,r,i,a){(0,Tr.Z)(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return(0,Cr.Z)(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ab();if(this.right.isRed())throw ab();var e=this.left.check();if(e!==this.right.check())throw ab();return e+(this.isRed()?0:1)}}]),e}();Gb.EMPTY=null,Gb.RED=!0,Gb.BLACK=!1,Gb.EMPTY=new(function(){function e(){(0,Tr.Z)(this,e),this.size=0}return(0,Cr.Z)(e,[{key:"key",get:function(){throw ab()}},{key:"value",get:function(){throw ab()}},{key:"color",get:function(){throw ab()}},{key:"left",get:function(){throw ab()}},{key:"right",get:function(){throw ab()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Gb(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Kb=function(){function e(t){(0,Tr.Z)(this,e),this.comparator=t,this.data=new Hb(this.comparator)}return(0,Cr.Z)(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Qb(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Qb(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Qb=function(){function e(t){(0,Tr.Z)(this,e),this.iter=t}return(0,Cr.Z)(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var $b=function(){function e(t){(0,Tr.Z)(this,e),this.fields=t,t.sort(Ib.comparator)}return(0,Cr.Z)(e,[{key:"unionWith",value:function(t){var n,r=new Kb(Ib.comparator),i=Gi(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=Gi(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Gi(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return wb(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var Yb=function(e){function t(e){(0,Tr.Z)(this,t),this.binaryString=e}return(0,Cr.Z)(t,[{key:e,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return bb(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}(Symbol.iterator);Yb.EMPTY_BYTE_STRING=new Yb("");var Xb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jb(e){if(ob(!!e),"string"==typeof e){var t=0,n=Xb.exec(e);if(ob(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ew(e.seconds),nanos:ew(e.nanos)}}function ew(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function tw(e){return"string"==typeof e?Yb.fromBase64String(e):Yb.fromUint8Array(e)}function nw(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function rw(e){var t=e.mapValue.fields.__previous_value__;return nw(t)?rw(t):t}function iw(e){var t=Jb(e.mapValue.fields.__local_write_time__.timestampValue);return new Eb(t.seconds,t.nanos)}var aw=(0,Cr.Z)((function e(t,n,r,i,a,o,u,s){(0,Tr.Z)(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),ow=function(){function e(t,n){(0,Tr.Z)(this,e),this.projectId=t,this.database=n||"(default)"}return(0,Cr.Z)(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function uw(e){return null==e}function sw(e){return 0===e&&1/e==-1/0}function cw(e){return"number"==typeof e&&Number.isInteger(e)&&!sw(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var lw={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function fw(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?nw(e)?4:xw(e)?9007199254740991:10:ab()}function hw(e,t){if(e===t)return!0;var n=fw(e);if(n!==fw(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return iw(e).isEqual(iw(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Jb(e.timestampValue),r=Jb(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return tw(e.bytesValue).isEqual(tw(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ew(e.geoPointValue.latitude)===ew(t.geoPointValue.latitude)&&ew(e.geoPointValue.longitude)===ew(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ew(e.integerValue)===ew(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=ew(e.doubleValue),r=ew(t.doubleValue);return n===r?sw(n)===sw(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return wb(e.arrayValue.values||[],t.arrayValue.values||[],hw);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(qb(n)!==qb(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!hw(n[i],r[i])))return!1;return!0}(e,t);default:return ab()}}function dw(e,t){return void 0!==(e.values||[]).find((function(e){return hw(e,t)}))}function pw(e,t){if(e===t)return 0;var n=fw(e),r=fw(t);if(n!==r)return bb(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return bb(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=ew(e.integerValue||e.doubleValue),r=ew(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return vw(e.timestampValue,t.timestampValue);case 4:return vw(iw(e),iw(t));case 5:return bb(e.stringValue,t.stringValue);case 6:return function(e,t){var n=tw(e),r=tw(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=bb(n[i],r[i]);if(0!==a)return a}return bb(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=bb(ew(e.latitude),ew(t.latitude));return 0!==n?n:bb(ew(e.longitude),ew(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=pw(n[i],r[i]);if(a)return a}return bb(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===lw.mapValue&&t===lw.mapValue)return 0;if(e===lw.mapValue)return 1;if(t===lw.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=bb(r[o],a[o]);if(0!==u)return u;var s=pw(n[r[o]],i[a[o]]);if(0!==s)return s}return bb(r.length,a.length)}(e.mapValue,t.mapValue);default:throw ab()}}function vw(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return bb(e,t);var n=Jb(e),r=Jb(t),i=bb(n.seconds,r.seconds);return 0!==i?i:bb(n.nanos,r.nanos)}function yw(e){return mw(e)}function mw(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Jb(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?tw(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Nb.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Gi(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=mw(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Gi(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(mw(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):ab();var t,n}function gw(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function kw(e){return!!e&&"integerValue"in e}function _w(e){return!!e&&"arrayValue"in e}function bw(e){return!!e&&"nullValue"in e}function ww(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ew(e){return!!e&&"mapValue"in e}function Sw(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return zb(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Sw(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Sw(e.arrayValue.values[r]);return n}return Object.assign({},e)}function xw(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var Tw=function(){function e(t){(0,Tr.Z)(this,e),this.value=t}return(0,Cr.Z)(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Ew(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sw(t)}},{key:"setAll",value:function(e){var t=this,n=Ib.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Sw(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Ew(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return hw(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Ew(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){zb(t,(function(t,n){return e[t]=n}));var r,i=Gi(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Sw(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Cw(e){var t=[];return zb(e.fields,(function(e,n){var r=new Ib([e]);if(Ew(n)){var i=Cw(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Gi(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new $b(t)}var Iw=function(){function e(t,n,r,i,a,o){(0,Tr.Z)(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return(0,Cr.Z)(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Tw.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Tw.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Sb.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Sb.min(),Sb.min(),Tw.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Sb.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Sb.min(),Tw.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Sb.min(),Tw.empty(),2)}}]),e}(),Nw=(0,Cr.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;(0,Tr.Z)(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ht=null}));function Aw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Nw(e,t,n,r,i,a,o)}function Rw(e){var t=ub(e);if(null===t.ht){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+yw(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),uw(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return yw(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return yw(e)})).join(",")),t.ht=n}return t.ht}function Ow(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Hw(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!hw(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Gw(e.startAt,t.startAt)&&Gw(e.endAt,t.endAt)}function Pw(e){return Nb.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Dw=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r,i){var a;return(0,Tr.Z)(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return(0,Cr.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(pw(t,this.value)):null!==t&&fw(this.value)===fw(t)&&this.ft(pw(t,this.value))}},{key:"ft",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ab()}}},{key:"dt",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new Lw(e,t,r):"array-contains"===t?new Zw(e,r):"in"===t?new jw(e,r):"not-in"===t?new Vw(e,r):"array-contains-any"===t?new qw(e,r):new n(e,t,r)}},{key:"lt",value:function(e,t,n){return"in"===t?new Mw(e,n):new Fw(e,n)}}]),n}(function(){return(0,Cr.Z)((function e(){(0,Tr.Z)(this,e)}))}()),Lw=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r,i){var a;return(0,Tr.Z)(this,n),(a=t.call(this,e,r,i)).key=Nb.fromName(i.referenceValue),a}return(0,Cr.Z)(n,[{key:"matches",value:function(e){var t=Nb.comparator(e.key,this.key);return this.ft(t)}}]),n}(Dw),Mw=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r){var i;return(0,Tr.Z)(this,n),(i=t.call(this,e,"in",r)).keys=Uw("in",r),i}return(0,Cr.Z)(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Dw),Fw=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r){var i;return(0,Tr.Z)(this,n),(i=t.call(this,e,"not-in",r)).keys=Uw("not-in",r),i}return(0,Cr.Z)(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Dw);function Uw(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Nb.fromName(e.referenceValue)}))}var Zw=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r){return(0,Tr.Z)(this,n),t.call(this,e,"array-contains",r)}return(0,Cr.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return _w(t)&&dw(t.arrayValue,this.value)}}]),n}(Dw),jw=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r){return(0,Tr.Z)(this,n),t.call(this,e,"in",r)}return(0,Cr.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&dw(this.value.arrayValue,t)}}]),n}(Dw),Vw=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r){return(0,Tr.Z)(this,n),t.call(this,e,"not-in",r)}return(0,Cr.Z)(n,[{key:"matches",value:function(e){if(dw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!dw(this.value.arrayValue,t)}}]),n}(Dw),qw=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r){return(0,Tr.Z)(this,n),t.call(this,e,"array-contains-any",r)}return(0,Cr.Z)(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!_w(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return dw(t.value.arrayValue,e)}))}}]),n}(Dw),zw=(0,Cr.Z)((function e(t,n){(0,Tr.Z)(this,e),this.position=t,this.inclusive=n})),Bw=(0,Cr.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";(0,Tr.Z)(this,e),this.field=t,this.dir=n}));function Hw(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Ww(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Nb.comparator(Nb.fromName(o.referenceValue),n.key):pw(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Gw(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!hw(e.position[n],t.position[n]))return!1;return!0}var Kw=(0,Cr.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;(0,Tr.Z)(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this._t=null,this.wt=null,this.startAt,this.endAt}));function Qw(e,t,n,r,i,a,o,u){return new Kw(e,t,n,r,i,a,o,u)}function $w(e){return new Kw(e)}function Yw(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Xw(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Jw(e){var t,n=Gi(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.dt())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function eE(e){return null!==e.collectionGroup}function tE(e){var t=ub(e);if(null===t._t){t._t=[];var n=Jw(t),r=Xw(t);if(null!==n&&null===r)n.isKeyField()||t._t.push(new Bw(n)),t._t.push(new Bw(Ib.keyField(),"asc"));else{var i,a=!1,o=Gi(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t._t.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new Bw(Ib.keyField(),s))}}}return t._t}function nE(e){var t=ub(e);if(!t.wt)if("F"===t.limitType)t.wt=Aw(t.path,t.collectionGroup,tE(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Gi(tE(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Bw(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new zw(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new zw(t.startAt.position,t.startAt.inclusive):null;t.wt=Aw(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function rE(e,t,n){return new Kw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function iE(e,t){return Ow(nE(e),nE(t))&&e.limitType===t.limitType}function aE(e){return"".concat(Rw(nE(e)),"|lt:").concat(e.limitType)}function oE(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(yw(t.value));var t})).join(", "),"]")),uw(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return yw(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return yw(e)})).join(",")),"Target(".concat(t,")")}(nE(e)),"; limitType=").concat(e.limitType,")")}function uE(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Nb.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Gi(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Gi(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Ww(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,tE(e),t))&&!(e.endAt&&!function(e,t,n){var r=Ww(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,tE(e),t))}(e,t)}function sE(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function cE(e){return function(t,n){var r,i=!1,a=Gi(tE(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=lE(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function lE(e,t,n){var r=e.field.isKeyField()?Nb.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?pw(r,i):ab()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ab()}}function fE(e,t){if(e.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sw(t)?"-0":t}}function hE(e){return{integerValue:""+e}}function dE(e,t){return cw(t)?hE(t):fE(e,t)}var pE=(0,Cr.Z)((function e(){(0,Tr.Z)(this,e),this._=void 0}));function vE(e,t,n){return e instanceof gE?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof kE?_E(e,t):e instanceof bE?wE(e,t):function(e,t){var n=mE(e,t),r=SE(n)+SE(e.yt);return kw(n)&&kw(e.yt)?hE(r):fE(e.It,r)}(e,t)}function yE(e,t,n){return e instanceof kE?_E(e,t):e instanceof bE?wE(e,t):n}function mE(e,t){return e instanceof EE?kw(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var gE=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){return(0,Tr.Z)(this,n),t.apply(this,arguments)}return(0,Cr.Z)(n)}(pE),kE=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e){var r;return(0,Tr.Z)(this,n),(r=t.call(this)).elements=e,r}return(0,Cr.Z)(n)}(pE);function _E(e,t){var n,r=xE(t),i=Gi(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return hw(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var bE=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e){var r;return(0,Tr.Z)(this,n),(r=t.call(this)).elements=e,r}return(0,Cr.Z)(n)}(pE);function wE(e,t){var n,r=xE(t),i=Gi(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!hw(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var EE=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r){var i;return(0,Tr.Z)(this,n),(i=t.call(this)).It=e,i.yt=r,i}return(0,Cr.Z)(n)}(pE);function SE(e){return ew(e.integerValue||e.doubleValue)}function xE(e){return _w(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var TE=(0,Cr.Z)((function e(t,n){(0,Tr.Z)(this,e),this.field=t,this.transform=n}));var CE=(0,Cr.Z)((function e(t,n){(0,Tr.Z)(this,e),this.version=t,this.transformResults=n})),IE=function(){function e(t,n){(0,Tr.Z)(this,e),this.updateTime=t,this.exists=n}return(0,Cr.Z)(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function NE(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var AE=(0,Cr.Z)((function e(){(0,Tr.Z)(this,e)}));function RE(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new zE(e.key,IE.none()):new ME(e.key,e.data,IE.none());var n,r=e.data,i=Tw.empty(),a=new Kb(Ib.comparator),o=Gi(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new FE(e.key,i,new $b(a.toArray()),IE.none())}function OE(e,t,n){e instanceof ME?function(e,t,n){var r=e.value.clone(),i=ZE(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof FE?function(e,t,n){if(NE(e.precondition,t)){var r=ZE(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(UE(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function PE(e,t,n,r){return e instanceof ME?function(e,t,n,r){if(!NE(e.precondition,t))return n;var i=e.value.clone(),a=jE(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof FE?function(e,t,n,r){if(!NE(e.precondition,t))return n;var i=jE(e.fieldTransforms,r,t),a=t.data;return a.setAll(UE(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return NE(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function DE(e,t){var n,r=null,i=Gi(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=mE(a.transform,o||null);null!=u&&(null===r&&(r=Tw.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function LE(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&wb(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof kE&&t instanceof kE||e instanceof bE&&t instanceof bE?wb(e.elements,t.elements,hw):e instanceof EE&&t instanceof EE?hw(e.yt,t.yt):e instanceof gE&&t instanceof gE}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var ME=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return(0,Tr.Z)(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return(0,Cr.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(AE),FE=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(0,Tr.Z)(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return(0,Cr.Z)(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(AE);function UE(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function ZE(e,t,n){var r=new Map;ob(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,yE(o,u,n[i]))}return r}function jE(e,t,n){var r,i=new Map,a=Gi(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,vE(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var VE,qE,zE=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r){var i;return(0,Tr.Z)(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return(0,Cr.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(AE),BE=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r){var i;return(0,Tr.Z)(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return(0,Cr.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(AE),HE=(0,Cr.Z)((function e(t){(0,Tr.Z)(this,e),this.count=t}));function WE(e){switch(e){default:return ab();case sb.CANCELLED:case sb.UNKNOWN:case sb.DEADLINE_EXCEEDED:case sb.RESOURCE_EXHAUSTED:case sb.INTERNAL:case sb.UNAVAILABLE:case sb.UNAUTHENTICATED:return!1;case sb.INVALID_ARGUMENT:case sb.NOT_FOUND:case sb.ALREADY_EXISTS:case sb.PERMISSION_DENIED:case sb.FAILED_PRECONDITION:case sb.ABORTED:case sb.OUT_OF_RANGE:case sb.UNIMPLEMENTED:case sb.DATA_LOSS:return!0}}function GE(e){if(void 0===e)return nb("GRPC error has no .code"),sb.UNKNOWN;switch(e){case VE.OK:return sb.OK;case VE.CANCELLED:return sb.CANCELLED;case VE.UNKNOWN:return sb.UNKNOWN;case VE.DEADLINE_EXCEEDED:return sb.DEADLINE_EXCEEDED;case VE.RESOURCE_EXHAUSTED:return sb.RESOURCE_EXHAUSTED;case VE.INTERNAL:return sb.INTERNAL;case VE.UNAVAILABLE:return sb.UNAVAILABLE;case VE.UNAUTHENTICATED:return sb.UNAUTHENTICATED;case VE.INVALID_ARGUMENT:return sb.INVALID_ARGUMENT;case VE.NOT_FOUND:return sb.NOT_FOUND;case VE.ALREADY_EXISTS:return sb.ALREADY_EXISTS;case VE.PERMISSION_DENIED:return sb.PERMISSION_DENIED;case VE.FAILED_PRECONDITION:return sb.FAILED_PRECONDITION;case VE.ABORTED:return sb.ABORTED;case VE.OUT_OF_RANGE:return sb.OUT_OF_RANGE;case VE.UNIMPLEMENTED:return sb.UNIMPLEMENTED;case VE.DATA_LOSS:return sb.DATA_LOSS;default:return ab()}}(qE=VE||(VE={}))[qE.OK=0]="OK",qE[qE.CANCELLED=1]="CANCELLED",qE[qE.UNKNOWN=2]="UNKNOWN",qE[qE.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qE[qE.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qE[qE.NOT_FOUND=5]="NOT_FOUND",qE[qE.ALREADY_EXISTS=6]="ALREADY_EXISTS",qE[qE.PERMISSION_DENIED=7]="PERMISSION_DENIED",qE[qE.UNAUTHENTICATED=16]="UNAUTHENTICATED",qE[qE.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qE[qE.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qE[qE.ABORTED=10]="ABORTED",qE[qE.OUT_OF_RANGE=11]="OUT_OF_RANGE",qE[qE.UNIMPLEMENTED=12]="UNIMPLEMENTED",qE[qE.INTERNAL=13]="INTERNAL",qE[qE.UNAVAILABLE=14]="UNAVAILABLE",qE[qE.DATA_LOSS=15]="DATA_LOSS";var KE=function(){function e(t,n){(0,Tr.Z)(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return(0,Cr.Z)(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Gi(n);try{for(i.s();!(r=i.n()).done;){var a=(0,ti.Z)(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){zb(this.inner,(function(t,n){var r,i=Gi(n);try{for(i.s();!(r=i.n()).done;){var a=(0,ti.Z)(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Bb(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),QE=new Hb(Nb.comparator);function $E(){return QE}var YE=new Hb(Nb.comparator);function XE(){for(var e=YE,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function JE(e){var t=YE;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function eS(){return nS()}function tS(){return nS()}function nS(){return new KE((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var rS=new Hb(Nb.comparator),iS=new Kb(Nb.comparator);function aS(){for(var e=iS,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var oS=new Kb(bb);function uS(){return oS}var sS=function(){function e(t,n,r,i,a){(0,Tr.Z)(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return(0,Cr.Z)(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,cS.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Sb.min(),i,uS(),$E(),aS())}}]),e}(),cS=function(){function e(t,n,r,i,a){(0,Tr.Z)(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return(0,Cr.Z)(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,aS(),aS(),aS())}}]),e}(),lS=(0,Cr.Z)((function e(t,n,r,i){(0,Tr.Z)(this,e),this.Tt=t,this.removedTargetIds=n,this.key=r,this.Et=i})),fS=(0,Cr.Z)((function e(t,n){(0,Tr.Z)(this,e),this.targetId=t,this.At=n})),hS=(0,Cr.Z)((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yb.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,Tr.Z)(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),dS=function(){function e(){(0,Tr.Z)(this,e),this.Rt=0,this.bt=yS(),this.Pt=Yb.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}return(0,Cr.Z)(e,[{key:"current",get:function(){return this.vt}},{key:"resumeToken",get:function(){return this.Pt}},{key:"St",get:function(){return 0!==this.Rt}},{key:"Dt",get:function(){return this.Vt}},{key:"Ct",value:function(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}},{key:"xt",value:function(){var e=aS(),t=aS(),n=aS();return this.bt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ab()}})),new cS(this.Pt,this.vt,e,t,n)}},{key:"Nt",value:function(){this.Vt=!1,this.bt=yS()}},{key:"kt",value:function(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}},{key:"Ot",value:function(e){this.Vt=!0,this.bt=this.bt.remove(e)}},{key:"Mt",value:function(){this.Rt+=1}},{key:"Ft",value:function(){this.Rt-=1}},{key:"$t",value:function(){this.Vt=!0,this.vt=!0}}]),e}(),pS=function(){function e(t){(0,Tr.Z)(this,e),this.Bt=t,this.Lt=new Map,this.Ut=$E(),this.qt=vS(),this.Kt=new Kb(bb)}return(0,Cr.Z)(e,[{key:"Gt",value:function(e){var t,n=Gi(e.Tt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et)}}catch(u){n.e(u)}finally{n.f()}var i,a=Gi(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.jt(o,e.key,e.Et)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.zt(n);switch(e.state){case 0:t.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||t.removeTarget(n);break;case 3:t.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:t.Ht(n)&&(t.Jt(n),r.Ct(e.resumeToken));break;default:ab()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((function(e,r){n.Ht(r)&&t(r)}))}},{key:"Yt",value:function(e){var t=e.targetId,n=e.At.count,r=this.Xt(t);if(r){var i=r.target;if(Pw(i))if(0===n){var a=new Nb(i.path);this.jt(t,a,Iw.newNoDocument(a,Sb.min()))}else ob(1===n);else this.Zt(t)!==n&&(this.Jt(t),this.Kt=this.Kt.add(t))}}},{key:"te",value:function(e){var t=this,n=new Map;this.Lt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&Pw(a.target)){var o=new Nb(a.target.path);null!==t.Ut.get(o)||t.ee(i,o)||t.jt(i,o,Iw.newNoDocument(o,e))}r.Dt&&(n.set(i,r.xt()),r.Nt())}}));var r=aS();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new sS(e,n,this.Kt,this.Ut,r);return this.Ut=$E(),this.qt=vS(),this.Kt=new Kb(bb),i}},{key:"Qt",value:function(e,t){if(this.Ht(e)){var n=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}}},{key:"jt",value:function(e,t,n){if(this.Ht(e)){var r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Lt.delete(e)}},{key:"Zt",value:function(e){var t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Mt",value:function(e){this.zt(e).Mt()}},{key:"zt",value:function(e){var t=this.Lt.get(e);return t||(t=new dS,this.Lt.set(e,t)),t}},{key:"ne",value:function(e){var t=this.qt.get(e);return t||(t=new Kb(bb),this.qt=this.qt.insert(e,t)),t}},{key:"Ht",value:function(e){var t=null!==this.Xt(e);return t||tb("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}},{key:"Jt",value:function(e){var t=this;this.Lt.set(e,new dS),this.Bt.getRemoteKeysForTarget(e).forEach((function(n){t.jt(e,n,null)}))}},{key:"ee",value:function(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}]),e}();function vS(){return new Hb(Nb.comparator)}function yS(){return new Hb(Nb.comparator)}var mS={asc:"ASCENDING",desc:"DESCENDING"},gS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kS=(0,Cr.Z)((function e(t,n){(0,Tr.Z)(this,e),this.databaseId=t,this.gt=n}));function _S(e,t){return e.gt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function bS(e,t){return e.gt?t.toBase64():t.toUint8Array()}function wS(e,t){return _S(e,t.toTimestamp())}function ES(e){return ob(!!e),Sb.fromTimestamp(function(e){var t=Jb(e);return new Eb(t.seconds,t.nanos)}(e))}function SS(e,t){return function(e){return new Tb(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function xS(e){var t=Tb.fromString(e);return ob(HS(t)),t}function TS(e,t){return SS(e.databaseId,t.path)}function CS(e,t){var n=xS(t);if(n.get(1)!==e.databaseId.projectId)throw new cb(sb.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new cb(sb.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Nb(RS(n))}function IS(e,t){return SS(e.databaseId,t)}function NS(e){var t=xS(e);return 4===t.length?Tb.emptyPath():RS(t)}function AS(e){return new Tb(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function RS(e){return ob(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function OS(e,t,n){return{name:TS(e,t),fields:n.value.mapValue.fields}}function PS(e,t){var n;if(t instanceof ME)n={update:OS(e,t.key,t.value)};else if(t instanceof zE)n={delete:TS(e,t.key)};else if(t instanceof FE)n={update:OS(e,t.key,t.data),updateMask:BS(t.fieldMask)};else{if(!(t instanceof BE))return ab();n={verify:TS(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof gE)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof kE)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof bE)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof EE)return{fieldPath:t.field.canonicalString(),increment:n.yt};throw ab()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:wS(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ab()}(e,t.precondition)),n}function DS(e,t){return{documents:[IS(e,t.path)]}}function LS(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=IS(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=IS(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(ww(e.value))return{unaryFilter:{field:jS(e.field),op:"IS_NAN"}};if(bw(e.value))return{unaryFilter:{field:jS(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ww(e.value))return{unaryFilter:{field:jS(e.field),op:"IS_NOT_NAN"}};if(bw(e.value))return{unaryFilter:{field:jS(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jS(e.field),op:ZS(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:jS(e.field),direction:US(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.gt||uw(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function MS(e){var t=NS(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ob(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=FS(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Bw(VS(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return uw(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new zw(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new zw(n,t)}(n.endAt)),Qw(t,i,u,o,s,"F",c,l)}function FS(e){return e?void 0!==e.unaryFilter?[zS(e)]:void 0!==e.fieldFilter?[qS(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return FS(e)})).reduce((function(e,t){return e.concat(t)})):ab():[]}function US(e){return mS[e]}function ZS(e){return gS[e]}function jS(e){return{fieldPath:e.canonicalString()}}function VS(e){return Ib.fromServerFormat(e.fieldPath)}function qS(e){return Dw.create(VS(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ab()}}(e.fieldFilter.op),e.fieldFilter.value)}function zS(e){switch(e.unaryFilter.op){case"IS_NAN":var t=VS(e.unaryFilter.field);return Dw.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=VS(e.unaryFilter.field);return Dw.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=VS(e.unaryFilter.field);return Dw.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=VS(e.unaryFilter.field);return Dw.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ab()}}function BS(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function HS(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var WS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),GS=([].concat((0,G.Z)(WS),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),KS=GS;[].concat(KS,["indexConfiguration","indexState","indexEntries"]);var QS=function(){function e(t,n,r,i){(0,Tr.Z)(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return(0,Cr.Z)(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&OE(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Gi(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=PE(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=Gi(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=PE(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=tS();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=RE(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Sb.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),aS())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&wb(this.mutations,e.mutations,(function(e,t){return LE(e,t)}))&&wb(this.baseMutations,e.baseMutations,(function(e,t){return LE(e,t)}))}}]),e}(),$S=function(){function e(t,n,r,i){(0,Tr.Z)(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return(0,Cr.Z)(e,null,[{key:"from",value:function(t,n,r){ob(t.mutations.length===r.length);for(var i=rS,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),YS=function(){function e(t,n){(0,Tr.Z)(this,e),this.largestBatchId=t,this.mutation=n}return(0,Cr.Z)(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),XS=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Sb.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Sb.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Yb.EMPTY_BYTE_STRING;(0,Tr.Z)(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return(0,Cr.Z)(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),JS=(0,Cr.Z)((function e(t){(0,Tr.Z)(this,e),this.re=t}));function ex(e){var t=MS({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?rE(t,t.limit,"L"):t}var tx=function(){function e(){(0,Tr.Z)(this,e)}return(0,Cr.Z)(e,[{key:"ce",value:function(e,t){this.ae(e,t),t.he()}},{key:"ae",value:function(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(ew(e.integerValue));else if("doubleValue"in e){var n=ew(e.doubleValue);isNaN(n)?this.le(t,13):(this.le(t,15),sw(n)?t.fe(0):t.fe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de("".concat(r.seconds||"")),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(tw(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?xw(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ab()}},{key:"_e",value:function(e,t){this.le(t,25),this.Ie(e,t)}},{key:"Ie",value:function(e,t){t.de(e)}},{key:"ye",value:function(e,t){var n=e.fields||{};this.le(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this._e(a,t),this.ae(n[a],t)}}},{key:"pe",value:function(e,t){var n=e.values||[];this.le(t,50);var r,i=Gi(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ae(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ge",value:function(e,t){var n=this;this.le(t,37),Nb.fromName(e).path.forEach((function(e){n.le(t,60),n.Ie(e,t)}))}},{key:"le",value:function(e,t){e.fe(t)}},{key:"we",value:function(e){e.fe(2)}}]),e}();tx.Te=new tx;var nx=function(){function e(){(0,Tr.Z)(this,e),this.Ye=new rx}return(0,Cr.Z)(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ye.add(t),Zb.resolve()}},{key:"getCollectionParents",value:function(e,t){return Zb.resolve(this.Ye.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Zb.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Zb.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Zb.resolve(null)}},{key:"getIndexType",value:function(e,t){return Zb.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Zb.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Zb.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Zb.resolve(Pb.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Zb.resolve(Pb.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Zb.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Zb.resolve()}}]),e}(),rx=function(){function e(){(0,Tr.Z)(this,e),this.index={}}return(0,Cr.Z)(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Kb(Tb.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Kb(Tb.comparator)).toArray()}}]),e}();new Uint8Array(0);var ix=function(){function e(t,n,r){(0,Tr.Z)(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return(0,Cr.Z)(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();ix.DEFAULT_COLLECTION_PERCENTILE=10,ix.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ix.DEFAULT=new ix(41943040,ix.DEFAULT_COLLECTION_PERCENTILE,ix.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ix.DISABLED=new ix(-1,0,0);var ax=function(){function e(t){(0,Tr.Z)(this,e),this.bn=t}return(0,Cr.Z)(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}();var ox=function(){function e(){(0,Tr.Z)(this,e),this.changes=new KE((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return(0,Cr.Z)(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Iw.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Zb.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var ux=(0,Cr.Z)((function e(t,n){(0,Tr.Z)(this,e),this.overlayedDocument=t,this.mutatedFields=n})),sx=function(){function e(t,n,r,i){(0,Tr.Z)(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return(0,Cr.Z)(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&PE(r.mutation,e,$b.empty(),Eb.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,aS()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:aS(),i=eS();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=XE();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=eS();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,aS())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=$E(),a=nS(),o=nS();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof FE)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),PE(o.mutation,t,o.mutation.getFieldMask(),Eb.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new ux(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=nS(),i=new Hb((function(e,t){return e-t})),a=aS();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Gi(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||$b.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||aS()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=tS();c.forEach((function(e){if(!a.has(e)){var n=RE(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Zb.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Nb.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):eE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Zb.resolve(eS()),u=-1,s=a;return o.next((function(t){return Zb.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Zb.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,aS())})).next((function(e){return{batchId:u,changes:JE(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Nb(t)).next((function(e){var t=XE();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=XE();return this.indexManager.getCollectionParents(e,i).next((function(o){return Zb.forEach(o,(function(o){var u=function(e,t){return new Kw(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Iw.newInvalidDocument(n)))}));var n=XE();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&PE(a.mutation,i,$b.empty(),Eb.now()),uE(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Zb.resolve(Iw.newInvalidDocument(t))}}]),e}(),cx=function(){function e(t){(0,Tr.Z)(this,e),this.It=t,this.Zn=new Map,this.ts=new Map}return(0,Cr.Z)(e,[{key:"getBundleMetadata",value:function(e,t){return Zb.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:ES(n.createTime)}),Zb.resolve()}},{key:"getNamedQuery",value:function(e,t){return Zb.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:ex(e.bundledQuery),readTime:ES(e.readTime)}}(t)),Zb.resolve()}}]),e}(),lx=function(){function e(){(0,Tr.Z)(this,e),this.overlays=new Hb(Nb.comparator),this.es=new Map}return(0,Cr.Z)(e,[{key:"getOverlay",value:function(e,t){return Zb.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=eS();return Zb.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ue(e,t,i)})),Zb.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),Zb.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=eS(),i=t.length+1,a=new Nb(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Zb.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Hb((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=eS(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=eS(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Zb.resolve(s)}},{key:"ue",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new YS(t,n));var a=this.es.get(t);void 0===a&&(a=aS(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),fx=function(){function e(){(0,Tr.Z)(this,e),this.ns=new Kb(hx.ss),this.rs=new Kb(hx.os)}return(0,Cr.Z)(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new hx(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new hx(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new Nb(new Tb([])),r=new hx(n,e),i=new hx(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new Nb(new Tb([])),n=new hx(t,e),r=new hx(t,e+1),i=aS();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new hx(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),hx=function(){function e(t,n){(0,Tr.Z)(this,e),this.key=t,this._s=n}return(0,Cr.Z)(e,null,[{key:"ss",value:function(e,t){return Nb.comparator(e.key,t.key)||bb(e._s,t._s)}},{key:"os",value:function(e,t){return bb(e._s,t._s)||Nb.comparator(e.key,t.key)}}]),e}(),dx=function(){function e(t,n){(0,Tr.Z)(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Kb(hx.ss)}return(0,Cr.Z)(e,[{key:"checkEmpty",value:function(e){return Zb.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new QS(i,t,n,r);this.mutationQueue.push(a);var o,u=Gi(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new hx(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Zb.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Zb.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return Zb.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Zb.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Zb.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new hx(t,0),i=new hx(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),Zb.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Kb(bb);return t.forEach((function(e){var t=new hx(e,0),i=new hx(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),Zb.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Nb.isDocumentKey(i)||(i=i.child(""));var a=new hx(new Nb(i),0),o=new Kb(bb);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),Zb.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;ob(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return Zb.forEach(t.mutations,(function(i){var a=new hx(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new hx(t,0),r=this.gs.firstAfterOrEqual(n);return Zb.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Zb.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),px=function(){function e(t){(0,Tr.Z)(this,e),this.Es=t,this.docs=new Hb(Nb.comparator),this.size=0}return(0,Cr.Z)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Zb.resolve(n?n.document.mutableCopy():Iw.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=$E();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Iw.newInvalidDocument(e))})),Zb.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=$E(),i=new Nb(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Db(Ob(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Zb.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){ab()}},{key:"As",value:function(e,t){return Zb.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new vx(this)}},{key:"getSize",value:function(e){return Zb.resolve(this.size)}}]),e}(),vx=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e){var r;return(0,Tr.Z)(this,n),(r=t.call(this)).Yn=e,r}return(0,Cr.Z)(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),Zb.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(ox),yx=function(){function e(t){(0,Tr.Z)(this,e),this.persistence=t,this.Rs=new KE((function(e){return Rw(e)}),Ow),this.lastRemoteSnapshotVersion=Sb.min(),this.highestTargetId=0,this.bs=0,this.Ps=new fx,this.targetCount=0,this.vs=ax.Pn()}return(0,Cr.Z)(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),Zb.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Zb.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Zb.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),Zb.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),Zb.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new ax(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,Zb.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),Zb.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Zb.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Zb.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Zb.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return Zb.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),Zb.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Zb.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),Zb.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return Zb.resolve(n)}},{key:"containsKey",value:function(e,t){return Zb.resolve(this.Ps.containsKey(t))}}]),e}(),mx=function(){function e(t,n){var r=this;(0,Tr.Z)(this,e),this.Vs={},this.overlays={},this.Ss=new Vb(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new yx(this),this.indexManager=new nx,this.remoteDocumentCache=new px((function(e){return r.referenceDelegate.xs(e)})),this.It=new JS(n),this.Ns=new cx(this.It)}return(0,Cr.Z)(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new lx,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new dx(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;tb("MemoryPersistence","Starting transaction:",e);var i=new gx(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return Zb.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),gx=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e){var r;return(0,Tr.Z)(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return(0,Cr.Z)(n)}(Mb),kx=function(){function e(t){(0,Tr.Z)(this,e),this.persistence=t,this.Fs=new fx,this.$s=null}return(0,Cr.Z)(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw ab()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),Zb.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),Zb.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),Zb.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Zb.forEach(this.Ls,(function(r){var i=Nb.fromPath(r);return t.Us(e,i).next((function(e){e||n.removeEntry(i,Sb.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Us(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"Us",value:function(e,t){var n=this;return Zb.or([function(){return Zb.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}();var _x=function(){function e(t,n,r,i){(0,Tr.Z)(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return(0,Cr.Z)(e,null,[{key:"Ci",value:function(t,n){var r,i=aS(),a=aS(),o=Gi(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),bx=function(){function e(){(0,Tr.Z)(this,e),this.xi=!1}return(0,Cr.Z)(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(Yw(t))return Zb.resolve(null);var r=nE(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=rE(t,null,"F"),r=nE(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=aS.apply(void 0,(0,G.Z)(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,rE(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return Yw(t)||r.isEqual(Sb.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(eb()<=Ha.DEBUG&&tb("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),oE(t)),i.Bi(e,o,t,Rb(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new Kb(cE(e));return t.forEach((function(t,r){uE(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return eb()<=Ha.DEBUG&&tb("QueryEngine","Using full collection scan to execute query:",oE(t)),this.Ni.getDocumentsMatchingQuery(e,t,Pb.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),wx=function(){function e(t,n,r,i){(0,Tr.Z)(this,e),this.persistence=t,this.Li=n,this.It=i,this.Ui=new Hb(bb),this.qi=new KE((function(e){return Rw(e)}),Ow),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return(0,Cr.Z)(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sx(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ui)}))}}]),e}();function Ex(e,t,n,r){return new wx(e,t,n,r)}function Sx(e,t){return xx.apply(this,arguments)}function xx(){return xx=Kn(Un().mark((function e(t,n){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ub(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=aS(),s=Gi(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Gi(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Gi(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=Gi(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),xx.apply(this,arguments)}function Tx(e,t){var n=ub(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Zb.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);ob(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=aS(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Cx(e){var t=ub(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function Ix(e,t){var n=ub(e),r=t.snapshotVersion,i=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.Ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Yb.EMPTY_BYTE_STRING,Sb.min()).withLastLimboFreeSnapshotVersion(Sb.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=$E(),s=aS();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Nx(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(Sb.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Zb.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ui=i,e}))}function Nx(e,t,n){var r=aS(),i=aS();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=$E();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Sb.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):tb("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function Ax(e,t){var n=ub(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Rx(e,t){var n=ub(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,Zb.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new XS(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function Ox(e,t,n){return Px.apply(this,arguments)}function Px(){return Px=Kn(Un().mark((function e(t,n,r){var i,a,o;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ub(t),a=i.Ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),jb(e.t1)){e.next=12;break}throw e.t1;case 12:tb("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ui=i.Ui.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Px.apply(this,arguments)}function Dx(e,t,n){var r=ub(e),i=Sb.min(),a=aS();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=ub(e),i=r.qi.get(n);return void 0!==i?Zb.resolve(r.Ui.get(i)):r.Cs.getTargetData(t,n)}(r,e,nE(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:Sb.min(),n?a:aS())})).next((function(e){return Lx(r,sE(t),e),{documents:e,Hi:a}}))}))}function Lx(e,t,n){var r=e.Ki.get(t)||Sb.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}var Mx=function(){function e(){(0,Tr.Z)(this,e),this.activeTargetIds=uS()}return(0,Cr.Z)(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Fx=function(){function e(){(0,Tr.Z)(this,e),this.Lr=new Mx,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return(0,Cr.Z)(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.Ur[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ur[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ur[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new Mx,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Ux=function(){function e(){(0,Tr.Z)(this,e)}return(0,Cr.Z)(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Zx=function(){function e(){var t=this;(0,Tr.Z)(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return(0,Cr.Z)(e,[{key:"qr",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){tb("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Gi(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){tb("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Gi(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),jx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Vx=function(){function e(t){(0,Tr.Z)(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return(0,Cr.Z)(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),qx=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e){var r;return(0,Tr.Z)(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return(0,Cr.Z)(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Q_;o.setWithCredentials(!0),o.listenOnce(B_.COMPLETE,(function(){var t;try{switch(o.getLastErrorCode()){case z_.NO_ERROR:var n=o.getResponseJson();tb("Connection","XHR received:",JSON.stringify(n)),i(n);break;case z_.TIMEOUT:tb("Connection",'RPC "'+e+'" timed out'),a(new cb(sb.DEADLINE_EXCEEDED,"Request time out"));break;case z_.HTTP_ERROR:var r=o.getStatus();if(tb("Connection",'RPC "'+e+'" failed with status:',r,"response text:",o.getResponseText()),r>0){var u=o.getResponseJson();Array.isArray(u)&&(u=u[0]);var s=null===(t=u)||void 0===t?void 0:t.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(sb).indexOf(t)>=0?t:sb.UNKNOWN}(s.status);a(new cb(c,s.message))}else a(new cb(sb.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new cb(sb.UNAVAILABLE,"Connection failed."));break;default:ab()}}finally{tb("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=V_(),a=q_(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new G_({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");tb("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Vx({Hr:function(e){l?tb("Connection","Not sending because WebChannel is closed:",e):(c||(tb("Connection","Opening WebChannel transport."),s.open(),c=!0),tb("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,K_.EventType.OPEN,(function(){l||tb("Connection","WebChannel transport opened.")})),h(s,K_.EventType.CLOSE,(function(){l||(l=!0,tb("Connection","WebChannel transport closed"),f.io())})),h(s,K_.EventType.ERROR,(function(e){l||(l=!0,rb("Connection","WebChannel transport errored:",e),f.io(new cb(sb.UNAVAILABLE,"The operation could not be completed")))})),h(s,K_.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];ob(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){tb("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=VE[e];if(void 0!==t)return GE(t)}(a),u=i.message;void 0===o&&(o=sb.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new cb(o,u)),s.close()}else tb("Connection","WebChannel received:",n),f.ro(n)}})),h(a,H_.STAT_EVENT,(function(e){e.stat===W_.PROXY?tb("Connection","Detected buffering proxy"):e.stat===W_.NOPROXY&&tb("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function e(t){(0,Tr.Z)(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return(0,Cr.Z)(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);tb("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return tb("RestConnection","Received: ",e),e}),(function(t){throw rb("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+X_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=jx[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function zx(){return"undefined"!=typeof document?document:null}function Bx(e){return new kS(e,!0)}var Hx=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;(0,Tr.Z)(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return(0,Cr.Z)(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&tb("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),Wx=function(){function e(t,n,r,i,a,o,u,s){(0,Tr.Z)(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Hx(t,n)}return(0,Cr.Z)(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=Kn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=Kn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=Kn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.Uo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===sb.RESOURCE_EXHAUSTED?(nb(n.toString()),nb("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===sb.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=(0,ti.Z)(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new cb(sb.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(Kn(Un().mark((function t(){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return tb("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(tb("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Gx=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r,i,a,o,u){var s;return(0,Tr.Z)(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).It=o,s}return(0,Cr.Z)(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ab()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.gt?(ob(void 0===t||"string"==typeof t),Yb.fromBase64String(t||"")):(ob(void 0===t||t instanceof Uint8Array),Yb.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?sb.UNKNOWN:GE(e.code);return new cb(t,e.message||"")}(o);n=new hS(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=CS(e,s.document.name),l=ES(s.document.updateTime),f=new Tw({mapValue:{fields:s.document.fields}}),h=Iw.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new lS(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=CS(e,v.document),m=v.readTime?ES(v.readTime):Sb.min(),g=Iw.newNoDocument(y,m),k=v.removedTargetIds||[];n=new lS([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var _=t.documentRemove;_.document;var b=CS(e,_.document),w=_.removedTargetIds||[];n=new lS([],w,b,null)}else{if(!("filter"in t))return ab();t.filter;var E=t.filter;E.targetId;var S=E.count||0,x=new HE(S),T=E.targetId;n=new fS(T,x)}return n}(this.It,e),n=function(e){if(!("targetChange"in e))return Sb.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Sb.min():t.readTime?ES(t.readTime):Sb.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=AS(this.It),t.addTarget=function(e,t){var n,r=t.target;return(n=Pw(r)?{documents:DS(e,r)}:{query:LS(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=bS(e,t.resumeToken):t.snapshotVersion.compareTo(Sb.min())>0&&(n.readTime=_S(e,t.snapshotVersion.toTimestamp())),n}(this.It,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ab()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.It,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=AS(this.It),t.removeTarget=e,this.Bo(t)}}]),n}(Wx),Kx=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r,i,a,o,u){var s;return(0,Tr.Z)(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).It=o,s.Jo=!1,s}return(0,Cr.Z)(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,qi((0,ji.Z)(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(ob(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(ob(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?ES(e.updateTime):ES(t);return n.isEqual(Sb.min())&&(n=ES(t)),new CE(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=ES(e.commitTime);return this.listener.Zo(n,t)}return ob(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=AS(this.It),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return PS(t.It,e)}))};this.Bo(n)}}]),n}(Wx),Qx=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r,i,a){var o;return(0,Tr.Z)(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.It=a,o.nu=!1,o}return(0,Cr.Z)(n,[{key:"su",value:function(){if(this.nu)throw new cb(sb.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=(0,ti.Z)(i,2),o=a[0],u=a[1];return r.connection.ao(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===sb.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new cb(sb.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=(0,ti.Z)(a,2),u=o[0],s=o[1];return i.connection._o(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===sb.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new cb(sb.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return(0,Cr.Z)((function e(){(0,Tr.Z)(this,e)}))}());function $x(){return $x=Kn(Un().mark((function e(t,n){var r,i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ub(t),i=function(e,t){var n=LS(e,t);return{structuredAggregationQuery:{aggregations:[{count:{},alias:"count_alias"}],structuredQuery:n.structuredQuery},parent:n.parent}}(r.It,nE(n)),a=i.parent,r.connection.co||delete i.parent,e.next=4,r._o("RunAggregationQuery",a,i,1);case 4:return e.abrupt("return",e.sent.filter((function(e){return!!e.result})).map((function(e){return e.result.aggregateFields})));case 5:case"end":return e.stop()}}),e)}))),$x.apply(this,arguments)}var Yx=function(){function e(t,n){(0,Tr.Z)(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return(0,Cr.Z)(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(nb(t),this.ou=!1):tb("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),Xx=(0,Cr.Z)((function e(t,n,r,i,a){var o=this;(0,Tr.Z)(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr((function(e){r.enqueueAndForget(Kn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=cT(o),!e.t0){e.next=5;break}return tb("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Kn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ub(t))._u.add(4),e.next=4,tT(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,Jx(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new Yx(r,i)}));function Jx(e){return eT.apply(this,arguments)}function eT(){return eT=Kn(Un().mark((function e(t){var n,r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!cT(t)){e.next=18;break}n=Gi(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),eT.apply(this,arguments)}function tT(e){return nT.apply(this,arguments)}function nT(){return nT=Kn(Un().mark((function e(t){var n,r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Gi(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),nT.apply(this,arguments)}function rT(e,t){var n=ub(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),sT(n)?uT(n):UT(n).ko()&&aT(n,t))}function iT(e,t){var n=ub(e),r=UT(n);n.du.delete(t),r.ko()&&oT(n,t),0===n.du.size&&(r.ko()?r.Fo():cT(n)&&n.gu.set("Unknown"))}function aT(e,t){e.yu.Mt(t.targetId),UT(e).zo(t)}function oT(e,t){e.yu.Mt(t),UT(e).Ho(t)}function uT(e){e.yu=new pS({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},se:function(t){return e.du.get(t)||null}}),UT(e).start(),e.gu.uu()}function sT(e){return cT(e)&&!UT(e).No()&&e.du.size>0}function cT(e){return 0===ub(e)._u.size}function lT(e){e.yu=void 0}function fT(e){return hT.apply(this,arguments)}function hT(){return hT=Kn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){aT(t,e)}));case 1:case"end":return e.stop()}}),e)}))),hT.apply(this,arguments)}function dT(e,t){return pT.apply(this,arguments)}function pT(){return pT=Kn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:lT(t),sT(t)?(t.gu.hu(n),uT(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),pT.apply(this,arguments)}function vT(e,t,n){return yT.apply(this,arguments)}function yT(){return yT=Kn(Un().mark((function e(t,n,r){var i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof hS&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Kn(Un().mark((function e(t,n){var r,i,a,o;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Gi(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),tb("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,mT(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof lS?t.yu.Gt(n):n instanceof fS?t.yu.Yt(n):t.yu.Wt(n),r.isEqual(Sb.min())){e.next=29;break}return e.prev=14,e.next=17,Cx(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.te(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(Yb.EMPTY_BYTE_STRING,n.snapshotVersion)),oT(e,t);var r=new XS(n.target,t,1,n.sequenceNumber);aT(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),tb("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,mT(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),yT.apply(this,arguments)}function mT(e,t,n){return gT.apply(this,arguments)}function gT(){return gT=Kn(Un().mark((function e(t,n,r){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(jb(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,tT(t);case 5:t.gu.set("Offline"),r||(r=function(){return Cx(t.localStore)}),t.asyncQueue.enqueueRetryable(Kn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tb("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,Jx(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),gT.apply(this,arguments)}function kT(e,t){return t().catch((function(n){return mT(e,n,t)}))}function _T(e){return bT.apply(this,arguments)}function bT(){return bT=Kn(Un().mark((function e(t){var n,r,i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ub(t),r=ZT(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!wT(n)){e.next=19;break}return e.prev=3,e.next=6,Ax(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,ET(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,mT(n,e.t0);case 17:e.next=2;break;case 19:ST(n)&&xT(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),bT.apply(this,arguments)}function wT(e){return cT(e)&&e.fu.length<10}function ET(e,t){e.fu.push(t);var n=ZT(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function ST(e){return cT(e)&&!ZT(e).No()&&e.fu.length>0}function xT(e){ZT(e).start()}function TT(e){return CT.apply(this,arguments)}function CT(){return CT=Kn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ZT(t).eu();case 1:case"end":return e.stop()}}),e)}))),CT.apply(this,arguments)}function IT(e){return NT.apply(this,arguments)}function NT(){return NT=Kn(Un().mark((function e(t){var n,r,i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ZT(t),r=Gi(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),NT.apply(this,arguments)}function AT(e,t,n){return RT.apply(this,arguments)}function RT(){return RT=Kn(Un().mark((function e(t,n,r){var i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=$S.from(i,n,r),e.next=3,kT(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,_T(t);case 5:case"end":return e.stop()}}),e)}))),RT.apply(this,arguments)}function OT(e,t){return PT.apply(this,arguments)}function PT(){return PT=Kn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&ZT(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Kn(Un().mark((function e(t,n){var r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!WE(i=n.code)||i===sb.ABORTED){e.next=7;break}return r=t.fu.shift(),ZT(t).Mo(),e.next=5,kT(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,_T(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:ST(t)&&xT(t);case 5:case"end":return e.stop()}}),e)}))),PT.apply(this,arguments)}function DT(e,t){return LT.apply(this,arguments)}function LT(){return LT=Kn(Un().mark((function e(t,n){var r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=ub(t)).asyncQueue.verifyOperationInProgress(),tb("RemoteStore","RemoteStore received new credentials"),i=cT(r),r._u.add(3),e.next=6,tT(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,Jx(r);case 12:case"end":return e.stop()}}),e)}))),LT.apply(this,arguments)}function MT(e,t){return FT.apply(this,arguments)}function FT(){return FT=Kn(Un().mark((function e(t,n){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ub(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,Jx(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,tT(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),FT.apply(this,arguments)}function UT(e){return e.pu||(e.pu=function(e,t,n){var r=ub(e);return r.su(),new Gx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:fT.bind(null,e),Zr:dT.bind(null,e),Wo:vT.bind(null,e)}),e.wu.push(function(){var t=Kn(Un().mark((function t(n){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),sT(e)?uT(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:lT(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function ZT(e){return e.Iu||(e.Iu=function(e,t,n){var r=ub(e);return r.su(),new Kx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:TT.bind(null,e),Zr:OT.bind(null,e),tu:IT.bind(null,e),Zo:AT.bind(null,e)}),e.wu.push(function(){var t=Kn(Un().mark((function t(n){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,_T(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(tb("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var jT=function(){function e(t,n,r,i,a){(0,Tr.Z)(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new lb,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return(0,Cr.Z)(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new cb(sb.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function VT(e,t){if(nb("AsyncQueue","".concat(t,": ").concat(e)),jb(e))return new cb(sb.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var qT=function(){function e(t){(0,Tr.Z)(this,e),this.comparator=t?function(e,n){return t(e,n)||Nb.comparator(e.key,n.key)}:function(e,t){return Nb.comparator(e.key,t.key)},this.keyedMap=XE(),this.sortedSet=new Hb(this.comparator)}return(0,Cr.Z)(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),zT=function(){function e(){(0,Tr.Z)(this,e),this.Tu=new Hb(Nb.comparator)}return(0,Cr.Z)(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ab():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),BT=function(){function e(t,n,r,i,a,o,u,s,c){(0,Tr.Z)(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return(0,Cr.Z)(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&iE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,qT.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),HT=(0,Cr.Z)((function e(){(0,Tr.Z)(this,e),this.Au=void 0,this.listeners=[]})),WT=(0,Cr.Z)((function e(){(0,Tr.Z)(this,e),this.queries=new KE((function(e){return aE(e)}),iE),this.onlineState="Unknown",this.Ru=new Set}));function GT(e,t){return KT.apply(this,arguments)}function KT(){return KT=Kn(Un().mark((function e(t,n){var r,i,a,o,u;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ub(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new HT),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=VT(e.t0,"Initialization of query '".concat(oE(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&JT(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),KT.apply(this,arguments)}function QT(e,t){return $T.apply(this,arguments)}function $T(){return $T=Kn(Un().mark((function e(t,n){var r,i,a,o,u;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ub(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),$T.apply(this,arguments)}function YT(e,t){var n,r=ub(e),i=!1,a=Gi(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Gi(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Au=o}}}catch(f){a.e(f)}finally{a.f()}i&&JT(r)}function XT(e,t,n){var r=ub(e),i=r.queries.get(t);if(i){var a,o=Gi(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function JT(e){e.Ru.forEach((function(e){e.next()}))}var eC=function(){function e(t,n,r){(0,Tr.Z)(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return(0,Cr.Z)(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Gi(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new BT(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=BT.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}();var tC=(0,Cr.Z)((function e(t){(0,Tr.Z)(this,e),this.key=t})),nC=(0,Cr.Z)((function e(t){(0,Tr.Z)(this,e),this.key=t})),rC=function(){function e(t,n){(0,Tr.Z)(this,e),this.query=t,this.Uu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=aS(),this.mutatedKeys=aS(),this.Gu=cE(t),this.Qu=new qT(this.Gu)}return(0,Cr.Z)(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new zT,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=uE(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ab()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new BT(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new zT,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=aS(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new nC(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new tC(e))})),n}},{key:"tc",value:function(e){this.Uu=e.Hi,this.Ku=aS();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return BT.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),iC=(0,Cr.Z)((function e(t,n,r){(0,Tr.Z)(this,e),this.query=t,this.targetId=n,this.view=r})),aC=(0,Cr.Z)((function e(t){(0,Tr.Z)(this,e),this.key=t,this.nc=!1})),oC=function(){function e(t,n,r,i,a,o){(0,Tr.Z)(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new KE((function(e){return aE(e)}),iE),this.rc=new Map,this.oc=new Set,this.uc=new Hb(Nb.comparator),this.cc=new Map,this.ac=new fx,this.hc={},this.lc=new Map,this.fc=ax.vn(),this.onlineState="Unknown",this.dc=void 0}return(0,Cr.Z)(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function uC(e,t){return sC.apply(this,arguments)}function sC(){return sC=Kn(Un().mark((function e(t,n){var r,i,a,o,u,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=MC(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,Rx(r.localStore,nE(n));case 8:return u=e.sent,r.isPrimaryClient&&rT(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,cC(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),sC.apply(this,arguments)}function cC(e,t,n,r,i){return lC.apply(this,arguments)}function lC(){return lC=Kn(Un().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=Kn(Un().mark((function e(t,n,r,i){var a,o,u;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,Dx(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(IC(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Dx(t.localStore,n,!0);case 3:return o=e.sent,u=new rC(n,o.Hi),s=u.Wu(o.documents),c=cS.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),IC(t,r,l.Xu),f=new iC(n,r,u),e.abrupt("return",(t.ic.set(n,f),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),lC.apply(this,arguments)}function fC(e,t){return hC.apply(this,arguments)}function hC(){return hC=Kn(Un().mark((function e(t,n){var r,i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ub(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!iE(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Ox(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),iT(r.remoteStore,i.targetId),TC(r,i.targetId)})).catch(Fb);case 9:e.next=14;break;case 11:return TC(r,i.targetId),e.next=14,Ox(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),hC.apply(this,arguments)}function dC(e,t,n){return pC.apply(this,arguments)}function pC(){return pC=Kn(Un().mark((function e(t,n,r){var i,a,o;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=FC(t),e.prev=1,e.next=4,function(e,t){var n,r,i=ub(e),a=Eb.now(),o=t.reduce((function(e,t){return e.add(t.key)}),aS());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=$E(),s=aS();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=Gi(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=DE(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new FE(c.key,l,Cw(l.value.mapValue),IE.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:JE(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new Hb(bb)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,RC(i,a.changes);case 9:return e.next=11,_T(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=VT(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),pC.apply(this,arguments)}function vC(e,t){return yC.apply(this,arguments)}function yC(){return yC=Kn(Un().mark((function e(t,n){var r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ub(t),e.prev=1,e.next=4,Ix(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(ob(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?ob(n.nc):e.removedDocuments.size>0&&(ob(n.nc),n.nc=!1))})),e.next=8,RC(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Fb(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),yC.apply(this,arguments)}function mC(e,t,n){var r=ub(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=ub(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Gi(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&JT(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function gC(e,t,n){return kC.apply(this,arguments)}function kC(){return kC=Kn(Un().mark((function e(t,n,r){var i,a,o,u,s,c;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=ub(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Hb(Nb.comparator)).insert(o,Iw.newNoDocument(o,Sb.min())),s=aS().add(o),c=new sS(Sb.min(),new Map,new Kb(bb),u,s),e.next=9,vC(i,c);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),AC(i),e.next=16;break;case 14:return e.next=16,Ox(i.localStore,n,!1).then((function(){return TC(i,n,r)})).catch(Fb);case 16:case"end":return e.stop()}}),e)}))),kC.apply(this,arguments)}function _C(e,t){return bC.apply(this,arguments)}function bC(){return bC=Kn(Un().mark((function e(t,n){var r,i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ub(t),i=n.batch.batchId,e.prev=1,e.next=4,Tx(r.localStore,n);case 4:return a=e.sent,xC(r,i,null),SC(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,RC(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Fb(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),bC.apply(this,arguments)}function wC(e,t,n){return EC.apply(this,arguments)}function EC(){return EC=Kn(Un().mark((function e(t,n,r){var i,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ub(t),e.prev=1,e.next=4,function(e,t){var n=ub(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return ob(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,xC(i,n,r),SC(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,RC(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Fb(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),EC.apply(this,arguments)}function SC(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function xC(e,t,n){var r=ub(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function TC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Gi(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||CC(e,t)}))}function CC(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(iT(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),AC(e))}function IC(e,t,n){var r,i=Gi(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof tC?(e.ac.addReference(a.key,t),NC(e,a)):a instanceof nC?(tb("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||CC(e,a.key)):ab()}}catch(o){i.e(o)}finally{i.f()}}function NC(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(tb("SyncEngine","New document in limbo: "+n),e.oc.add(r),AC(e))}function AC(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new Nb(Tb.fromString(t)),r=e.fc.next();e.cc.set(r,new aC(n)),e.uc=e.uc.insert(n,r),rT(e.remoteStore,new XS(nE($w(n.path)),r,2,Vb.at))}}function RC(e,t,n){return OC.apply(this,arguments)}function OC(){return OC=Kn(Un().mark((function e(t,n,r){var i,a,o,u;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ub(t),a=[],o=[],u=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){u.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=_x.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sc.Wo(a),e.next=9,function(){var e=Kn(Un().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ub(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Zb.forEach(n,(function(t){return Zb.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Zb.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),jb(e.t0)){e.next=10;break}throw e.t0;case 10:tb("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Gi(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ui=r.Ui.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),OC.apply(this,arguments)}function PC(e,t){return DC.apply(this,arguments)}function DC(){return DC=Kn(Un().mark((function e(t,n){var r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=ub(t)).currentUser.isEqual(n)){e.next=11;break}return tb("SyncEngine","User change. New user:",n.toKey()),e.next=5,Sx(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new cb(sb.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,RC(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),DC.apply(this,arguments)}function LC(e,t){var n=ub(e),r=n.cc.get(t);if(r&&r.nc)return aS().add(r.key);var i=aS(),a=n.rc.get(t);if(!a)return i;var o,u=Gi(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ic.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function MC(e){var t=ub(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=vC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=LC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=gC.bind(null,t),t.sc.Wo=YT.bind(null,t.eventManager),t.sc.wc=XT.bind(null,t.eventManager),t}function FC(e){var t=ub(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_C.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=wC.bind(null,t),t}var UC=function(){function e(){(0,Tr.Z)(this,e),this.synchronizeTabs=!1}return(0,Cr.Z)(e,[{key:"initialize",value:function(){var e=Kn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.It=Bx(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return Ex(this.persistence,new bx,e.initialUser,this.It)}},{key:"yc",value:function(e){return new mx(kx.Bs,this.It)}},{key:"gc",value:function(e){return new Fx}},{key:"terminate",value:function(){var e=Kn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ZC=function(){function e(){(0,Tr.Z)(this,e)}return(0,Cr.Z)(e,[{key:"initialize",value:function(){var e=Kn(Un().mark((function e(t,n){var r=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return mC(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=PC.bind(null,this.syncEngine),e.next=12,MT(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new WT}},{key:"createDatastore",value:function(e){var t,n=Bx(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new qx(t));return function(e,t,n,r){return new Qx(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return mC(o.syncEngine,e,0)},a=Zx.C()?new Zx:new Ux,new Xx(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new oC(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Kn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ub(t),tb("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,tT(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function jC(e,t,n){if(!n)throw new cb(sb.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function VC(e){if(!Nb.isDocumentKey(e))throw new cb(sb.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function qC(e){if(Nb.isDocumentKey(e))throw new cb(sb.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function zC(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":ab()}function BC(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new cb(sb.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=zC(e);throw new cb(sb.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function HC(e,t){if(t<=0)throw new cb(sb.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var WC=new Map,GC=function(){function e(t){var n;if((0,Tr.Z)(this,e),void 0===t.host){if(void 0!==t.ssl)throw new cb(sb.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new cb(sb.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new cb(sb.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return(0,Cr.Z)(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),KC=function(){function e(t,n,r,i){(0,Tr.Z)(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GC({}),this._settingsFrozen=!1}return(0,Cr.Z)(e,[{key:"app",get:function(){if(!this._app)throw new cb(sb.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new cb(sb.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GC(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new hb;switch(e.type){case"gapi":var t=e.client;return new yb(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new cb(sb.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=WC.get(e);t&&(tb("ComponentProvider","Removing Datastore"),WC.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function QC(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=BC(e,KC))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&rb("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Y_.MOCK_USER;else{o=ga(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new cb(sb.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Y_(s)}e._authCredentials=new db(new fb(o,u))}}var $C=function(){function e(t,n,r){(0,Tr.Z)(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return(0,Cr.Z)(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new XC(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),YC=function(){function e(t,n,r){(0,Tr.Z)(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return(0,Cr.Z)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),XC=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r,i){var a;return(0,Tr.Z)(this,n),(a=t.call(this,e,r,$w(i)))._path=i,a.type="collection",a}return(0,Cr.Z)(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new $C(this.firestore,null,new Nb(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(YC);function JC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ja(e),jC("collection","path",t),e instanceof KC){var a=Tb.fromString.apply(Tb,[t].concat(r));return qC(a),new XC(e,null,a)}if(!(e instanceof $C||e instanceof XC))throw new cb(sb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Tb.fromString.apply(Tb,[t].concat(r)));return qC(o),new XC(e.firestore,null,o)}function eI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ja(e),1===arguments.length&&(t=_b.R()),jC("doc","path",t),e instanceof KC){var a=Tb.fromString.apply(Tb,[t].concat(r));return VC(a),new $C(e,null,new Nb(a))}if(!(e instanceof $C||e instanceof XC))throw new cb(sb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Tb.fromString.apply(Tb,[t].concat(r)));return VC(o),new $C(e.firestore,e instanceof XC?e.converter:null,new Nb(o))}var tI=function(){function e(t){(0,Tr.Z)(this,e),this.observer=t,this.muted=!1}return(0,Cr.Z)(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):nb("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),nI=function(){function e(t,n){(0,Tr.Z)(this,e),this._data=n,this.type="AggregateQuerySnapshot",this.query=t}return(0,Cr.Z)(e,[{key:"data",value:function(){return this._data}}]),e}(),rI=function(){function e(t,n,r){(0,Tr.Z)(this,e),this.query=t,this.datastore=n,this.userDataWriter=r}return(0,Cr.Z)(e,[{key:"run",value:function(){var e=this;return function(e,t){return $x.apply(this,arguments)}(this.datastore,this.query._query).then((function(t){ob(void 0!==t[0]);var n=Object.entries(t[0]).filter((function(e){var t=(0,ti.Z)(e,2),n=t[0];t[1];return"count_alias"===n})).map((function(t){var n=(0,ti.Z)(t,2),r=(n[0],n[1]);return e.userDataWriter.convertValue(r)}))[0];return ob("number"==typeof n),Promise.resolve(new nI(e.query,{count:n}))}))}}]),e}(),iI=function(){function e(t,n,r,i){var a=this;(0,Tr.Z)(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Y_.UNAUTHENTICATED,this.clientId=_b.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Kn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tb("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return tb("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return(0,Cr.Z)(e,[{key:"getConfiguration",value:function(){var e=Kn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new cb(sb.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new lb;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Kn(Un().mark((function n(){var r;return Un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=VT(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function aI(e,t){return oI.apply(this,arguments)}function oI(){return oI=Kn(Un().mark((function e(t,n){var r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),tb("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Kn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Sx(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),oI.apply(this,arguments)}function uI(e,t){return sI.apply(this,arguments)}function sI(){return sI=Kn(Un().mark((function e(t,n){var r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,cI(t);case 3:return r=e.sent,tb("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return DT(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return DT(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),sI.apply(this,arguments)}function cI(e){return lI.apply(this,arguments)}function lI(){return lI=Kn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return tb("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,aI(t,new UC);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),lI.apply(this,arguments)}function fI(e){return hI.apply(this,arguments)}function hI(){return hI=Kn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return tb("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,uI(t,new ZC);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),hI.apply(this,arguments)}function dI(e){return fI(e).then((function(e){return e.remoteStore}))}function pI(e){return fI(e).then((function(e){return e.syncEngine}))}function vI(e){return fI(e).then((function(e){return e.datastore}))}function yI(e){return mI.apply(this,arguments)}function mI(){return mI=Kn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fI(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=uC.bind(null,n.syncEngine),r.onUnlisten=fC.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),mI.apply(this,arguments)}function gI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new lb;return e.asyncQueue.enqueueAndForget(Kn(Un().mark((function i(){return Un().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new tI({next:function(a){t.enqueueAndForget((function(){return QT(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new cb(sb.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new cb(sb.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new eC($w(n.path),a,{includeMetadataChanges:!0,Nu:!0});return GT(e,o)},i.next=3,yI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function kI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new lb;return e.asyncQueue.enqueueAndForget(Kn(Un().mark((function i(){return Un().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new tI({next:function(n){t.enqueueAndForget((function(){return QT(e,o)})),n.fromCache&&"server"===r.source?i.reject(new cb(sb.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new eC(n,a,{includeMetadataChanges:!0,Nu:!0});return GT(e,o)},i.next=3,yI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var _I=function(){function e(){var t=this;(0,Tr.Z)(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Hx(this,"async_queue_retry"),this.Wc=function(){var e=zx();e&&tb("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=zx();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return(0,Cr.Z)(e,[{key:"isShuttingDown",get:function(){return this.Uc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;var t=zx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.Uc)return new Promise((function(){}));var n=new lb;return this.Hc((function(){return t.Uc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=Kn(Un().mark((function e(){var t=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),jb(e.t0)){e.next=12;break}throw e.t0;case 12:tb("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw nb("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=jT.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.qc.push(i),i}},{key:"zc",value:function(){this.Kc&&ab()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=Kn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=Gi(this.qc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.qc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Gi(t.qc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.qc.indexOf(e);this.qc.splice(t,1)}}]),e}();function bI(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Gi(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var wI=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r,i,a){var o;return(0,Tr.Z)(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new _I,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return(0,Cr.Z)(n,[{key:"_terminate",value:function(){return this._firestoreClient||SI(this),this._firestoreClient.terminate()}}]),n}(KC);function EI(e){return e._firestoreClient||SI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function SI(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new aw(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new iI(e._authCredentials,e._appCheckCredentials,e._queue,r)}var xI=function(){function e(t){(0,Tr.Z)(this,e),this._byteString=t}return(0,Cr.Z)(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Yb.fromBase64String(t))}catch(t){throw new cb(sb.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Yb.fromUint8Array(t))}}]),e}(),TI=function(){function e(){(0,Tr.Z)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new cb(sb.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ib(n)}return(0,Cr.Z)(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var CI=(0,Cr.Z)((function e(t){(0,Tr.Z)(this,e),this._methodName=t})),II=function(){function e(t,n){if((0,Tr.Z)(this,e),!isFinite(t)||t<-90||t>90)throw new cb(sb.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new cb(sb.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return(0,Cr.Z)(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return bb(this._lat,e._lat)||bb(this._long,e._long)}}]),e}(),NI=/^__.*__$/,AI=function(){function e(t,n,r){(0,Tr.Z)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return(0,Cr.Z)(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new FE(e,this.data,this.fieldMask,t,this.fieldTransforms):new ME(e,this.data,t,this.fieldTransforms)}}]),e}(),RI=function(){function e(t,n,r){(0,Tr.Z)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return(0,Cr.Z)(e,[{key:"toMutation",value:function(e,t){return new FE(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function OI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ab()}}var PI=function(){function e(t,n,r,i,a,o){(0,Tr.Z)(this,e),this.settings=t,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return(0,Cr.Z)(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return YI(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(OI(this.sa)&&NI.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),DI=function(){function e(t,n,r){(0,Tr.Z)(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.It=r||Bx(t)}return(0,Cr.Z)(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new PI({sa:e,methodName:t,fa:n,path:Ib.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}]),e}();function LI(e){var t=e._freezeSettings(),n=Bx(e._databaseId);return new DI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function MI(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);GI("Data must be an object, but it was:",o,r);var u,s,c=HI(r,o);if(a.merge)u=new $b(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Gi(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=KI(t,d,n);if(!o.contains(p))throw new cb(sb.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));XI(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new $b(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new AI(new Tw(c),u,s)}var FI=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){return(0,Tr.Z)(this,n),t.apply(this,arguments)}return(0,Cr.Z)(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(CI);function UI(e,t,n){return new PI({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.It,t.ignoreUndefinedProperties)}var ZI=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){return(0,Tr.Z)(this,n),t.apply(this,arguments)}return(0,Cr.Z)(n,[{key:"_toFieldTransform",value:function(e){return new TE(e.path,new gE)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(CI),jI=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r){var i;return(0,Tr.Z)(this,n),(i=t.call(this,e))._a=r,i}return(0,Cr.Z)(n,[{key:"_toFieldTransform",value:function(e){var t=UI(this,e,!0),n=this._a.map((function(e){return BI(e,t)})),r=new kE(n);return new TE(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(CI);function VI(e,t,n,r){var i=e.da(1,t,n);GI("Data must be an object, but it was:",i,r);var a=[],o=Tw.empty();zb(r,(function(e,r){var u=$I(t,e,n);r=ja(r);var s=i.ca(u);if(r instanceof FI)a.push(u);else{var c=BI(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new $b(a);return new RI(o,u,i.fieldTransforms)}function qI(e,t,n,r,i,a){var o=e.da(1,t,n),u=[KI(t,r,n)],s=[i];if(a.length%2!=0)throw new cb(sb.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(KI(t,a[c])),s.push(a[c+1]);for(var l=[],f=Tw.empty(),h=u.length-1;h>=0;--h)if(!XI(l,u[h])){var d=u[h],p=s[h];p=ja(p);var v=o.ca(d);if(p instanceof FI)l.push(d);else{var y=BI(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new $b(l);return new RI(f,m,o.fieldTransforms)}function zI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return BI(n,e.da(r?4:3,t))}function BI(e,t){if(WI(e=ja(e)))return GI("Unsupported field value:",t,e),HI(e,t);if(e instanceof CI)return function(e,t){if(!OI(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Gi(e);try{for(a.s();!(n=a.n()).done;){var o=BI(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ja(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return dE(t.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Eb.fromDate(e);return{timestampValue:_S(t.It,n)}}if(e instanceof Eb){var r=new Eb(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:_S(t.It,r)}}if(e instanceof II)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof xI)return{bytesValue:bS(t.It,e._byteString)};if(e instanceof $C){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:SS(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(zC(e)))}(e,t)}function HI(e,t){var n={};return Bb(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):zb(e,(function(e,r){var i=BI(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function WI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Eb||e instanceof II||e instanceof xI||e instanceof $C||e instanceof CI)}function GI(e,t,n){if(!WI(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=zC(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function KI(e,t,n){if((t=ja(t))instanceof TI)return t._internalPath;if("string"==typeof t)return $I(e,t);throw YI("Field path arguments must be of type string or ",e,!1,void 0,n)}var QI=new RegExp("[~\\*/\\[\\]]");function $I(e,t,n){if(t.search(QI)>=0)throw YI("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return(0,Wy.Z)(TI,(0,G.Z)(t.split(".")))._internalPath}catch(r){throw YI("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function YI(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new cb(sb.INVALID_ARGUMENT,u+e+s)}function XI(e,t){return e.some((function(e){return e.isEqual(t)}))}var JI=function(){function e(t,n,r,i,a){(0,Tr.Z)(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return(0,Cr.Z)(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new $C(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new eN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(tN("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),eN=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){return(0,Tr.Z)(this,n),t.apply(this,arguments)}return(0,Cr.Z)(n,[{key:"data",value:function(){return qi((0,ji.Z)(n.prototype),"data",this).call(this)}}]),n}(JI);function tN(e,t){return"string"==typeof t?$I(e,t):t instanceof TI?t._internalPath:t._delegate._internalPath}function nN(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new cb(sb.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var rN=(0,Cr.Z)((function e(){(0,Tr.Z)(this,e)}));function iN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var aN=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r,i){var a;return(0,Tr.Z)(this,n),(a=t.call(this)).ma=e,a.ga=r,a.ya=i,a.type="where",a}return(0,Cr.Z)(n,[{key:"_apply",value:function(e){var t=LI(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new cb(sb.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){vN(o,a);var s,c=[],l=Gi(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(pN(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=pN(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||vN(o,a),u=zI(n,"where",o,"in"===a||"not-in"===a);var h=Dw.create(i,a,u);return function(e,t){if(t.dt()){var n=Jw(e);if(null!==n&&!n.isEqual(t.field))throw new cb(sb.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Xw(e);null!==r&&yN(e,t.field,r)}var i=function(e,t){var n,r=Gi(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new cb(sb.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new cb(sb.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new YC(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Kw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(rN);function oN(e,t,n){var r=t,i=tN("where",e);return new aN(i,r,n)}var uN=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r){var i;return(0,Tr.Z)(this,n),(i=t.call(this)).ma=e,i.pa=r,i.type="orderBy",i}return(0,Cr.Z)(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new cb(sb.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new cb(sb.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Bw(t,n);return function(e,t){if(null===Xw(e)){var n=Jw(e);null!==n&&yN(e,n,t.field)}}(e,r),r}(e._query,this.ma,this.pa);return new YC(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Kw(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(rN);function sN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=tN("orderBy",e);return new uN(r,n)}var cN=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r,i){var a;return(0,Tr.Z)(this,n),(a=t.call(this)).type=e,a.Ia=r,a.Ta=i,a}return(0,Cr.Z)(n,[{key:"_apply",value:function(e){return new YC(e.firestore,e.converter,rE(e._query,this.Ia,this.Ta))}}]),n}(rN);function lN(e){return HC("limit",e),new cN("limit",e,"F")}var fN=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r,i){var a;return(0,Tr.Z)(this,n),(a=t.call(this)).type=e,a.Ea=r,a.Aa=i,a}return(0,Cr.Z)(n,[{key:"_apply",value:function(e){var t=dN(e,this.type,this.Ea,this.Aa);return new YC(e.firestore,e.converter,function(e,t){return new Kw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(rN);function hN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new fN("startAfter",t,!1)}function dN(e,t,n,r){if(n[0]=ja(n[0]),n[0]instanceof JI)return function(e,t,n,r,i){if(!r)throw new cb(sb.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Gi(tE(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(gw(t,r.key));else{var c=r.data.field(s.field);if(nw(c))throw new cb(sb.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new cb(sb.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new zw(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=LI(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new cb(sb.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new cb(sb.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!eE(e)&&-1!==c.indexOf("/"))throw new cb(sb.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Tb.fromString(c));if(!Nb.isDocumentKey(l))throw new cb(sb.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Nb(l);u.push(gw(t,f))}else{var h=zI(n,r,c);u.push(h)}}return new zw(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function pN(e,t,n){if("string"==typeof(n=ja(n))){if(""===n)throw new cb(sb.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eE(t)&&-1!==n.indexOf("/"))throw new cb(sb.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Tb.fromString(n));if(!Nb.isDocumentKey(r))throw new cb(sb.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return gw(e,new Nb(r))}if(n instanceof $C)return gw(e,n._key);throw new cb(sb.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(zC(n),"."))}function vN(e,t){if(!Array.isArray(e)||0===e.length)throw new cb(sb.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new cb(sb.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function yN(e,t,n){if(!n.isEqual(t))throw new cb(sb.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var mN=function(){function e(){(0,Tr.Z)(this,e)}return(0,Cr.Z)(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(fw(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ew(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tw(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ab()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return zb(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new II(ew(e.latitude),ew(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=rw(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(iw(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Jb(e);return new Eb(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Tb.fromString(e);ob(HS(n));var r=new ow(n.get(1),n.get(3)),i=new Nb(n.popFirst(5));return r.isEqual(t)||nb("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function gN(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var kN=function(){function e(t,n){(0,Tr.Z)(this,e),this.hasPendingWrites=t,this.fromCache=n}return(0,Cr.Z)(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),_N=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e,r,i,a,o,u){var s;return(0,Tr.Z)(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return(0,Cr.Z)(n,[{key:"exists",value:function(){return qi((0,ji.Z)(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new bN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(tN("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(JI),bN=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(){return(0,Tr.Z)(this,n),t.apply(this,arguments)}return(0,Cr.Z)(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return qi((0,ji.Z)(n.prototype),"data",this).call(this,e)}}]),n}(_N),wN=function(){function e(t,n,r,i){(0,Tr.Z)(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new kN(i.hasPendingWrites,i.fromCache),this.query=r}return(0,Cr.Z)(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new bN(n._firestore,n._userDataWriter,r.key,r,new kN(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new cb(sb.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new bN(e._firestore,e._userDataWriter,t.doc.key,t.doc,new kN(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new bN(e._firestore,e._userDataWriter,t.doc.key,t.doc,new kN(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:EN(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function EN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ab()}}function SN(e){e=BC(e,$C);var t=BC(e.firestore,wI);return gI(EI(t),e._key).then((function(n){return ON(t,e,n)}))}var xN=function(e){(0,Bi.Z)(n,e);var t=(0,Hi.Z)(n);function n(e){var r;return(0,Tr.Z)(this,n),(r=t.call(this)).firestore=e,r}return(0,Cr.Z)(n,[{key:"convertBytes",value:function(e){return new xI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new $C(this.firestore,null,t)}}]),n}(mN);function TN(e){e=BC(e,YC);var t=BC(e.firestore,wI),n=EI(t),r=new xN(t);return nN(e._query),kI(n,e._query).then((function(n){return new wN(t,r,e,n)}))}function CN(e,t,n){e=BC(e,$C);var r=BC(e.firestore,wI),i=gN(e.converter,t,n);return RN(r,[MI(LI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,IE.none())])}function IN(e,t,n){e=BC(e,$C);for(var r=BC(e.firestore,wI),i=LI(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return RN(r,[("string"==typeof(t=ja(t))||t instanceof TI?qI(i,"updateDoc",e._key,t,n,o):VI(i,"updateDoc",e._key,t)).toMutation(e._key,IE.exists(!0))])}function NN(e,t){var n=BC(e.firestore,wI),r=eI(e),i=gN(e.converter,t);return RN(n,[MI(LI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,IE.exists(!1))]).then((function(){return r}))}function AN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ja(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||bI(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(bI(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof $C)l=BC(e.firestore,wI),f=$w(e._key.path),c={next:function(t){n[s]&&n[s](ON(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=BC(e,YC);l=BC(p.firestore,wI),f=p._query;var v=new xN(l);c={next:function(e){n[s]&&n[s](new wN(l,v,p,e))},error:n[s+1],complete:n[s+2]},nN(e._query)}return function(e,t,n,r){var i=new tI(r),a=new eC(t,i,n);return e.asyncQueue.enqueueAndForget(Kn(Un().mark((function t(){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=GT,t.next=3,yI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(Kn(Un().mark((function t(){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=QT,t.next=3,yI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(EI(l),f,h,c)}function RN(e,t){return function(e,t){var n=new lb;return e.asyncQueue.enqueueAndForget(Kn(Un().mark((function r(){return Un().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=dC,r.next=3,pI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(EI(e),t)}function ON(e,t,n){var r=n.docs.get(t._key),i=new xN(e);return new _N(e,i,t._key,r,new kN(n.hasPendingWrites,n.fromCache),t.converter)}function PN(e){var t=BC(e.firestore,wI);return function(e,t,n){var r=new lb;return e.asyncQueue.enqueueAndForget(Kn(Un().mark((function i(){var a,o;return Un().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.t0=cT,i.next=4,dI(e);case 4:if(i.t1=i.sent,!(0,i.t0)(i.t1)){i.next=13;break}return i.next=8,vI(e);case 8:a=i.sent,o=new rI(t,a,n).run(),r.resolve(o),i.next=14;break;case 13:r.reject(new cb(sb.UNAVAILABLE,"Failed to get count result because the client is offline."));case 14:i.next=19;break;case 16:i.prev=16,i.t2=i.catch(0),r.reject(i.t2);case 19:case"end":return i.stop()}}),i,null,[[0,16]])})))),r.promise}(EI(t),e,new xN(t))}function DN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jI("arrayUnion",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];X_="9.14.0",Co(new Va("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new wI(new pb(e.getProvider("auth-internal")),new gb(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new cb(sb.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ow(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Lo($_,"3.7.3",e),Lo($_,"3.7.3","esm2017")}();var LN=Po({apiKey:"AIzaSyBWLJ1l27SAbkfzVw2heEcSEY1eKdZUvLM",authDomain:"chat-990af.firebaseapp.com",databaseURL:"https://chat-990af-default-rtdb.firebaseio.com",projectId:"chat-990af",storageBucket:"chat-990af.appspot.com",messagingSenderId:"96310721043",appId:"1:96310721043:web:a286e5063f6c2c61641de6"}),MN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Do(),t=Io(e,"auth");if(t.isInitialized())return t.getImmediate();var n=hu(e,{popupRedirectResolver:ef,persistence:[Xc,Cc,Nc]}),r=ya("authTokenSyncURL");if(r){var i=lf(r);bc(n,i,(function(){return i(n.currentUser)})),_c(n,(function(e){return i(e)}))}var a=da("auth");return a&&ws(n,"http://".concat(a)),n}(),FN=(zy(LN),function(e,t){var n="string"==typeof e?e:t||"(default)",r=Io("object"==typeof e?e:Do(),"firestore").getImmediate({identifier:n});if(!r._initialized){var i=pa("firestore");i&&QC.apply(void 0,[r].concat((0,G.Z)(i)))}return r}(LN)),UN=Un().mark(GN),ZN=Un().mark(KN),jN=Un().mark(QN),VN=Un().mark($N),qN=Un().mark(YN),zN=Un().mark(XN),BN=Un().mark(JN),HN=Un().mark(eA),WN=Un().mark(tA);function GN(){var e,t;return Un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,st((function(e){return e.auth}));case 3:if(""!==(e=n.sent).email&&""!==e.pass){n.next=6;break}throw new Error("Firebase: Error! \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043e\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430!");case 6:return n.next=8,at(dc,MN,e.email,e.pass);case 8:return n.next=10,ct(1e3);case 10:return n.next=12,ot(QN);case 12:return n.next=14,ot(YN);case 14:return n.next=16,nt((0,b.vQ)());case 16:return n.next=18,nt((0,b.Oq)(!0));case 18:n.next=25;break;case 20:return n.prev=20,n.t0=n.catch(0),t=n.t0.message.substring(n.t0.message.search("Firebase:")+10),n.next=25,nt((0,b.x5)(!0,t));case 25:case"end":return n.stop()}}),UN,null,[[0,20]])}function KN(){var e,t;return Un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,st((function(e){return e.auth}));case 3:if(""!==(e=n.sent).email&&""!==e.pass){n.next=6;break}throw new Error("Firebase: Error! \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043e\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430!");case 6:return n.next=8,at(vc,MN,e.email,e.pass);case 8:return n.next=10,ot(YN);case 10:return n.next=12,nt((0,b.Oq)(!0));case 12:return n.next=14,nt((0,b.vQ)());case 14:n.next=21;break;case 16:return n.prev=16,n.t0=n.catch(0),t=n.t0.message.substring(n.t0.message.search("Firebase:")+10),n.next=21,nt((0,b.x5)(!0,t));case 21:case"end":return n.stop()}}),ZN,null,[[0,16]])}function QN(){var e;return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=zy(),t.next=4,Dy(Oy(e,"profile/"+MN.currentUser.uid),{status:"",about:""});case 4:return t.next=6,CN(eI(FN,"users",MN.currentUser.uid),{uid:MN.currentUser.uid,displayName:MN.currentUser.displayName,email:MN.currentUser.email,dialogs:[],chats:[]});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Error registration! Please contact to Administration Chat!(@toron2c) ErrorMessage: ".concat(t.t0.message));case 11:case"end":return t.stop()}}),jN,null,[[0,8]])}function $N(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wc(MN);case 2:return e.next=4,nt((0,b.Aq)());case 4:return e.next=6,nt((0,b.Sz)());case 6:case"end":return e.stop()}}),VN)}function YN(){var e,t,n,r,i,a;return Un().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,e=Oy(zy(),"profile/".concat(MN.currentUser.uid)),t=eI(FN,"users",MN.currentUser.uid),o.next=5,SN(t);case 5:return n=o.sent,r="",n.data().avatar&&(r=n.data().avatar),o.next=10,Ly(e);case 10:return i=o.sent,a={email:MN.currentUser.email,name:MN.currentUser.displayName,uid:MN.currentUser.uid,avatar:r,infoUser:i.val()},o.next=14,nt((0,b.Fv)(a));case 14:o.next=19;break;case 16:o.prev=16,o.t0=o.catch(0),console.error("Error get datas profile. Please contact to administration Chat! (@toron2c) ErrorMessage: ".concat(o.t0.message));case 19:case"end":return o.stop()}}),qN,null,[[0,16]])}function XN(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(H.Fg,GN);case 2:case"end":return e.stop()}}),zN)}function JN(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(H.F6,KN);case 2:case"end":return e.stop()}}),BN)}function eA(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(H.D_,$N);case 2:case"end":return e.stop()}}),HN)}function tA(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt([XN(),JN(),eA()]);case 2:case"end":return e.stop()}}),WN)}var nA=Un().mark(pA),rA=Un().mark(vA),iA=Un().mark(yA),aA=Un().mark(mA),oA=Un().mark(gA),uA=Un().mark(kA),sA=Un().mark(_A),cA=Un().mark(bA),lA=Un().mark(EA),fA=Un().mark(SA),hA=Un().mark(xA),dA=Un().mark(TA);function pA(){var e,t,n,r,i,a,o,u,s,c,l,f,h;return Un().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,ct(500);case 3:return e=[],t=eI(FN,"users",MN.currentUser.uid),d.next=7,SN(t);case 7:(n=d.sent).exists()&&(e=n.data().dialogs),r=[],i=Gi(e.entries()),d.prev=11,i.s();case 13:if((a=i.n()).done){d.next=27;break}return o=(0,ti.Z)(a.value,2),u=o[0],s=o[1],d.next=17,at(vA,s.uidAnotherUser);case 17:return d.t0=d.sent,d.next=20,at(yA,s.uidAnotherUser);case 20:d.t1=d.sent,d.t2=s.chatId,d.t3=u,c={avatar:d.t0,nameDialog:d.t1,chatId:d.t2,linkToDialog:d.t3},r.push(c);case 25:d.next=13;break;case 27:d.next=32;break;case 29:d.prev=29,d.t4=d.catch(11),i.e(d.t4);case 32:return d.prev=32,i.f(),d.finish(32);case 35:if(!(r.length>0)){d.next=55;break}return d.next=38,nt((0,b.pO)(r));case 38:l=Gi(r),d.prev=39,l.s();case 41:if((f=l.n()).done){d.next=47;break}return h=f.value,d.next=45,nt((0,b.Bo)(h.chatId,h.linkToDialog,h.avatar));case 45:d.next=41;break;case 47:d.next=52;break;case 49:d.prev=49,d.t5=d.catch(39),l.e(d.t5);case 52:return d.prev=52,l.f(),d.finish(52);case 55:d.next=60;break;case 57:d.prev=57,d.t6=d.catch(0),console.error("error load chat's. please contact to administration (@toron2c)\n message: ".concat(d.t6.message));case 60:case"end":return d.stop()}}),nA,null,[[0,57],[11,29,32,35],[39,49,52,55]])}function vA(e){var t,n,r;return Un().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,t=eI(FN,"users",e),n="",i.next=5,SN(t);case 5:return(r=i.sent).data().avatar&&(n=r.data().avatar),i.abrupt("return",n);case 10:i.prev=10,i.t0=i.catch(0),console.error("error load chat's. please contact to administration (@toron2c)\n message: ".concat(i.t0.message));case 13:case"end":return i.stop()}}),rA,null,[[0,10]])}function yA(e){var t,n,r,i;return Un().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t=eI(FN,"users",e),n="",e!==MN.currentUser.uid){a.next=7;break}n="Saved messages",a.next=11;break;case 7:return a.next=9,SN(t);case 9:(r=a.sent).exists()&&(i=r.data(),n=i.displayName?i.displayName:i.email);case 11:return a.abrupt("return",n);case 14:a.prev=14,a.t0=a.catch(0),console.error("error load chat's. please contact to administration (@toron2c)\n message: ".concat(a.t0.message));case 17:case"end":return a.stop()}}),iA,null,[[0,14]])}function mA(){var e,t,n;return Un().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,ct(500);case 3:return r.next=5,st((function(e){return e.chats.nameNewChat}));case 5:return e=r.sent,r.next=8,at(gA,e);case 8:if(!(t=r.sent)){r.next=21;break}return r.next=12,at(kA,t);case 12:if(r.sent){r.next=18;break}return r.next=16,at(_A,t);case 16:r.next=19;break;case 18:throw new Error("sorry, but there is already a dialog with the current user");case 19:r.next=22;break;case 21:throw new Error('sorry, but user with this email "'.concat(e,'" not found'));case 22:r.next=30;break;case 24:return r.prev=24,r.t0=r.catch(0),n="error load data. please contact to administration (@toron2c)\n message: ".concat(r.t0.message),console.error(n),r.next=30,nt((0,b.S4)(n));case 30:case"end":return r.stop()}}),aA,null,[[0,24]])}function gA(e){var t,n,r;return Un().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,t=null,n=JC(FN,"users"),i.next=5,Fy(n,oN("email","==",e));case 5:return r=i.sent,i.next=8,TN(r);case 8:return i.sent.forEach((function(e){t=e.data().uid})),i.abrupt("return",t);case 13:i.prev=13,i.t0=i.catch(0),console.error("error load data. please contact to administration (@toron2c)\n message: ".concat(i.t0.message));case 16:case"end":return i.stop()}}),oA,null,[[0,13]])}function kA(e){var t,n,r,i,a,o;return Un().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,t=!1,n=[],r=eI(FN,"users",MN.currentUser.uid),u.next=6,SN(r);case 6:(i=u.sent).exists()&&(n=i.data().dialogs),a=Gi(n);try{for(a.s();!(o=a.n()).done;)o.value.uidAnotherUser===e&&(t=!0)}catch(s){a.e(s)}finally{a.f()}return u.abrupt("return",t);case 13:u.prev=13,u.t0=u.catch(0),console.error("error load data. please contact to administration (@toron2c)\n message: ".concat(u.t0.message));case 16:case"end":return u.stop()}}),uA,null,[[0,13]])}function _A(e){var t,n,r,i;return Un().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=null,n=eI(FN,"users",e),a.next=5,SN(n);case 5:return t=(t=a.sent).data(),a.next=9,NN(JC(FN,"dialogs"),{});case 9:return r=a.sent,a.next=12,IN(eI(FN,"dialogs",r.id),{uidChat:r.id});case 12:return a.next=14,JC(r,"".concat(r.id,"_messages"));case 14:return i=a.sent,a.next=17,CN(eI(i),{});case 17:return a.next=19,IN(eI(FN,"users",MN.currentUser.uid),{dialogs:DN({chatId:r.id,emailAnotherUser:t.email,uidAnotherUser:t.uid,anotherName:t.displayName})});case 19:return a.next=21,IN(eI(FN,"users",t.uid),{dialogs:DN({chatId:r.id,emailAnotherUser:MN.currentUser.email,uidAnotherUser:MN.currentUser.uid,anotherName:MN.currentUser.displayName})});case 21:a.next=26;break;case 23:a.prev=23,a.t0=a.catch(0),console.error("error add dialog. please contact to administration (@toron2c)\n message: ".concat(a.t0.message));case 26:case"end":return a.stop()}}),sA,null,[[0,23]])}function bA(){var e,t;return Un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ct(1e3);case 3:return n.next=5,at(wA);case 5:e=n.sent;case 6:return n.next=8,st((function(e){return e.chats.subscribeActived}));case 8:if(!n.sent){n.next=21;break}return n.next=11,tt(e);case 11:return t=n.sent,n.next=14,st((function(e){return e.chats.subscribeActived}));case 14:if(!n.sent){n.next=18;break}return n.delegateYield(Un().mark((function e(){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n={nameDialog:t.anotherName?t.anotherName:t.emailAnotherUser,chatId:t.chatId})){e.next=9;break}return e.next=4,nt((0,b._g)(n));case 4:return e.next=6,st((function(e){return e.chats.chatList.find((function(e){return e.chatId===n.chatId}))}));case 6:return r=e.sent,e.next=9,nt((0,b.Bo)(r.chatId,r.linkToDialog));case 9:case"end":return e.stop()}}),e)}))(),"t0",16);case 16:n.next=19;break;case 18:e.close();case 19:n.next=6;break;case 21:n.next=26;break;case 23:n.prev=23,n.t1=n.catch(0),console.log("Error connection, please contact to administration (@toron2c)\n message: ".concat(n.t1.message));case 26:case"end":return n.stop()}}),cA,null,[[0,23]])}function wA(){return Nt((function(e){var t=AN(eI(FN,"users",MN.currentUser.uid),(function(t){var n,r,i=Gi(t.data().dialogs);try{for(i.s();!(r=i.n()).done;){n=r.value}}catch(a){i.e(a)}finally{i.f()}n&&e(n)}));return function(){t()}}))}function EA(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(H.Bj,pA);case 2:case"end":return e.stop()}}),lA)}function SA(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(H.c4,mA);case 2:case"end":return e.stop()}}),fA)}function xA(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(H.z,bA);case 2:case"end":return e.stop()}}),hA)}function TA(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt([EA(),SA(),xA()]);case 2:case"end":return e.stop()}}),dA)}var CA=Un().mark(jA),IA=Un().mark(VA),NA=Un().mark(qA),AA=Un().mark(zA),RA=Un().mark(BA),OA=Un().mark(HA);function PA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Un().mark((function n(){var r,i,a,o,u,s,c,l;return Un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=[],o=iN(JC(eI(JC(FN,"dialogs"),e),"".concat(e,"_messages")),sN("TimestampServer","desc"),lN(30)),n.next=5,TN(o);case 5:u=n.sent;case 6:if(!(t>0)){n.next=17;break}return r=u.docs[u.docs.length-1],n.next=10,iN(JC(eI(JC(FN,"dialogs"),e),"".concat(e,"_messages")),sN("TimestampServer","desc"),lN(12),hN(r));case 10:return i=n.sent,n.next=13,TN(i);case 13:u=n.sent,t--,n.next=6;break;case 17:for(u.forEach((function(e){a.unshift(F(F({},e.data()),{},{idMessage:e.id}))})),s=0,c=a;s<c.length;s++)(l=c[s]).TimestampServer=new Date(1e3*l.TimestampServer.seconds),delete l.TimestampUser,l.author=l.author===MN.currentUser.uid?"you":"notYou";return n.abrupt("return",a);case 22:n.prev=22,n.t0=n.catch(0),console.error("error load messages, please contact to administartion (@toron2c)\nmessage: ".concat(n.t0.message));case 25:case"end":return n.stop()}}),n,null,[[0,22]])}))()}function DA(e){var t=e.uid,n=e.link,r=e.img;return Un().mark((function e(){var i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at(PA,t);case 3:return i=e.sent,e.next=6,nt((0,b._o)(t,n,i,1,r));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("error load messages, please contact to administartion (@toron2c)\nmessage: ".concat(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))()}function LA(e){var t=e.uid;return Un().mark((function e(){var n,r,i,a,o;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,st((function(e){return e.messages.messageList[t].page}));case 3:return n=e.sent,e.next=6,st((function(e){return e.messages.messageList[t].messages.length}));case 6:return r=e.sent,i=iN(JC(eI(JC(FN,"dialogs"),t),"".concat(t,"_messages")),sN("TimestampServer","desc")),e.next=10,PN(i);case 10:if(a=e.sent,r!==a.data().count){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,at(PA,t,n);case 15:return o=e.sent,e.next=18,nt((0,b.r)(t,o));case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.error("error load messages, please contact to administartion (@toron2c)\nmessage: ".concat(e.t0.message));case 23:case"end":return e.stop()}}),e,null,[[0,20]])}))()}function MA(e){var t=e.uid;return Un().mark((function e(){var n,r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,st((function(e){return e.messages.textNewMessage}));case 3:return n=e.sent,r={message:n,author:MN.currentUser.uid,TimestampUser:new Date},e.next=7,nt((0,b.bG)());case 7:return i=JC(eI(JC(FN,"dialogs"),t),"".concat(t,"_messages")),e.next=10,NN(i,F(F({},r),{},{TimestampServer:new ZI("serverTimestamp")}));case 10:return void(e.next=12);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("error send message. please contact to administration (@toron2c)\nmessage: ".concat(e.t0.message));case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))()}function FA(e){var t=e.uid;return Un().mark((function e(){var n,r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct(1e3);case 2:return e.next=4,at(UA,t);case 4:n=e.sent,e.prev=5;case 6:return e.next=8,st((function(e){return e.messages.messageList[t].subscribe}));case 8:if(!e.sent){e.next=26;break}return e.next=11,ct(1e3);case 11:return e.next=13,tt(n);case 13:return r=e.sent,e.next=16,st((function(e){return e.messages.messageList[t].subscribe}));case 16:if(!e.sent){e.next=23;break}if(!r){e.next=21;break}return i={TimeStamp:r.TimestampServer?new Date(1e3*r.TimestampServer.seconds):new Date(1e3*r.TimestampUser.seconds),author:r.author===MN.currentUser.uid?"you":"notYou",message:r.message,idMessage:r.id},e.next=21,nt((0,b.RC)(t,i));case 21:e.next=24;break;case 23:n.close();case 24:e.next=6;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(5),console.error("error load message! please contact to administration (@toron2c)\n message: ".concat(e.t0.message));case 31:case"end":return e.stop()}}),e,null,[[5,28]])}))()}function UA(e){return Nt((function(t){var n,r,i=AN(iN(JC(eI(JC(FN,"dialogs"),e),"".concat(e,"_messages")),sN("TimestampServer")),(function(e){e.docChanges().forEach((function(e){"added"===e.type&&(n=e.doc.data(),r=e.doc.id),n&&t(F(F({},n),{},{id:r}))}))}));return function(){i()}}))}function ZA(e){var t=e.uid;return Un().mark((function e(){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at(PA,t);case 3:return n=e.sent,e.next=6,nt((0,b.m4)(t,n));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error load messages! please contact to administration (@toron2c)!\nMessage:".concat(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))()}function jA(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(H.CK,DA);case 2:case"end":return e.stop()}}),CA)}function VA(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(H.zS,LA);case 2:case"end":return e.stop()}}),IA)}function qA(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(H.Dn,MA);case 2:case"end":return e.stop()}}),NA)}function zA(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(H.nF,FA);case 2:case"end":return e.stop()}}),AA)}function BA(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(H.UZ,ZA);case 2:case"end":return e.stop()}}),RA)}function HA(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt([jA(),VA(),qA(),zA(),BA()]);case 2:case"end":return e.stop()}}),OA)}var WA=Un().mark($A),GA=Un().mark(XA),KA=Un().mark(JA),QA=Un().mark(eR);function $A(){var e,t,n;return Un().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e=zy(),r.next=4,st((function(e){return e.profile}));case 4:return t=r.sent,r.next=7,gc(MN.currentUser,{displayName:t.name});case 7:return r.next=9,Dy(Oy(e,"profile/"+MN.currentUser.uid),{status:t.infoUser.status,about:t.infoUser.about});case 9:return r.next=11,IN(eI(FN,"users",MN.currentUser.uid),{displayName:t.name});case 11:return r.next=13,nt((0,b.hf)());case 13:r.next=21;break;case 15:return r.prev=15,r.t0=r.catch(0),n="Error save data, please contact to administration (@toron2c)! Message:".concat(r.t0.message),console.error(n),r.next=21,nt((0,b.uy)(n));case 21:case"end":return r.stop()}}),WA,null,[[0,15]])}function YA(e){var t=e.src;return Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,IN(eI(FN,"users",MN.currentUser.uid),{avatar:t});case 3:return e.next=5,nt((0,b.q3)(t));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("error set avatar. Contact to administrator @toron2c, error: ".concat(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))()}function XA(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(H.dY,YA);case 2:case"end":return e.stop()}}),GA)}function JA(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(H.Hf,$A);case 2:case"end":return e.stop()}}),KA)}function eR(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt([JA(),XA()]);case 2:case"end":return e.stop()}}),QA)}var tR=Un().mark(nR);function nR(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt([Zi(),tA(),eR(),TA(),HA()]);case 2:case"end":return e.stop()}}),tR)}xn.run(nR),t.createRoot(document.getElementById("root")).render((0,i.jsx)(e.StrictMode,{children:(0,i.jsx)(m.zt,{store:Tn,children:(0,i.jsx)(Mn,{persistor:Cn,children:(0,i.jsx)(h.UT,{children:(0,i.jsx)(P,{})})})})})),D()}()}();
//# sourceMappingURL=main.08440f15.js.map